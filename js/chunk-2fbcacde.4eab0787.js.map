{"version":3,"sources":["webpack:///./src/api/managementArchives/routeM.js","webpack:///./src/api/realTimeMonitoring.js","webpack:///./static/images/mapicon.png","webpack:///./src/views/managementArchives/carBindRoad/index.vue?bb44","webpack:///src/views/managementArchives/carBindRoad/index.vue","webpack:///./src/views/managementArchives/carBindRoad/index.vue?5419","webpack:///./src/views/managementArchives/carBindRoad/index.vue","webpack:///./src/views/managementArchives/carBindRoad/index.vue?7e18"],"names":["__webpack_require__","d","__webpack_exports__","roadlist","deletelist","viewlist","carRoadList","carRoadBind","carRoadUnbind","mileageList","milesRangeByTeam","queryBindedGroups","groupSelect","bindGroups","_request__WEBPACK_IMPORTED_MODULE_0__","data","request","url","method","headers","content-type","teamAndCarList","teamAndCarAllBindList","teamAndGunList","logsDelay","lastgps","sendTerminal","vehicleControlOthers","bindQueryByCars","bindQueryByGuns","thirdpartyRegeo","module","exports","p","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","id","staticClass","_v","placeholder","props","propsCar","options","dataCar","show-all-levels","clearable","filterable","on","change","getCheckList","scopedSlots","_u","key","fn","ref","node","_s","label","isLeaf","_e","children","length","model","callback","$$v","imeiCar","checkList","_l","item","index","class","now","indexNow","checked","$event","checkChange","info","click","viewMap","show","showMap","mapTitle","closeMap","staticRenderFns","carBindRoadvue_type_script_lang_js_","roadLoading","mapLoading","checkListLoading","map","undefined","roadId2Name","roadObj","expandTrigger","roadList","chooseShow","mounted","_t","formatCas","JSON","parse","sessionStorage","teamCarList","Object","routeM","page","limit","then","res","success","records","forEach","x","finally","getCarRoadList","BMap","Map","enableMapClick","centerAndZoom","addControl","MapTypeControl","mapTypes","BMAP_NORMAL_MAP","BMAP_HYBRID_MAP","enableScrollWheelZoom","methods","imei","result","_loop","i","childs","push","disabled","concat","roads","document","querySelector","modelWidth","offsetWidth","$refs","style","left","geometryId","geom","split","oriData","Point","clearOverlays","addOverlay","Marker","icon","Icon","mapicon_default","a","Size","anchor","imageOffset","setViewport","margins","Polyline","strokeOpacity","strokeWeight","strokeColor","reset","e","roadId","sendNo","sendId","indexOf","deviceNo","catch","err","splice","setTimeout","managementArchives_carBindRoadvue_type_script_lang_js_","component","componentNormalizer","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_7f1f9ce0_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_7f1f9ce0_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-2fbcacde.4eab0787.js","sourcesContent":["/*\r\n * @Author: your name\r\n * @Date: 2020-08-03 09:35:51\r\n * @LastEditTime: 2021-06-25 18:33:00\r\n * @LastEditors: Please set LastEditors\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\bda09-Web\\src\\api\\managementArchives\\routeM.js\r\n */\r\nimport request from '../../request'\r\n//路线列表\r\nexport function roadlist(data) {\r\n  return request({\r\n    url: '/map/roadlist',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n//路线删除\r\nexport function deletelist(data) {\r\n  return request({\r\n    url: '/map/delete',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 路线查看\r\nexport function viewlist(data) {\r\n  return request({\r\n    url: '/map/complexGeometry',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 车路绑定列表\r\nexport function carRoadList(data) {\r\n  return request({\r\n    url: '/planRoad/list',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 车路绑定提交\r\nexport function carRoadBind(data) {\r\n  return request({\r\n    url: '/planRoad/add',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// 车路绑定删除\r\nexport function carRoadUnbind(data) {\r\n  return request({\r\n    url: '/planRoad/remove',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n// // 行驶里程 时长\r\n// export function mileageList(data) {\r\n//   return request({\r\n//     url: '/statistics/carmiles',\r\n//     method: 'post',\r\n//     data\r\n//   })\r\n// }\r\n// 以上接口被改成这个接口（行驶里程 时长）\r\nexport function mileageList(data) {\r\n  return request({\r\n    url: '/statistics/milesrange',\r\n    method: 'post',\r\n    data,\r\n    headers:{'content-type':'application/json'}\r\n  })\r\n}\r\n// 大队里程、时长统计\r\nexport function milesRangeByTeam(data) {\r\n  return request({\r\n    url: '/statistics/milesRangeByTeam',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n//根据路线id查询车组\r\nexport function queryBindedGroups(data) {\r\n  return request({\r\n    url: '/eoms/groups/queryBindedGroupsByRoute',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\n//查询车组\r\nexport function groupSelect(data) {\r\n  return request({\r\n    url: '/eoms/groups/queryAllGroup',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n//路线绑定车组\r\nexport function bindGroups(data) {\r\n  return request({\r\n    url: '/eoms/groups/bindGroup',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n\r\n","import request from '../request'\r\n\r\n//获取所有大队下的所有车辆(包括没绑定设备的车辆)\r\nexport function teamAndCarList(data) {\r\n    return request({\r\n        url: '/cars/allList',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\nexport function teamAndCarAllBindList(data) {\r\n    return request({\r\n        url: '/cars/allBindList',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\n//获取所有大队下的所有枪支\r\nexport function teamAndGunList(data) {\r\n    return request({\r\n        url: '/guns/allList',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n//延迟一条异常报警\r\nexport function logsDelay(data) {   \r\n    return request({\r\n        url: '/logs/delays',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n//获取枪支设备最后点信息\r\nexport function lastgps(data) {\r\n    return request({\r\n        url: '/map/lastgps',\r\n        method: 'post',\r\n        // params:data,\r\n        data,\r\n        headers:{'content-type':'application/json'},\r\n    })\r\n}\r\n// 车辆最新位置信息\r\nexport function vehicleStatus(data) {\r\n    return request({\r\n        url: '/proxy/StandardApiAction_vehicleStatus',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\n// // 测试demo\r\n// export function demoData(data) {\r\n//     return request({\r\n//         url: '/demo/location',\r\n//         method: 'post',\r\n//         data\r\n//     })\r\n// }\r\n\r\n// 演示demo\r\nexport function demoData(data) {\r\n    return request({\r\n        url: '/demo/location',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\n// 获取车辆行驶里程\r\nexport function runMileage(data) {\r\n    return request({\r\n        url: '/proxy/StandardApiAction_runMileage',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\n\r\nexport function sendTerminal(data) {\r\n    return request({\r\n        url: '/terminal/send',\r\n        method: 'post',\r\n        data,\r\n        headers:{'content-type':'application/json'}\r\n    })\r\n}\r\n\r\n// 车辆控制\r\nexport function vehicleControlOthers(data) {\r\n    return request({\r\n        url: '/proxy/StandardApiAction_vehicleControlOthers',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\n// 查询车辆绑定的枪支\r\nexport function bindQueryByCars(data) {\r\n    return request({\r\n        url: '/eoms/relations/queryByCars',\r\n        method: 'post',\r\n        data,\r\n\r\n    })\r\n}\r\n// 查询枪支绑定车辆\r\nexport function bindQueryByGuns(data) {\r\n    return request({\r\n        url: '/eoms/relations/queryByGuns',\r\n        method: 'post',\r\n        data,\r\n\r\n    })\r\n}\r\n\r\n// 查询地址\r\nexport function thirdpartyRegeo(data) {\r\n    return request({\r\n        url: '/noapp/thirdparty/gaode/regeo',\r\n        method: 'post',\r\n        data,\r\n\r\n    })\r\n}\r\n\r\n\r\n","module.exports = __webpack_public_path__ + \"img/mapicon.7621a9c3.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.roadLoading),expression:\"roadLoading\"}],attrs:{\"id\":\"carBindRoad\"}},[_c('div',{staticClass:\"chooseCar\"},[_c('label',{staticClass:\"el-form-item__label\"},[_vm._v(\"选择车辆\")]),_c('el-cascader',{attrs:{\"placeholder\":\"选择车辆\",\"props\":_vm.propsCar,\"options\":_vm.dataCar,\"show-all-levels\":false,\"clearable\":\"\",\"filterable\":\"\"},on:{\"change\":_vm.getCheckList},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn [_c('span',[_vm._v(_vm._s(data.label))]),(!node.isLeaf)?_c('span',[_vm._v(\" (\"+_vm._s(data.children.length)+\") \")]):_vm._e()]}}]),model:{value:(_vm.imeiCar),callback:function ($$v) {_vm.imeiCar=$$v},expression:\"imeiCar\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.chooseShow),expression:\"chooseShow\"}],staticClass:\"roads\"},[_c('label',{staticClass:\"el-form-item__label\"},[_vm._v(\"选择路线\")]),_c('el-checkbox-group',{staticClass:\"checkList\",model:{value:(_vm.checkList),callback:function ($$v) {_vm.checkList=$$v},expression:\"checkList\"}},_vm._l((_vm.roadList),function(item,index){return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.checkListLoading),expression:\"checkListLoading\"}],key:index,staticClass:\"group\",class:{now:index==_vm.indexNow}},[_c('el-checkbox',{attrs:{\"label\":item.name,\"checked\":item.checked},on:{\"change\":function($event){return _vm.checkChange(item)}}}),_c('i',{staticClass:\"tip\"},[_vm._v(_vm._s(item.info))]),_c('span',{on:{\"click\":function($event){return _vm.viewMap(item,index)}}},[_vm._v(\"查看路线\")])],1)}),0)],1),_c('div',{staticClass:\"bindRoad\"},[_c('ins',{staticClass:\"title\"},[_vm._v(\"已绑定路线:\")]),_vm._l((_vm.checkList),function(item,index){return _c('span',{key:index},[_vm._v(_vm._s(item))])})],2),_c('div',{ref:\"map\",staticClass:\"map\",class:{show:_vm.showMap}},[_c('div',{staticClass:\"title\"},[_c('span',[_vm._v(_vm._s(_vm.mapTitle))]),_c('div',{staticClass:\"close\",on:{\"click\":_vm.closeMap}},[_vm._v(\"×\")])]),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.mapLoading),expression:\"mapLoading\"}],attrs:{\"id\":\"map\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"carBindRoad\" v-loading=\"roadLoading\">\r\n    <div class=\"chooseCar\">\r\n      <label class=\"el-form-item__label\">选择车辆</label>\r\n      <el-cascader @change=\"getCheckList\" v-model=\"imeiCar\" placeholder=\"选择车辆\" :props=\"propsCar\" :options=\"dataCar\" :show-all-levels=\"false\" clearable filterable>\r\n        <template slot-scope=\"{ node, data }\">\r\n          <span>{{ data.label }}</span>\r\n          <span v-if=\"!node.isLeaf\"> ({{ data.children.length }}) </span>\r\n        </template>\r\n      </el-cascader>\r\n    </div>\r\n    <div class=\"roads\" v-show=\"chooseShow\">\r\n      <label class=\"el-form-item__label\">选择路线</label>\r\n      <el-checkbox-group class=\"checkList\" v-model=\"checkList\">\r\n        <div class=\"group\" :class=\"{now:index==indexNow}\" v-loading=\"checkListLoading\" v-for=\"(item,index) in roadList\" :key=\"index\">\r\n          <el-checkbox :label=\"item.name\" @change=\"checkChange(item)\" :checked=\"item.checked\"></el-checkbox>\r\n          <i class=\"tip\">{{item.info}}</i>\r\n          <span @click=\"viewMap(item,index)\">查看路线</span>\r\n        </div>\r\n      </el-checkbox-group>\r\n    </div>\r\n    <div class=\"bindRoad\">\r\n      <ins class=\"title\">已绑定路线:</ins>\r\n      <span v-for=\"(item,index) in checkList\" :key=\"index\">{{item}}</span>\r\n    </div>\r\n    <div class=\"map\" ref=\"map\" :class=\"{show:showMap}\">\r\n      <div class=\"title\">\r\n        <span>{{mapTitle}}</span>\r\n        <div class=\"close\" @click=\"closeMap\">×</div>\r\n      </div>\r\n      <div id=\"map\" v-loading=\"mapLoading\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { teamAndCarList } from \"../../../api/realTimeMonitoring\";// 获取设备\r\nimport { roadlist,viewlist,carRoadList,carRoadBind,carRoadUnbind } from \"../../../api/managementArchives/routeM\";// 获取路线列表、路线数据\r\nimport mapIcon from \"../../../../static/images/mapicon.png\";\r\nexport default {\r\n  data(){\r\n    return {\r\n      indexNow:-1,// 当前点击的数据，用来添加查看地图时的样式\r\n      roadLoading:true,// 页面初始化加载\r\n      mapLoading:true,// 地图加载\r\n      checkListLoading:false,// 路线选择框加载\r\n      map:undefined,// 地图\r\n      showMap:false,// 是否显示地图\r\n      mapTitle:'',// 地图名字\r\n      imeiCar:[],// 车辆设备号，因为级联选择器是一个数组\r\n      dataCar:[],// 设备数据\r\n      roadId2Name:{},// 路线的id对应的名字对象\r\n      roadObj:{},// 后台返回的设备与路线的绑定对象\r\n      propsCar:{// 触发方法\r\n        expandTrigger:'hover'\r\n      },\r\n      roadList:[],// 所有路线\r\n      checkList:[],// 选中的路线，用来判断是绑定还是解绑\r\n      chooseShow:false// 是否显示路线选择框\r\n    }\r\n  },\r\n  mounted(){\r\n    let _t = this,c=0,// 要与请求次数相等\r\n        reqNum = 1;// 请求次数\r\n    // 获取车列表\r\n    _t.dataCar = _t.formatCas(JSON.parse(sessionStorage.teamCarList),'serialNo','licenseNo');// 设置车下拉树的数据格式\r\n    // teamAndCarList({}).then(res => {\r\n    //   if(res.success){\r\n    //     _t.dataCar = _t.formatCas(res.data,'serialNo','licenseNo');// 设置车下拉树的数据格式\r\n    //   };// 错误信息被request.js拦截\r\n    // }).finally(()=>{\r\n    //   if(++c>=reqNum){\r\n    //     _t.roadLoading = false;\r\n    //   };\r\n    // });\r\n    // 获取路线列表\r\n    roadlist({page: 1,limit: 10000}).then(res => {\r\n      if(res.success){\r\n        res.data.records.forEach(x=>{// 添加属性\r\n          x.checked = false;\r\n          x.info = '';\r\n          _t.roadId2Name[x.id] = x.name;\r\n        });\r\n        _t.roadList = res.data.records;\r\n      };\r\n    }).finally(()=>{\r\n      // if(++c>=reqNum){\r\n        _t.roadLoading = false;\r\n      // };\r\n    });\r\n    // 获取车路绑定列表\r\n    _t.getCarRoadList();\r\n    // carRoadList({}).then(res => {\r\n    //   if(res.success){\r\n    //     _t.roadObj = res.data;\r\n    //   };\r\n    // }).finally(()=>{\r\n    //   if(++c>=reqNum){\r\n    //     _t.roadLoading = false;\r\n    //   };\r\n    // });\r\n    // 渲染地图\r\n    _t.map = new BMap.Map(\"map\", { enableMapClick: false });\r\n    _t.map.centerAndZoom(\"潮州\", 13);\r\n    _t.map.addControl(\r\n      new BMap.MapTypeControl({\r\n        mapTypes: [BMAP_NORMAL_MAP, BMAP_HYBRID_MAP]\r\n      })\r\n    );\r\n    _t.map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放\r\n  },\r\n  methods:{\r\n    formatCas(data,imei,name){// 格式化级联选择器数据 data是原始数据 imei是vaue值 name是label值\r\n      let result = [],id = 0,_t = this;\r\n      for(let i in data){\r\n        let childs = [];// 格式化子数组\r\n        data[i].forEach(x=>{\r\n          childs.push({value:x[imei],label:x[name],disabled:false});\r\n        });\r\n        result.push({value:`i${id++}`,label:i==''?'未分组':i,children:childs});\r\n      };\r\n      return result;\r\n    },\r\n    getCarRoadList(){// 获取车路绑定列表，每次更新都需要执行\r\n      let _t = this;\r\n      carRoadList({}).then(res => {\r\n        if(res.success){\r\n          _t.roadObj = res.data;\r\n        };\r\n      });\r\n    },\r\n    viewMap(item,index){// 查看路线\r\n      let _t = this,roads = document.querySelector('.checkList'),modelWidth = 100+roads.offsetWidth+'px';\r\n      if(_t.indexNow != index){// 不为当前选中的路线\r\n          _t.$refs.map.style.left = modelWidth;// 设置弹窗位置\r\n          _t.indexNow = index;// 设置当前点击的数据下标\r\n          _t.mapLoading = true;// 加载动画\r\n          _t.mapTitle = item.name;// 设置地图名字\r\n          _t.showMap = true;// 显示地图\r\n          viewlist({geometryId:item.geometryId}).then(res=>{// 地图上画线\r\n            if(res.success){\r\n              let result = res.data.geom.split(',').map(x=>{\r\n                let oriData = x.split(' ');\r\n                x = new BMap.Point(oriData[0],oriData[1]);\r\n                return x;\r\n              });\r\n              _t.map.clearOverlays();// 清空地图\r\n              // 开始图标\r\n              _t.map.addOverlay(new BMap.Marker(result[0], { icon: new BMap.Icon(mapIcon, new BMap.Size(26, 41), { anchor: new BMap.Size(13, 40), imageOffset: new BMap.Size(-199, -139) }) }));\r\n              // 结束图标\r\n              _t.map.addOverlay( new BMap.Marker(result[result.length - 1], { icon:new BMap.Icon(mapIcon, new BMap.Size(26, 41), { anchor: new BMap.Size(13, 40), imageOffset: new BMap.Size(-225, -139) }) }) );\r\n              _t.map.setViewport(result,{margins:[100,100,100,100]});\r\n              _t.map.addOverlay(new BMap.Polyline(result,{strokeOpacity: 1,strokeWeight: 4, strokeColor:'#3f9c0f'}));\r\n            };\r\n          }).finally(()=>{\r\n            _t.mapLoading = false;// 关闭加载动画\r\n          });\r\n      };\r\n    },\r\n    closeMap(){// 关闭弹窗\r\n      let _t = this;\r\n      _t.showMap = false;\r\n      _t.indexNow = -1;// 清空选中状态\r\n      _t.map.clearOverlays();// 清空地图\r\n      _t.map.reset();// 重置地图\r\n    },\r\n    getCheckList(e){// 获取该设备绑定的路线，然后设置选中状态\r\n      let _t = this;\r\n      // _t.checkListLoading = true;\r\n      _t.closeMap();// 关闭地图\r\n      _t.checkList = [];// 清空绑定\r\n      if(e.length>0){\r\n        _t.chooseShow = true;// 显示路线选择框\r\n        _t.checkList = _t.roadObj[e[1]].map(x=>_t.roadId2Name[x.roadId]);// 设置选中的项\r\n      }else{// 清空按钮时\r\n        _t.chooseShow = false;\r\n      };\r\n    },\r\n    checkChange(item){// 绑定/解绑\r\n      let _t = this,sendNo = _t.imeiCar[1],sendId = item.id,index = _t.checkList.indexOf(item.name);\r\n      // 如果item.name在checkList中，则为绑定，反之为解绑\r\n      // 绑定或解绑失败，需要恢复之前的状态\r\n      if(index>-1){// 绑定\r\n        item.info = '绑定中...';\r\n        carRoadBind({deviceNo:sendNo,roadId:sendId}).then(res=>{\r\n          if(res.success){\r\n            item.info = '绑定成功';\r\n            _t.getCarRoadList();\r\n          };\r\n        }).catch(err=>{// 因为被request.js拦截了，只能从这里处理\r\n          item.info = '绑定失败';\r\n          _t.checkList.splice(index,1);// 从数组中删除\r\n          item.checked = false;\r\n        }).finally(()=>{\r\n          setTimeout(()=>{\r\n            item.info = '';\r\n          },1500);\r\n        });\r\n      }else{// 解绑\r\n        item.info = '解绑中...';\r\n        carRoadUnbind({deviceNo:sendNo,roadId:sendId}).then(res=>{\r\n          if(res.success){\r\n            item.info = '解绑成功';\r\n            _t.getCarRoadList();\r\n          };\r\n        }).catch(err=>{\r\n          item.info = '解绑失败';\r\n          _t.checkList.push(item.name);// 添加回数组中\r\n          item.checked = true;\r\n        }).finally(()=>{\r\n          setTimeout(()=>{\r\n            item.info = '';\r\n          },1500);\r\n        });\r\n      };\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  #carBindRoad {\r\n    padding: 10px;\r\n    .el-form-item__label {\r\n      white-space: nowrap;\r\n    }\r\n    .chooseCar {\r\n      display: flex;\r\n    }\r\n    .roads {// 选择路线\r\n      display: flex;\r\n      margin-top: 15px;\r\n      align-items: start;\r\n      .checkList {// 复选框组\r\n        max-height: 500px;\r\n        overflow-y: auto;\r\n        border: 1px solid #dcdfe6;\r\n        border-radius: 5px;\r\n        padding: 10px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        .group {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          border-radius: 5px;\r\n          padding: 0 5px;\r\n          position: relative;\r\n          &.now {\r\n            background-color: #e8e8e8;\r\n          }\r\n          i.tip {// 绑定提示\r\n            position: absolute;\r\n            top: 0;\r\n            right: 70px;\r\n            font-size: 12px;\r\n            font-style: normal;\r\n            color: #f00;\r\n          }\r\n          span {// 查看路线\r\n            font-size: 13px;\r\n            color: #983aff;\r\n            margin-left: 70px;\r\n            cursor: pointer;\r\n            &:hover {\r\n              color: #27d6d6;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .bindBtn {\r\n        margin-left: 15px;\r\n      }\r\n    }\r\n    .bindRoad {// 已绑定路线\r\n      display: flex;\r\n      align-items: center;\r\n      flex-wrap: wrap;\r\n      margin-top: 10px;\r\n      .title {\r\n        font-weight: bold;\r\n        font-size: 14px;\r\n        text-decoration: none;\r\n        color: #606266;\r\n        padding: 3px 0;\r\n      }\r\n      span {\r\n        margin-left: 10px;\r\n        font-size: 15px;\r\n        background-color: #e8e8e8;\r\n        padding: 3px 7px;\r\n        border-radius: 5px;\r\n      }\r\n    }\r\n    .map {// 地图\r\n      position: fixed;\r\n      left: 0;\r\n      z-index: -9;\r\n      overflow: hidden;\r\n      display: flex;\r\n      &.show {\r\n        top: 90px;\r\n        right: 100px;\r\n        bottom: 40px;\r\n        background-color: #fff;\r\n        border: 1px solid #dcdfe6;\r\n        z-index: 9;\r\n      }\r\n      .title {\r\n        position: absolute;\r\n        left: 0;\r\n        top: 0;\r\n        width: 100%;\r\n        height: 30px;\r\n        padding: 0 10px;\r\n        z-index: 9;\r\n        background-color: #fff;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        span {\r\n          font-size: 13px;\r\n        }\r\n        .close {\r\n          font-size: 30px;\r\n          cursor: pointer;\r\n          color: #919191;\r\n        }\r\n      }\r\n      #map {\r\n        flex: 1;\r\n        margin-top: 30px;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7f1f9ce0&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=7f1f9ce0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f1f9ce0\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=7f1f9ce0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=7f1f9ce0&lang=scss&scoped=true&\""],"sourceRoot":""}