(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["brigadeManagement"],{"029f":function(t,e,i){},"30cb":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container",attrs:{id:"bankPersonManagement"}},[i("div",{staticClass:"filter-container"},[i("el-button",{staticClass:"filter-item filter-item-btn",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:t.handleCreate}},[t._v("添加")]),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"iconfont icondaochu",loading:t.exportLoading},on:{click:t.exportExcel}},[t._v("导出")]),i("el-button",{staticClass:"filter-item filter-item-btn",attrs:{type:"primary",icon:"iconfont icondaoru"},on:{click:function(e){t.uploadVisible=!0}}},[t._v("导入")])],1),i("div",{staticClass:"tableBox"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,fit:"","highlight-current-row":"","row-class-name":t.tableRowClassName}},[i("el-table-column",{attrs:{label:"序号",fixed:"",prop:"id",sortable:"custom",align:"center",width:"80",type:"index",index:t.indexMethod}}),i("el-table-column",{attrs:{label:"姓名",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",{staticClass:"link-type",on:{click:function(e){return t.handleUpdate(a)}}},[t._v(t._s(a.name))])]}}])}),i("el-table-column",{attrs:{label:"身份证号",width:"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.userCode))])]}}])}),i("el-table-column",{attrs:{label:"性别",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t.formatSexStatus(e.row.sex)))])]}}])}),i("el-table-column",{attrs:{label:"年龄",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(-1==e.row.age?"":e.row.age))])]}}])}),i("el-table-column",{attrs:{label:"电话号码",width:"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.telNum))])]}}])}),i("el-table-column",{attrs:{label:"地址","min-width":"120px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.address))])]}}])}),i("el-table-column",{attrs:{label:"绑定标签",width:"220px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.rfid))])]}}])}),i("el-table-column",{attrs:{label:"所属银行",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.parentBankName))])]}}])}),i("el-table-column",{attrs:{label:"所属营业厅",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.destinationName))])]}}])}),i("el-table-column",{attrs:{label:"状态",width:"80px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t.formatStatus(e.row.status)))])]}}])}),i("el-table-column",{attrs:{label:"头像","min-width":"80px",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.photoId?i("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.popShow(a)}}},[t._v("点击显示")]):i("span",{staticStyle:{color:"red"}},[t._v("暂无照片")])]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center","min-width":"300",fixed:"right","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit-outline"},on:{click:function(e){return t.handleUpdate(a)}}},[t._v("编辑")]),null==a.rfidId?i("el-button",{attrs:{type:"primary",size:"mini",icon:"iconfont iconsuo"},on:{click:function(e){return t.handleBind(a)}}},[t._v("绑定标签")]):i("el-button",{attrs:{type:"warning",size:"mini",icon:"iconfont iconjiesuo5"},on:{click:function(e){return t.unbindSubmit(a)}}},[t._v("解绑标签")]),i("el-button",{attrs:{type:"primary",size:"mini",icon:"iconfont iconshangchuan"},on:{click:function(e){return t.handleUpload(a)}}},[t._v("上传")])]}}])})],1)],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit,layout:"prev, pager, next, sizes, total, jumper"},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),i("el-dialog",{attrs:{id:"myDialog",title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,center:""},on:{close:t.scrollTop,"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticClass:"formStyle",attrs:{rules:t.rules,model:t.temp,"label-position":"left"}},["create"==t.dialogStatus?i("el-form-item",{attrs:{label:"姓名",prop:"name"}},[i("el-input",{model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1):t._e(),i("el-form-item",{attrs:{label:"身份证号",prop:"userCode"}},[i("el-input",{model:{value:t.temp.userCode,callback:function(e){t.$set(t.temp,"userCode",e)},expression:"temp.userCode"}})],1),i("el-form-item",{attrs:{label:"性别",prop:"sex"}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:t.temp.sex,callback:function(e){t.$set(t.temp,"sex",t._n(e))},expression:"temp.sex"}},t._l(t.sexOptions,function(t){return i("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})}),1)],1),i("el-form-item",{attrs:{label:"年龄",prop:"age"}},[i("el-input",{model:{value:t.temp.age,callback:function(e){t.$set(t.temp,"age",t._n(e))},expression:"temp.age"}})],1),i("el-form-item",{attrs:{label:"电话号码",prop:"telNum"}},[i("el-input",{model:{value:t.temp.telNum,callback:function(e){t.$set(t.temp,"telNum",e)},expression:"temp.telNum"}})],1),i("el-form-item",{attrs:{label:"地址",prop:"address"}},[i("el-input",{model:{value:t.temp.address,callback:function(e){t.$set(t.temp,"address",e)},expression:"temp.address"}})],1),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:t.temp.status,callback:function(e){t.$set(t.temp,"status",t._n(e))},expression:"temp.status"}},t._l(t.personStatusOptions,function(t){return i("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})}),1)],1),i("el-form-item",{attrs:{label:"所属银行",prop:"parentBankId"}},[i("el-select",{staticClass:"filter-item",attrs:{filterable:"",placeholder:"Please select"},model:{value:t.temp.parentBankId,callback:function(e){t.$set(t.temp,"parentBankId",t._n(e))},expression:"temp.parentBankId"}},t._l(t.bankOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:2==t.status}})}),1)],1),i("el-form-item",{attrs:{label:"所属营业厅",prop:"destinationId"}},[i("el-select",{staticClass:"filter-item",attrs:{filterable:"",placeholder:"Please select"},model:{value:t.temp.destinationId,callback:function(e){t.$set(t.temp,"destinationId",t._n(e))},expression:"temp.destinationId"}},t._l(t.networkOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("确定")])],1)],1),i("el-dialog",{attrs:{id:"myDialog",title:"绑定",visible:t.BindDialogFormVisible,center:""},on:{close:t.scrollTop,"update:visible":function(e){t.BindDialogFormVisible=e}}},[i("el-form",{ref:"bindForm",staticClass:"bindForm formStyle",attrs:{rules:t.bindRules,"label-position":"left",model:t.bindTemp}},[1==t.bindTemp.type&&"bind"==t.bindDialogStatus?i("el-form-item",{attrs:{label:"标签",prop:"rfidId"}},[i("el-select",{staticClass:"filter-item",attrs:{filterable:"",placeholder:"Please select"},model:{value:t.bindTemp.rfidId,callback:function(e){t.$set(t.bindTemp,"rfidId",e)},expression:"bindTemp.rfidId "}},t._l(t.rfidOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.rfid,value:t.id}})}),1)],1):t._e()],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){"bind"==t.bindDialogStatus?t.bindSubmit():t.unbindSubmit()}}},[t._v("确定")])],1)],1),i("el-dialog",{attrs:{id:"myDialog1",title:"上传图片",visible:t.DialogUploadVisible,center:""},on:{"update:visible":function(e){t.DialogUploadVisible=e}}},[i("el-upload",{ref:"my-upload",staticClass:"upload-demo",attrs:{multiple:!1,limit:1,drag:"",action:"/gate/file/xxx/upload",accept:".jpg,.png","before-upload":t.beforeUploadFile,headers:{Authorization:"Bearer "+t.token},"on-success":t.uploadSuccess}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),i("em",[t._v("点击上传")])]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件,且文件大小不得超过10M")]),i("div",{staticClass:"el-upload__tip red",attrs:{slot:"tip"},slot:"tip"},[t._v("图片上传尺寸请尽量为 295*413 ")])]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1),i("el-dialog",{attrs:{id:"myDialog2",title:"图片",width:"30%",visible:t.imgVisible,center:""},on:{"update:visible":function(e){t.imgVisible=e}}},[i("img",{staticClass:"taskSrc",attrs:{src:t.taskSrc,alt:"暂无图片"}})]),i("my-upload",{attrs:{visible:t.uploadVisible,uploadData:{type:5}},on:{"update:visible":function(e){t.uploadVisible=e},dataUpdated:t.reqSuccess}})],1)},n=[],s=(i("34ef"),i("cebc")),r=(i("7514"),i("9865"),i("7f7f"),i("bd86")),o=(i("78ce"),i("98c6")),l=i("333d"),d=i("47a3"),u=i("4807"),c=i("bc33"),m=i("a2fc"),p=i("d2bf"),f=i("66e8"),g=i("d256"),b=[{key:1,display_name:"男"},{key:0,display_name:"女"}],h=[{key:0,display_name:"初始化"},{key:1,display_name:"正常"},{key:2,display_name:"删除"}],y=function(t,e,i){e||i(),setTimeout(function(){/^1[3456789]\d{9}$/.test(e)?i():i(new Error("手机号码有误，请重填"))},1e3)},v=void 0,k={name:"ComplexTable",components:{Pagination:l["a"],myUpload:o["a"]},data:function(){var t;return t={power:JSON.parse(sessionStorage.getItem("userInfo")).Power,token:JSON.parse(sessionStorage.getItem("userInfo"))["Bearer "],tableKey:0,list:null,total:0,indexMethod:1,listLoading:!1,listQuery:{page:1,limit:10,name:""},sexOptions:b,personStatusOptions:h,temp:{name:null,userCode:"",sex:1,age:"",officeTime:null,status:0,workType:0},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"添加"},rules:{name:[{required:!0,message:"请填写姓名",trigger:"blur"}],userCode:[{required:!0,message:"请填写身份证号",trigger:"blur"}],sex:[{required:!0,type:"number",message:"请选择性别",trigger:"change"}],age:[{required:!0,type:"number",message:"请填写年龄",trigger:"blur"}],telNum:[{validator:y,trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],parentBankId:[{required:!0,message:"请选择所属银行",trigger:"change"}],destinationId:[{required:!0,message:"请选择所属营业厅",trigger:"change"}]},pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},bindTypeOptions:[{id:1,name:"rfid"}],bindTemp:{},BindDialogFormVisible:!1,bindDialogStatus:"",bindMap:{bind:"绑定",unbind:"解绑"},networkOptions:[],bankOptions:[],rfidOptions:[],bindRules:{rfidId:[{required:!0,message:"请选择绑定标签",trigger:"change"}]}},Object(r["a"])(t,"rfidOptions",[]),Object(r["a"])(t,"scanOptions",[]),Object(r["a"])(t,"fileList",[]),Object(r["a"])(t,"DialogUploadVisible",!1),Object(r["a"])(t,"personId",null),Object(r["a"])(t,"imgVisible",!1),Object(r["a"])(t,"taskSrc",""),Object(r["a"])(t,"uploadVisible",!1),Object(r["a"])(t,"exportLoading",!1),t},created:function(){this.getList(),this.getSelect()},methods:{beforeUploadFile:function(t){var e=t.name.substring(t.name.lastIndexOf(".")+1),i=t.size/1024/1024;return"jpg"!==e&&"png"!==e&&"JPG"!==e&&"PNG"!==e?(this.$message.warning("只能上传后缀是.jpg或者.png的文件"),!1):i>10?(this.$message.warning("文件大小不得超过10M"),!1):void 0},reqSuccess:function(t){1==t&&this.getList()},popShow:function(t){var e=this;this.listLoading=!0,this.taskSrc="";var i=this;if(null==t.photoId)return this.imgVisible=!0,void(this.listLoading=!1);Object(g["q"])({id:t.photoId,type:[3]}).then(function(t){if(0==t.status){if(t.data&&0==t.data.length)return void(i.imgVisible=!0);Object(g["m"])({path:t.data[0].path,fileName:t.data[0].fileName}).then(function(t){i.imgVisible=!0,i.listLoading=!1,i.taskSrc=window.URL.createObjectURL(t)}).finally(function(){i.listLoading=!1})}else e.$message.error(t.msg)}).catch(function(){i.listLoading=!1}).finally(function(){})},handleUpload:function(t){var e=this;this.DialogUploadVisible=!0,this.$nextTick(function(){e.$refs["my-upload"].clearFiles()}),this.personId=t.id},uploadSuccess:function(t){var e=this,i=this;if(null!=t.data){var a=new Promise(function(e,i){Object(g["G"])({fileName:t.data.filename,path:t.data.path,type:3}).then(function(t){e(t)}).catch(function(t){i(t)})});a.then(function(t){Object(p["a"])({personId:e.personId,photoId:t.data}).then(function(t){0==t.status?(e.DialogUploadVisible=!1,e.$message.success(t.msg),e.getList()):e.$message.error(t.msg)}).catch(function(){e.$message.error(res1.msg)}).finally(function(){i.listLoading=!1})},function(t){i.listLoading=!1,e.$message.error(t.msg)})}},handleBind:function(t){this.getRfid(t),this.bindDialogStatus="bind",this.bindTemp={type:1,personId:t.id,rfidId:null},this.BindDialogFormVisible=!0},getRfid:function(t){var e=this,i=this;this.rfidOptions=[],Object(u["b"])({rfidType:[99],status:[0]}).then(function(t){if(0==t.status){if(null==t.data)return;i.rfidOptions=t.data,i.rfidOptions.unshift({id:null,rfid:"请选择"})}else null==t.data&&(e.rfidOptions=[],e.rfidOptions.pop()),e.$message.error(t.msg)})},unbindSubmit:function(t){var e,i,a=this;e={personId:t.id},i=p["f"],i(e).then(function(t){0==t.status?(a.getList(),a.$message.success(t.msg),a.BindDialogFormVisible=!1):a.$message.error(t.msg)}).finally(function(){v.close()})},bindSubmit:function(){var t=this;this.$refs["bindForm"].validate(function(e){var i,a;e&&(v=t.$loading({target:"#myDialog .el-dialog"}),1==t.bindTemp.type&&(i={personId:t.bindTemp.personId,rfidId:t.bindTemp.rfidId},a=p["b"]),a(i).then(function(e){0==e.status?(t.getList(),t.$message.success(e.msg),t.BindDialogFormVisible=!1):t.$message.error(e.msg)}).finally(function(){v.close()}))})},getList:function(){var t=this,e=this;e.listLoading=!0,Object(p["d"])({page:this.listQuery.page,limit:10,status:[0,1]}).then(function(i){0==i.status?(t.list=i.data,t.total=i.count,t.indexMethod=(e.listQuery.page-1)*e.listQuery.limit+1):t.$message.error(i.msg)}).finally(function(){e.listLoading=!1})},findItem:function(t,e,i){var a={};return a=t.find(function(t){return t[e]===i}),void 0==a&&(a={}),a},resetTemp:function(){this.temp={name:null,userCode:"",sex:1,age:"",status:0,workType:0,parentBankId:null,parentBankName:null,destinationId:null,destinationName:null}},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},createData:function(){var t=this;this.$refs["dataForm"].validate(function(e){if(!e)return!1;v=t.$loading({target:"#myDialog .el-dialog"});var i=Object(s["a"])({},t.temp);i.age||0===i.age||(i.age=-1),i.workType=1,i.parentBankId||0===i.parentBankId?i.parentBankName=t.findItem(t.bankOptions,"id",i.parentBankId).name:(delete i.parentBankId,delete i.parentBankName),i.destinationId||0===i.destinationId?i.destinationName=t.findItem(t.networkOptions,"id",i.destinationId).name:(delete i.destinationId,delete i.destinationName),i.telNum||(i.telNum=""),i.address||(i.address=""),Object(p["e"])(i).then(function(e){0==e.status?(t.getList(),t.$message.success("添加成功"),t.dialogFormVisible=!1):t.$message.error(e.msg)}).finally(function(){v.close()})})},handleUpdate:function(t){var e=this;this.temp={id:t.id,userCode:t.userCode,sex:t.sex,status:t.status,workType:1,parentBankId:t.parentBankId,destinationId:t.destinationId,address:t.address,telNum:t.telNum},-1!==t.age&&(this.temp.age=t.age),this.temp.parentBankId||0===this.temp.parentBankId?this.temp.parentBankName=this.findItem(this.bankOptions,"id",this.temp.parentBankId).name:(delete this.temp.parentBankId,delete this.temp.parentBankName),this.temp.destinationId||0===this.temp.destinationId?this.temp.destinationName=this.findItem(this.networkOptions,"id",this.temp.destinationId).name:(delete this.temp.destinationId,delete this.temp.destinationName),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},updateData:function(){var t=this;this.$refs["dataForm"].validate(function(e){if(!e)return!1;v=t.$loading({target:"#myDialog .el-dialog"}),t.temp.parentBankId||0===t.temp.parentBankId?t.temp.parentBankName=t.findItem(t.bankOptions,"id",t.temp.parentBankId).name:(delete t.temp.parentBankId,delete t.temp.parentBankName),t.temp.destinationId||0===t.temp.destinationId?t.temp.destinationName=t.findItem(t.networkOptions,"id",t.temp.destinationId).name:(delete t.temp.destinationId,delete t.temp.destinationName);var i=Object(s["a"])({},t.temp);i.age||0===i.age||(i.age=-1),i.officeTime=new Date(t.temp.officeTimeShow).getTime(),delete i.officeTimeShow,i.telNum||(i.telNum=""),i.address||(i.address=""),Object(p["e"])(i).then(function(e){0==e.status?(t.getList(),t.$message.success("编辑成功"),t.dialogFormVisible=!1):t.$message.error(e.msg)}).finally(function(){v.close()})})},handleDelete:function(t){var e=this,i=this;i.listLoading=!0,Object(d["f"])({personId:t.id}).then(function(t){0==t.status?(i.listQuery.page>1&&i.list.length<=1&&(i.listQuery.page-=1),e.getList(),i.$message.success("刪除成功")):(e.$message.error(t.msg),i.listLoading=!1)}).catch(function(t){i.listLoading=!1})},formatSexStatus:function(t){return 0==t?"女":1==t?"男":void 0},formatStatus:function(t){return 0==t?"初始化":1==t?"正常":"删除"},formatPostStatus:function(t){return 1==t?"司机":2==t?"车组长":3==t?"押运员":4==t?"业务员":5==t?"大队长":6==t?"枪管员":7==t?"车管员":8==t?"库管员":void 0},getSelect:function(){var t=this,e=this;Object(m["d"])().then(function(i){t.bankOptions=[],0==i.status?null==i.data&&(i.data=[]):(null==i.data&&(i.data=[]),t.$message.error(i.msg)),e.bankOptions=i.data,e.bankOptions.unshift({id:null,name:"请选择"})}),Object(c["b"])({type:1}).then(function(i){0==i.status?null===i.data&&(i.data=[]):(null==i.data&&(i.data=[]),t.$message.error(i.msg)),e.networkOptions=i.data,e.networkOptions.unshift({id:-1,name:"总行"}),e.networkOptions.unshift({id:null,name:"请选择"})})},scrollTop:function(){var t=document.querySelector("#myDialog .el-dialog__body");t.scrollTop=0},tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2==0?"color-row":e%2==1?"noColor-row":""},exportExcel:function(){var t=this;this.exportLoading=!0,Object(f["b"])({excelType:28,title:"银行工作人员表"}).then(function(e){try{var i=new TextDecoder("utf-8"),a=JSON.parse(i.decode(new Uint8Array(e)));t.$message({message:a.msg,type:"warning"})}catch(o){e.headers;var n="银行工作人员表.xls",s=new Blob([e],{type:"application/excel"}),r=document.createElement("a");r.href=window.URL.createObjectURL(s),r.download=n,r.click(),r.remove()}}).finally(function(){t.exportLoading=!1})}}},w=k,O=(i("c955"),i("2877")),x=Object(O["a"])(w,a,n,!1,null,null,null);e["default"]=x.exports},"69d9":function(t,e,i){"use strict";i.d(e,"d",function(){return a}),i.d(e,"c",function(){return n}),i.d(e,"e",function(){return s}),i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o});i("ac6a"),i("f3e2"),i("8ea5"),i("a481"),i("0298"),i("df7c");function a(t,e){var i=new Date(t),a=i.getFullYear(),s=n(i.getMonth()+1),r=n(i.getDate()),o=n(i.getHours()),l=n(i.getMinutes()),d=n(i.getSeconds());return 1==e?a+"-"+s+"-"+r+" "+o+":"+l+":"+d:a+"-"+s+"-"+r}function n(t){return t<10?"0"+t:t}function s(t){var e=new Date(t).toJSON();return new Date(+new Date(e)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")}function r(t){var e=m(t.lat,t.lng),i=new BMap.Point(e[1],e[0]);return i}function o(t){var e=[];return t.forEach(function(t){var i=m(t.lat,t.lng),a=new BMap.Point(i[1],i[0]);e.push(a)}),e}var l=3.141592653589793,d=6378245,u=.006693421622965943,c=52.35987755982988;function m(t,e){var i=f(t,e),a=p(i[0],i[1]);return a}function p(t,e){var i=e,a=t,n=Math.sqrt(i*i+a*a)+2e-5*Math.sin(a*c),s=Math.atan2(a,i)+3e-6*Math.cos(i*c),r=n*Math.cos(s)+.0065,o=n*Math.sin(s)+.006,l=[];return l.push(o),l.push(r),l}function f(t,e){var i=g(e-105,t-35),a=b(e-105,t-35),n=t/180*l,s=Math.sin(n);s=1-u*s*s;var r=Math.sqrt(s);i=180*i/(d*(1-u)/(s*r)*l),a=180*a/(d/r*Math.cos(n)*l);var o=t+i,c=e+a,m=[];return m.push(o),m.push(c),m}function g(t,e){var i=2*t-100+3*e+.2*e*e+.1*t*e+.2*Math.sqrt(Math.abs(t));return i+=2*(20*Math.sin(6*t*l)+20*Math.sin(2*t*l))/3,i+=2*(20*Math.sin(e*l)+40*Math.sin(e/3*l))/3,i+=2*(160*Math.sin(e/12*l)+320*Math.sin(e*l/30))/3,i}function b(t,e){var i=300+t+2*e+.1*t*t+.1*t*e+.1*Math.sqrt(Math.abs(t));return i+=2*(20*Math.sin(6*t*l)+20*Math.sin(2*t*l))/3,i+=2*(20*Math.sin(t*l)+40*Math.sin(t/3*l))/3,i+=2*(150*Math.sin(t/12*l)+300*Math.sin(t/30*l))/3,i}},"7c07":function(t,e,i){"use strict";var a=i("029f"),n=i.n(a);n.a},a2fc:function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"c",function(){return s}),i.d(e,"d",function(){return r}),i.d(e,"b",function(){return o}),i.d(e,"e",function(){return l});var a=i("2ade");function n(t){return Object(a["a"])({url:"/eoms/bankGroups/add",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/eoms/bankGroups/remove",method:"post",data:t})}function r(t){return Object(a["a"])({url:"/eoms/bankGroups/select",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/eoms/bankGroups/page",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/eoms/bankGroups/setRfidHead",method:"post",data:t})}},bc33:function(t,e,i){"use strict";i.d(e,"g",function(){return n}),i.d(e,"b",function(){return s}),i.d(e,"a",function(){return r}),i.d(e,"f",function(){return o}),i.d(e,"d",function(){return l}),i.d(e,"c",function(){return d}),i.d(e,"e",function(){return u});var a=i("2ade");function n(t){return Object(a["a"])({url:"/map/lstPt",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/map/allDestination",method:"post",data:t})}function r(t){return Object(a["a"])({url:"/map/keypt",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/map/updatePt",method:"post",data:t,headers:{"content-type":"application/json"}})}function l(t){return Object(a["a"])({url:"/map/deletePt",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/map/checkArea",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/map/destinationByRoad",method:"post",data:t})}},c14a:function(t,e,i){},c955:function(t,e,i){"use strict";var a=i("c14a"),n=i.n(a);n.a},d2bf:function(t,e,i){"use strict";i.d(e,"c",function(){return n}),i.d(e,"d",function(){return s}),i.d(e,"e",function(){return r}),i.d(e,"b",function(){return o}),i.d(e,"f",function(){return l}),i.d(e,"a",function(){return d});var a=i("2ade");function n(t){return Object(a["a"])({url:"/eoms/bankWorkers/query",method:"post",data:t,headers:{"content-type":"application/json"}})}function s(t){return Object(a["a"])({url:"/eoms/bankWorkers/page",method:"post",data:t,headers:{"content-type":"application/json"}})}function r(t){return Object(a["a"])({url:"/eoms/bankWorkers/saveOrUpdate",method:"post",data:t,headers:{"content-type":"application/json"}})}function o(t){return Object(a["a"])({url:"/eoms/bankWorkers/bindRfid",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/eoms/bankWorkers/unbindRfid",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/eoms/bankWorkers/bindPhoto",method:"post",data:t})}},df7c:function(t,e,i){(function(t){function i(t,e){for(var i=0,a=t.length-1;a>=0;a--){var n=t[a];"."===n?t.splice(a,1):".."===n?(t.splice(a,1),i++):i&&(t.splice(a,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(t){return a.exec(t).slice(1)};function s(t,e){if(t.filter)return t.filter(e);for(var i=[],a=0;a<t.length;a++)e(t[a],a,t)&&i.push(t[a]);return i}e.resolve=function(){for(var e="",a=!1,n=arguments.length-1;n>=-1&&!a;n--){var r=n>=0?arguments[n]:t.cwd();if("string"!==typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,a="/"===r.charAt(0))}return e=i(s(e.split("/"),function(t){return!!t}),!a).join("/"),(a?"/":"")+e||"."},e.normalize=function(t){var a=e.isAbsolute(t),n="/"===r(t,-1);return t=i(s(t.split("/"),function(t){return!!t}),!a).join("/"),t||a||(t="."),t&&n&&(t+="/"),(a?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(s(t,function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function a(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var i=t.length-1;i>=0;i--)if(""!==t[i])break;return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var n=a(t.split("/")),s=a(i.split("/")),r=Math.min(n.length,s.length),o=r,l=0;l<r;l++)if(n[l]!==s[l]){o=l;break}var d=[];for(l=o;l<n.length;l++)d.push("..");return d=d.concat(s.slice(o)),d.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=n(t),i=e[0],a=e[1];return i||a?(a&&(a=a.substr(0,a.length-1)),i+a):"."},e.basename=function(t,e){var i=n(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return n(t)[3]};var r="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,i("f28c"))},ebd8:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container",attrs:{id:"brigadeManagement"}},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"大队名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.teamName,callback:function(e){t.$set(t.listQuery,"teamName",e)},expression:"listQuery.teamName"}}),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),1==t.power?i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:t.handleCreate}},[t._v("添加")]):t._e(),i("el-button",{staticClass:"filter-item filter-item-btn",attrs:{type:"primary",icon:"iconfont icondaochu"},on:{click:t.exportExcel}},[t._v("导出")])],1),i("div",{staticClass:"tableBox"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,fit:"","highlight-current-row":"","row-class-name":t.tableRowClassName}},[i("el-table-column",{attrs:{label:"序号",prop:"id",fixed:"",sortable:"custom",align:"center",width:"80",type:"index",index:t.indexMethod}}),i("el-table-column",{attrs:{label:"大队名称","min-width":"180px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("span",[t._v(t._s(a.teamName))])]}}])}),i("el-table-column",{attrs:{label:"建立日期","min-width":"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t.formatDateTime(e.row.createTime)))])]}}])}),i("el-table-column",{attrs:{label:"队长",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.leaderName))])]}}])}),i("el-table-column",{attrs:{label:"管辖地区","min-width":"200px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.geometryName))])]}}])}),i("el-table-column",{attrs:{label:"状态",width:"150px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t.formatStatus(e.row.status)))])]}}])}),1==t.power?i("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center","min-width":"360","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-button",{attrs:{type:"primary",size:"mini",icon:"iconfont iconsuo"},on:{click:function(e){return t.handleBind(a)}}},[t._v("绑定")]),i("el-button",{attrs:{type:"warning",size:"mini",disabled:-1==a.leaderId&&-1==a.geometryId,icon:"iconfont iconjiesuo5"},on:{click:function(e){return t.handleUnbind(a)}}},[t._v("解绑")]),i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit-outline"},on:{click:function(e){return t.handleUpdate(a)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.deleteConfirmOpen(a)}}},[t._v("删除")])]}}],null,!1,3707383930)}):t._e()],1)],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit,layout:"prev, pager, next, sizes, total, jumper"},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),i("el-dialog",{attrs:{id:"myDialog",title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,center:""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticClass:"formStyle",attrs:{rules:t.rules,model:t.temp,"label-position":"left"}},["create"==t.dialogStatus?i("el-form-item",{attrs:{label:"大队名称",prop:"teamName"}},[i("el-input",{model:{value:t.temp.teamName,callback:function(e){t.$set(t.temp,"teamName",e)},expression:"temp.teamName "}})],1):t._e(),i("el-form-item",{attrs:{label:"创建时间",prop:"createTimeShow"}},[i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",align:"right",type:"datetime",placeholder:"创建时间","picker-options":t.pickerOptions},model:{value:t.temp.createTimeShow,callback:function(e){t.$set(t.temp,"createTimeShow",e)},expression:"temp.createTimeShow"}})],1),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:t.temp.status,callback:function(e){t.$set(t.temp,"status",t._n(e))},expression:"temp.status"}},t._l(t.teamStatusOptions,function(t){return i("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})}),1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("确定")])],1)],1),i("el-dialog",{attrs:{id:"myDialog",title:t.bindMap[t.bindDialogStatus],visible:t.BindDialogFormVisible,center:""},on:{"update:visible":function(e){t.BindDialogFormVisible=e}}},[i("el-form",{ref:"bindForm",staticClass:"formStyle",attrs:{rules:t.bindRules,model:t.bindTemp,"label-position":"left"}},[i("el-form-item",{attrs:{label:t.bindMap[t.bindDialogStatus]+"类型",prop:"type"}},[i("el-select",{staticClass:"filter-item",attrs:{filterable:"",placeholder:"请选择"},model:{value:t.bindTemp.type,callback:function(e){t.$set(t.bindTemp,"type",e)},expression:"bindTemp.type"}},t._l(t.bindTypeOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:t.disabled}})}),1)],1),1==t.bindTemp.type&&"bind"==t.bindDialogStatus?i("el-form-item",{attrs:{label:"队长",prop:"leaderId"}},[i("el-select",{staticClass:"filter-item",attrs:{filterable:"",placeholder:"请选择"},model:{value:t.bindTemp.leaderId,callback:function(e){t.$set(t.bindTemp,"leaderId",e)},expression:"bindTemp.leaderId"}},t._l(t.teamLeaderOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1):t._e(),2==t.bindTemp.type&&"bind"==t.bindDialogStatus?i("el-form-item",{attrs:{label:"路线",prop:"routeId"}},[i("el-select",{staticClass:"filter-item",attrs:{filterable:"",placeholder:"请选择"},model:{value:t.bindTemp.routeId,callback:function(e){t.$set(t.bindTemp,"routeId",e)},expression:"bindTemp.routeId"}},t._l(t.geometryOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1):t._e()],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){"bind"==t.bindDialogStatus?t.bindSubmit():t.unbindSubmit()}}},[t._v("确定")])],1)],1)],1)},n=[],s=(i("34ef"),i("7f7f"),i("7514"),i("cebc")),r=(i("ac6a"),i("f3e2"),i("78ce"),i("333d")),o=i("2ade");function l(t){return Object(o["a"])({url:"/teams/list",method:"post",data:t})}function d(t){return Object(o["a"])({url:"/teams/add",method:"post",data:t})}function u(t){return Object(o["a"])({url:"/teams/update",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/teams/remove",method:"post",data:t})}function m(t){return Object(o["a"])({url:"/teams/query",method:"post",data:t})}function p(t){return Object(o["a"])({url:"/teams/bindLeader",method:"post",data:t})}function f(t){return Object(o["a"])({url:"/teams/unbindLeader",method:"post",data:t})}function g(t){return Object(o["a"])({url:"/teams/bindRoute",method:"post",data:t})}function b(t){return Object(o["a"])({url:"/teams/unbindRoute",method:"post",data:t})}var h=i("69d9"),y=i("66e8"),v=void 0,k=function(t,e,i){-1==e?i(new Error("请选择")):i()},w={name:"brigadeManagement",components:{Pagination:r["a"]},data:function(){return{power:JSON.parse(sessionStorage.getItem("userInfo")).Power,tableKey:0,list:null,total:0,indexMethod:1,listLoading:!0,listQuery:{page:1,limit:10,teamName:void 0},teamLeaderOptions:[{id:-1,name:"请选择"}],geometryOptions:[{id:-1,name:"请选择"}],teamStatusOptions:[{key:0,display_name:"正常"},{key:1,display_name:"取消"}],temp:{teamName:"",createTime:void 0,status:0},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"添加"},rules:{teamName:[{required:!0,message:"请填写大队名称",trigger:"blur"}],status:[{required:!0,message:"请选择大队状态",trigger:"change"}]},downloadLoading:!1,bindTypeOptions:[{id:-1,name:"请选择"},{id:1,name:"队长"},{id:2,name:"路线"}],bindTemp:{teamId:-1,type:1,leaderId:-1,routeId:-1},BindDialogFormVisible:!1,bindobj:{},bindDialogStatus:"",bindMap:{bind:"绑定",unbind:"解绑"},bindRules:{type:[{required:!0,message:"请选择绑定类型",trigger:"change",validator:k}],leaderId:[{required:!0,message:"请选择绑定人员",trigger:"change",validator:k}],routeId:[{required:!0,message:"请选择绑定管辖区域",trigger:"change",validator:k}]},pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},created:function(){this.getList(),this.getSelect()},methods:{deleteConfirmOpen:function(t){var e=this;this.$confirm("确定进行此操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.handleDelete(t)}).catch(function(){e.$message({type:"info",message:"已取消"})})},formatDate1:function(t){return Object(h["d"])(t,1)},getList:function(){var t=this,e=this;this.listLoading=!0,l({page:this.listQuery.page,limit:this.listQuery.limit,status:[0]}).then(function(i){0==i.status?(t.getSelect(),e.listLoading=!1,e.list=i.data,e.total=i.count,e.indexMethod=(e.listQuery.page-1)*e.listQuery.limit+1,e.dealData()):t.$message.error(i.msg)}).finally(function(){e.listLoading=!1})},dealData:function(){var t=this;this.list.forEach(function(e,i){t.list[i].createTimeShow=Object(h["d"])(e.createTime,1)})},getSelect:function(){var t=this,e=this;Object(y["f"])().then(function(i){if(0==i.status){if(null==i.data)return void(e.geometryOptions=[{id:-1,name:"请选择"}]);e.geometryOptions=i.data,e.geometryOptions.unshift({id:-1,name:"请选择"})}else null==i.data&&(t.geometryOptions=[]),t.$message.error(i.msg)})},handleFilter:function(){var t=this;if(""==this.listQuery.teamName||void 0==this.listQuery.teamName)return this.listQuery.teamName=null,void this.getList();m({teamName:this.listQuery.teamName}).then(function(e){if(0==e.status){t.listQuery.page=1,t.listLoading=!1,t.list=e.data,t.total=0,t.dealData()}else t.$message.error(e.msg)})},handleDelete:function(t){var e=this,i=this;i.listLoading=!0,c({id:t.id}).then(function(t){0==t.status?(i.listQuery.page>1&&i.list.length<=1&&(i.listQuery.page-=1),e.getList(),i.$message.success("刪除成功")):(e.$message.error(t.msg),i.listLoading=!1)}).catch(function(t){i.listLoading=!1,console.error(t)})},resetTemp:function(){this.temp={teamName:"",status:0,createTimeShow:null}},selectChange:function(t){1==t?this.bindTemp.leaderId=this.bindobj.leaderId:2==t&&(this.bindTemp.routeId=this.bindobj.geometryId)},handleBind:function(t){var e=this,i=this;Object(y["g"])({work:2,teamId:t.id,status:1}).then(function(a){if(0==a.status){if(null==a.data)return void(i.teamLeaderOptions=[{id:-1,name:"请选择"}]);i.teamLeaderOptions=a.data,i.teamLeaderOptions.unshift({id:-1,name:"请选择"})}else null==a.data&&(e.teamLeaderOptions=[]),e.$message.error(a.msg);e.bindTemp={teamId:t.id,leaderId:t.leaderId,type:1,routeId:t.geometryId}}),this.bindTypeOptions=[{id:-1,name:"请选择"},{id:1,name:"队长"},{id:2,name:"路线"}],this.bindDialogStatus="bind",this.BindDialogFormVisible=!0},handleUnbind:function(t){-1==t.leaderId&&(this.bindTypeOptions[1].disabled=!0),-1==t.geometryId&&(this.bindTypeOptions[2].disabled=!0),this.bindDialogStatus="unbind",this.bindTemp={teamId:t.id,type:-1},this.BindDialogFormVisible=!0},bindSubmit:function(){var t=this;this.$refs["bindForm"].validate(function(e){var i;e&&(v=t.$loading({target:"#myDialog .el-dialog"}),1==t.bindTemp.type?(i={teamId:t.bindTemp.teamId,leaderId:t.bindTemp.leaderId},p(i).then(function(e){0==e.status?(t.getList(),t.$message.success(e.msg),t.BindDialogFormVisible=!1):t.$message.error(e.msg)}).finally(function(){v.close()})):2==t.bindTemp.type&&(i={routeId:t.bindTemp.routeId,teamId:t.bindTemp.teamId},g(i).then(function(e){0==e.status?(t.getList(),t.$message.success(e.msg),t.BindDialogFormVisible=!1):t.$message.error(e.msg)}).finally(function(){v.close()})))})},unbindSubmit:function(){var t=this;this.$refs["bindForm"].validate(function(e){var i;e&&(v=t.$loading({target:"#myDialog .el-dialog"}),1==t.bindTemp.type?(i={teamId:t.bindTemp.teamId},f(i).then(function(e){0==e.status?(t.getList(),t.$message.success(e.msg),t.BindDialogFormVisible=!1):t.$message.error(e.msg)}).finally(function(){v.close()})):2==t.bindTemp.type&&(i={teamId:t.bindTemp.teamId},b(i).then(function(e){0==e.status?(t.getList(),t.$message.success(e.msg),t.BindDialogFormVisible=!1):t.$message.error(e.msg)}).finally(function(){v.close()})))})},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},createData:function(){var t=this;this.$refs["dataForm"].validate(function(e){if(!e)return!1;v=t.$loading({target:"#myDialog .el-dialog"}),t.temp.createTimeShow&&(t.temp.createTime=new Date(t.temp.createTimeShow).getTime());var i=Object(s["a"])({},t.temp);delete i.createTimeShow,d(i).then(function(e){0==e.status?(t.getList(),t.$message.success("添加成功"),t.dialogFormVisible=!1):t.$message.error(e.msg)}).finally(function(){v.close()})})},handleUpdate:function(t){var e=this;this.temp={id:t.id,status:t.status,createTimeShow:t.createTimeShow},this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},updateData:function(){var t=this;this.$refs["dataForm"].validate(function(e){if(!e)return!1;v=t.$loading({target:"#myDialog .el-dialog"}),t.temp.createTimeShow&&(t.temp.createTime=new Date(t.temp.createTimeShow).getTime());var i=Object(s["a"])({},t.temp);delete i.createTimeShow,u(i).then(function(e){0==e.status?(t.getList(),t.$message.success("编辑成功"),t.dialogFormVisible=!1):t.$message.error(e.msg)}).finally(function(){v.close()})})},selectFilter:function(t,e,i,a,n,s){var r={};r=e.find(function(e){return e[i]===t}),this.temp[s]=r[a]},formatDateTime:function(t){return Object(h["d"])(t,1)},formatStatus:function(t){return 0==t?"存在":1==t?"取消":void 0},changToNull:function(t){return null==t.leaderId&&(t.leaderName=null),null==t.geometryId&&(t.geometryName=null),t},tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2==0?"color-row":e%2==1?"noColor-row":""},exportExcel:function(){var t=this;Object(y["b"])({excelType:7,title:"大队信息"}).then(function(e){try{var i=new TextDecoder("utf-8"),a=JSON.parse(i.decode(new Uint8Array(e)));t.$message({message:a.msg,type:"warning"})}catch(o){e.headers;var n="大队信息.xls",s=new Blob([e],{type:"application/excel"}),r=document.createElement("a");r.href=window.URL.createObjectURL(s),r.download=n,r.click(),r.remove()}})}}},O=w,x=(i("7c07"),i("2877")),I=Object(x["a"])(O,a,n,!1,null,null,null);e["default"]=I.exports}}]);
//# sourceMappingURL=brigadeManagement.c45c8252.js.map