(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["alarmSettings"],{"230f":function(e,t,a){"use strict";var n=a("9a5f"),r=a.n(n);r.a},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[];a("c5f6");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function s(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,a){var n=o(),r=e-n,l=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=l;var o=Math.easeInOutQuad(u,n,r,t);s(o),u<t?i(e):a&&"function"===typeof a&&a()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.currentPage=1,this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},c=u,d=(a("abce"),a("2877")),m=Object(d["a"])(c,n,r,!1,null,"2d3d4633",null);t["a"]=m.exports},"43b9":function(e,t,a){"use strict";var n=a("c79e"),r=a.n(n);r.a},5405:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",attrs:{id:"systemSettings"}},[a("div",{staticClass:"parkForm"},[a("el-form",{ref:"parkForm",attrs:{inline:!0,rules:e.parkRules,model:e.parkForm,"label-width":"250px"}},[a("el-form-item",{attrs:{label:"停车报警阈值(分钟)",prop:"parkTime"}},[a("el-input",{attrs:{min:"0",type:"number"},model:{value:e.parkForm.parkTime,callback:function(t){e.$set(e.parkForm,"parkTime",e._n(t))},expression:"parkForm.parkTime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitParkTime}},[e._v("设置")])],1)],1)],1),a("el-form",{ref:"speedForm",attrs:{inline:!0,rules:e.speedRules,model:e.speedForm,"label-width":"250px"}},[a("el-form-item",{attrs:{label:"超速报警阈值设置",prop:"speed"}},[a("el-input",{attrs:{min:"0",type:"number"},model:{value:e.speedForm.speed,callback:function(t){e.$set(e.speedForm,"speed",e._n(t))},expression:"speedForm.speed"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitSpeed}},[e._v("设置")])],1)],1),1==e.power?a("el-form",{ref:"form",staticClass:"positon",attrs:{model:e.form,"label-width":"250px"}},[a("el-form-item",{attrs:{label:"枪支定位算法"}},[a("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},on:{change:e.changeGunOptimize},model:{value:e.form.enabled,callback:function(t){e.$set(e.form,"enabled",t)},expression:"form.enabled"}})],1)],1):e._e(),1==e.power?a("el-form",{ref:"ruleForm",staticClass:"sendForm",attrs:{model:e.sendForm,"label-width":"100px"}},[a("el-form-item",{attrs:{required:"",label:"向所有设备发送命令：","label-width":"250px"}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{prop:"timeAll"}},[a("el-input",{attrs:{min:"1",max:"255",type:"number",placeholder:"请填写时间"},model:{value:e.sendForm.timeAll,callback:function(t){e.$set(e.sendForm,"timeAll",e._n(t))},expression:"sendForm.timeAll"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.sendAllClick}},[e._v("下发")])],1)],1)],1),a("el-form-item",{attrs:{required:"",label:"向指定设备发送命令(枪支设备)：","label-width":"250px"}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{prop:"timeOne"}},[a("el-input",{attrs:{min:"1",max:"255",placeholder:"请填写时间",type:"number"},model:{value:e.sendForm.timeOne,callback:function(t){e.$set(e.sendForm,"timeOne",e._n(t))},expression:"sendForm.timeOne"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{prop:"imei"}},[a("el-input",{attrs:{placeholder:"请填写设备号"},model:{value:e.sendForm.imei,callback:function(t){e.$set(e.sendForm,"imei",t)},expression:"sendForm.imei"}})],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.sendOneClick}},[e._v("下发")])],1)],1)],1)],1):e._e(),a("el-form",{ref:"form",attrs:{inline:!0,model:e.gunAlarmForm,"label-width":"250px"}},[a("el-form-item",{attrs:{label:"枪支归还时间"}},[a("el-time-picker",{attrs:{placeholder:"枪支归还时间",clearable:!1,"value-format":"HH:mm:ss"},model:{value:e.gunAlarmForm.returnTime,callback:function(t){e.$set(e.gunAlarmForm,"returnTime",t)},expression:"gunAlarmForm.returnTime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.returnTimeSubmit}},[e._v("设置时间")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.beCancelSubmit}},[e._v("取消枪支归还时间")])],1)],1)],1)},r=[],i=a("333d"),s=a("b210"),o=function(e,t,a){""==t||void 0==t?a(new Error("请填写超速阈值")):/(^[1-9]\d*$)/.test(t)?a():a(new Error("请填写正整数"))},l={name:"systemSettings",components:{Pagination:i["a"]},data:function(){return{form:{enabled:null},sendForm:{timeAll:void 0,timeOne:void 0,imei:void 0},deviceNum:20,numForm:{},numOptions:[],parkRules:{parkTime:[{required:!0,message:"请填写停车报警阈值",trigger:"blur"}]},power:JSON.parse(this.$store.state.user.userInfo).Power,parkForm:{parkTime:null},speedForm:{speed:void 0},speedRules:{speed:[{required:!0,message:"请填写超速报警阈值",trigger:"blur",validator:o}]},gunAlarmForm:{beCancel:!1,returnTime:""}}},created:function(){var e=this;1==this.power&&(this.formatNumOptions(),Object(s["b"])().then(function(t){0==t.status&&(e.form.enabled=t.data.gunOptimize)}),Object(s["a"])().then(function(t){0==t.status&&(e.deviceNum=t.data.limit)})),this.getPark(),this.getSpeed()},methods:{returnTimeSubmit:function(){var e=this;this.gunAlarmForm.returnTime?Object(s["k"])({beCancel:!0,returnTime:this.gunAlarmForm.returnTime}).then(function(t){0==t.status&&e.$message.success(t.msg)}):this.$message.warning("请选择枪支归还时间")},beCancelSubmit:function(){var e=this;Object(s["k"])({beCancel:!1}).then(function(t){0==t.status&&e.$message.success(t.msg)})},getPark:function(){var e=this;Object(s["e"])().then(function(t){0==t.status&&(e.parkForm.parkTime=t.data/60)})},getSpeed:function(){var e=this;Object(s["c"])().then(function(t){0==t.status&&(e.speedForm.speed=t.data)})},submitParkTime:function(){var e=this;this.$refs["parkForm"].validate(function(t){t&&Object(s["j"])({time:60*e.parkForm.parkTime}).then(function(t){0==t.status&&(e.$message.success(t.msg),e.getSpeed())})})},submitSpeed:function(){var e=this;this.$refs["speedForm"].validate(function(t){t&&Object(s["i"])({speed:e.speedForm.speed}).then(function(t){0==t.status&&(e.getList(),e.$message.success(t.msg))})})},changeGunOptimize:function(){var e=this,t=this.form.enabled;Object(s["d"])({enabled:t}).then(function(t){0==t.status&&e.$message.success(t.msg)})},sendAllClick:function(){var e=this,t=this.sendForm.timeAll;t||this.$message.warning("请输入时间"),Object(s["f"])({time:t}).then(function(t){0==t.status&&e.$message.success(t.msg)})},sendOneClick:function(){var e=this,t=this.sendForm.timeOne,a=this.sendForm.imei;t&&a||this.$message.warning("请输入信息"),Object(s["g"])({time:t,imei:a}).then(function(t){0==t.status&&e.$message.success(t.msg)})},formatNumOptions:function(){for(var e=5;e<101;e++)this.numOptions.push({value:e,label:e})},submitDeviceNum:function(){var e=this;Object(s["h"])({limit:this.deviceNum}).then(function(t){0==t.status&&e.$message.success(t.msg)})}}},u=l,c=(a("43b9"),a("2877")),d=Object(c["a"])(u,n,r,!1,null,null,null);t["default"]=d.exports},6908:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",attrs:{id:"alarmScreenSettings"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.mdLoad,expression:"mdLoad"}],staticClass:"multidevice filter-container"},[a("div",{staticClass:"selectBox"},[a("el-form",{ref:"mdForm",staticClass:"mdElForm",attrs:{inline:!0,rules:e.mdRule,model:e.mdForm,"label-width":"80px"}},[1==e.power?a("el-form-item",{staticClass:"pauseSelect"},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择屏蔽类型"},on:{change:e.pauseTypeChange},model:{value:e.pauseType,callback:function(t){e.pauseType=t},expression:"pauseType"}},e._l(e.pauseTypeList,function(e){return a("el-option",{key:e.type,attrs:{label:e.option,value:e.type}})}),1)],1):e._e(),a("div",{staticClass:"telSearch"},[1==e.pauseType?a("div",{staticClass:"radioBtn",class:{hasColor:"1"==e.telChoose},on:{click:function(t){e.telChoose="1"}}},[e._v("车辆")]):e._e(),1==e.pauseType?a("div",{staticClass:"radioBtn",class:{hasColor:"2"==e.telChoose},on:{click:function(t){e.telChoose="2"}}},[e._v("枪支")]):e._e()]),2==e.pauseType?a("el-form-item",{staticClass:"pauseSelect"},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"暂停或取消暂停"},on:{change:e.pauseTypeChange},model:{value:e.pauseVal,callback:function(t){e.pauseVal=t},expression:"pauseVal"}},e._l(e.pauseValList,function(e){return a("el-option",{key:e.type,attrs:{label:e.option,value:e.type}})}),1)],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.telChoose&&1==e.pauseType,expression:"telChoose=='1'&&pauseType==1"}],attrs:{prop:"imeiCar"}},[a("el-cascader",{attrs:{placeholder:"选择车辆",props:e.propsCar,options:e.dataCar,"show-all-levels":!1,clearable:"",filterable:"","collapse-tags":""},on:{change:function(t){return e.removeValid()}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return[a("span",[e._v(e._s(r.label))]),n.isLeaf?e._e():a("span",[e._v("("+e._s(r.children.length)+")")]),n.isLeaf&&1==r.disabled1?a("span",[e._v("("+e._s(r.time?r.time+"分钟":"小于1分钟")+")")]):e._e()]}}]),model:{value:e.mdForm.imeiCar,callback:function(t){e.$set(e.mdForm,"imeiCar",t)},expression:"mdForm.imeiCar"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!("1"==e.telChoose&&1==e.pauseType),expression:"!(telChoose=='1'&&pauseType==1)"}],attrs:{prop:"imeiGun"}},[a("el-cascader",{ref:"myMdGunsCas",attrs:{"popper-class":"myGunCas",placeholder:"选择枪支",props:{expandTrigger:"hover",emitPath:!1,multiple:!0},options:e.dataGun,"show-all-levels":!1,clearable:"",filterable:""},on:{change:function(t){return e.removeValid()}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return[a("span",[e._v(e._s(r.label))]),n.isLeaf?e._e():a("span",[e._v("("+e._s(r.children.length)+")")]),n.isLeaf&&1==r.disabled1&&1==e.pauseType?a("span",[e._v("("+e._s(r.time?r.time+"分钟":"小于1分钟")+")")]):e._e(),n.isLeaf&&1==r.disabled1&&2==e.pauseType?a("span",[e._v("(暂停中)")]):e._e()]}}]),model:{value:e.mdForm.imeiGun,callback:function(t){e.$set(e.mdForm,"imeiGun",t)},expression:"mdForm.imeiGun"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"iconfont iconshezhi"},on:{click:e.pauseAlarm}},[e._v("设置")])],1)],1)],1)]),a("div",{staticClass:"tableBox"},[a("el-table",{key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.pauseData.slice((e.currpage-1)*e.pagesize,e.currpage*e.pagesize),border:"",fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",fixed:"",prop:"id",sortable:"custom",align:"center",width:"80",type:"index"}}),a("el-table-column",{attrs:{label:"车牌号或枪号",width:"400px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.$store.state.realTimeMonitor.carAndGunObj[n.imei]?e.$store.state.realTimeMonitor.carAndGunObj[n.imei].code:""))])]}}])}),a("el-table-column",{attrs:{label:"设备号",width:"400px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.imei))])]}}])}),1==e.pauseType?a("el-table-column",{attrs:{label:"剩余暂停报警时间(分钟)",align:"center","min-width":"300",fixed:"right","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(0==n.time?"小于1分钟":n.time))])]}}],null,!1,2779447708)}):e._e(),2==e.pauseType?a("el-table-column",{attrs:{label:"状态",align:"center","min-width":"300",fixed:"right","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){t.row;return[a("span",[e._v("暂停")])]}}],null,!1,1072737171)}):e._e()],1)],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes, total, jumper","page-sizes":[5,10,15,20],"page-size":e.pagesize,total:e.pauseData.length,"current-page":e.currpage},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),a("el-dialog",{staticClass:"pauseForm",attrs:{id:"myDialog",title:"暂停报警",visible:e.dialogVisibleOfPause,center:""},on:{"update:visible":function(t){e.dialogVisibleOfPause=t}}},[a("el-form",{ref:"pauseForm",attrs:{rules:e.rules2,model:e.pausetemp,"label-position":"left"}},[a("el-form-item",{attrs:{label:"暂停时间",prop:"time"}},[a("el-input",{attrs:{placeholder:"单位（分钟）",type:"number"},model:{value:e.pausetemp.time,callback:function(t){e.$set(e.pausetemp,"time",e._n(t))},expression:"pausetemp.time"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.pausedSubmit()}}},[e._v("确定")])],1)],1)],1)},r=[],i=(a("7f7f"),a("ac6a"),a("f3e2"),a("ad19")),s=a("2ade");function o(e){return Object(s["a"])({url:"/params/queryPause",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/broken/getPause",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/broken/setPause",method:"post",data:e})}function c(e){return Object(s["a"])({url:"/broken/cancelPause",method:"post",data:e})}var d=a("c31b"),m={name:"alarmScreenSettings",data:function(){var e=this,t=function(t,a,n){var r=e.mdForm.imeiCar,i=e.mdForm.imeiGun;r.length<1&&i.length<1?n(new Error("请选择设备")):n()};return{tableKey:1,telChoose:"1",power:2,mdLoad:!1,mdForm:{imeiCar:[],imeiGun:[]},mdRule:{imeiCar:[{validator:t,trigger:"change"}],imeiGun:[{validator:t,trigger:"change"}]},propsCar:{expandTrigger:"hover",multiple:!0},propsGun:{expandTrigger:"hover",multiple:!0},dataCar:[],dataGun:[],imei2name:{},pausedDevice:{},dialogVisibleOfPause:!1,pausetemp:{time:null},pauseData:[],rules2:{time:[{required:!0,message:"请填写暂停时间",trigger:"blur"},{message:"暂停时间需大于0",trigger:"blur",validator:function(e,t,a){t<=0?a(new Error("时间需大于0")):a()}}]},currpage:1,pagesize:10,pauseType:1,pauseTypeList:[{type:1,option:"报警屏蔽"},{type:2,option:"拆卸报警暂停"}],pauseVal:1,pauseValList:[{type:1,option:"暂停拆卸报警"},{type:2,option:"取消暂停拆卸报警"}]}},created:function(){this.getPausedDevice(),this.power=JSON.parse(this.$store.state.user.userInfo).Power},methods:{getList:function(){},removeValid:function(){this.$refs.mdForm.clearValidate(["imeiCar","imeiGun"])},getTeamAndCarList:function(){var e=this,t=this;Object(i["f"])({}).then(function(a){0==a.status?t.dataCar=e.formatCas(a.data,"serialNo","licenseNo"):e.$message.error(a.msg)})},getTeamAndGunList:function(){var e=this,t=this;Object(i["h"])({}).then(function(a){0==a.status?t.dataGun=e.formatCas(a.data,"iMei","code"):e.$message.error(a.msg)})},formatCas:function(e,t,a){var n=this,r=[],i=0,s=this,o=function(o){var l=[];return"报废车辆"==o?"continue":"报废枪支"==o?"continue":(e[o].forEach(function(e){if(""!==e[t]){var r=!1,i=0;n.pausedDevice.hasOwnProperty(e[t])&&(r=!0,i=n.pausedDevice[e[t]]);var o=r;1==n.pauseType?o=!1:2==n.pauseVal&&(o=!r),l.push({value:e[t],label:e[a],disabled1:r,disabled:o,time:i}),s.imei2name[e[t]]=e[a]}}),void r.push({value:"i".concat(i++),label:""==o?"未分组":o,children:l}))};for(var l in e)o(l);return r},getPausedDevice:function(){var e=this;1==this.pauseType?o({}).then(function(t){if(0==t.status){e.pausedDevice={},e.pauseData=t.data;for(var a=0;a<t.data.length;a++)e.pausedDevice[t.data[a].imei]=t.data[a].time;e.getTeamAndCarList(),e.getTeamAndGunList()}else e.$message.error(t.msg)}):l({}).then(function(t){if(0==t.status){e.pausedDevice={},e.pauseData=[];for(var a=0;a<t.data.length;a++)e.pausedDevice[t.data[a]]=null,e.pauseData.push({imei:t.data[a]});e.getTeamAndGunList()}else e.$message.error(t.msg)})},pauseAlarm:function(){var e=this,t=this;t.$refs["mdForm"].validate(function(t){if(t){if(2==e.pauseType)return void(1==e.pauseVal?e.pauseBroken():e.cancleBroken());e.pausetemp.time=null,e.dialogVisibleOfPause=!0,e.$nextTick(function(){e.$refs["pauseForm"].clearValidate()})}})},changeValue:function(){this.mdForm.imeiCar=[],this.mdForm.imeiGun=[]},pauseBroken:function(){for(var e=this,t=this.mdForm.imeiGun,a=[],n=0;n<t.length;n++)a.push(t[n][1]);u({imeis:a}).then(function(t){if(0==t.status){if(0==t.success)return void e.$message.error(t.msg);e.changeValue(),e.getPausedDevice(),e.$message.success("设置成功"),e.dialogVisibleOfPause=!1,e.$nextTick(function(){e.$refs["mdForm"].clearValidate()})}else e.$message.error(t.msg)}).finally(function(){})},cancleBroken:function(){for(var e=this,t=this.mdForm.imeiGun,a=[],n=0;n<t.length;n++)a.push(t[n][1]);c({imeis:a}).then(function(t){if(0==t.status){if(0==t.success)return void e.$message.error(t.msg);e.changeValue(),e.getPausedDevice(),e.$message.success("设置成功"),e.dialogVisibleOfPause=!1,e.$nextTick(function(){e.$refs["mdForm"].clearValidate()})}else e.$message.error(t.msg)}).finally(function(){})},pausedSubmit:function(){var e=this;this.$refs["pauseForm"].validate(function(t){if(!t)return!1;for(var a=e.mdForm.imeiCar.concat(e.mdForm.imeiGun),n=[],r=0;r<a.length;r++)n.push({imei:a[r][1],time:e.pausetemp.time});Object(d["p"])(JSON.stringify(n)).then(function(t){0==t.status?(e.changeValue(),e.getPausedDevice(),e.$message.success("设置成功"),e.dialogVisibleOfPause=!1,e.$nextTick(function(){e.$refs["mdForm"].clearValidate()})):e.$message.error(t.msg)}).finally(function(){})})},handleCurrentChange:function(e){this.currpage=e},handleSizeChange:function(e){this.pagesize=e},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2==0?"color-row":t%2==1?"noColor-row":""},pauseTypeChange:function(e){this.getPausedDevice()}}},p=m,f=(a("74b7"),a("2877")),h=Object(f["a"])(p,n,r,!1,null,null,null);t["default"]=h.exports},"74b7":function(e,t,a){"use strict";var n=a("b757"),r=a.n(n);r.a},8765:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",attrs:{id:"alarmSettings"}},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.handleCreate}},[e._v("添加")])],1),a("div",{staticClass:"tableBox"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list.slice((e.currpage-1)*e.pagesize,e.currpage*e.pagesize),fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"序号",prop:"id",sortable:"custom",align:"center",width:"80",type:"index",index:e.indexMethod}}),a("el-table-column",{attrs:{label:"ID",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.id))])]}}])}),a("el-table-column",{attrs:{label:"名称","min-width":"250px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"协议号",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.protoNo))])]}}])}),a("el-table-column",{attrs:{label:"状态",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{staticClass:"enableSwitch",attrs:{"active-color":"#3C7EFE","inactive-color":"#FF3F3F","active-value":1,"inactive-value":0},on:{change:function(a){return e.enableChange(t.row)}},model:{value:t.row.enable,callback:function(a){e.$set(t.row,"enable",a)},expression:"scope.row.enable"}})]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"230",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit-outline"},on:{click:function(t){return e.handleUpdate(n)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(n)}}},[e._v("删除")])]}}])})],1)],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes, total, jumper","page-sizes":[5,10,15,20],"page-size":e.pagesize,total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticClass:"formStyle",attrs:{rules:e.rules,model:e.temp,"label-position":"left"}},[a("el-form-item",{attrs:{label:"协议号",prop:"protoNo"}},[a("el-input",{model:{value:e.temp.protoNo,callback:function(t){e.$set(e.temp,"protoNo",e._n(t))},expression:"temp.protoNo "}})],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name "}})],1),"update"===e.dialogStatus&&6==e.temp.id?a("el-form-item",{attrs:{label:"超速设置"}},[a("el-input",{attrs:{min:"0",type:"number"},model:{value:e.temp.speed,callback:function(t){e.$set(e.temp,"speed",e._n(t))},expression:"temp.speed"}})],1):e._e(),"create"===e.dialogStatus?a("el-form-item",{attrs:{label:"状态",prop:"enable"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:e.temp.enable,callback:function(t){e.$set(e.temp,"enable",e._n(t))},expression:"temp.enable"}},e._l(e.enableOptions,function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}),1)],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("确定")])],1)],1)],1)},r=[],i=(a("7f7f"),a("333d")),s=a("2ade");function o(e){return Object(s["a"])({url:"/proto/list",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/proto/handler",method:"post",data:e,headers:{"content-type":"application/json"}})}function u(e){return Object(s["a"])({url:"/proto/del",method:"post",data:e})}var c=a("b210"),d={name:"alarmSettings",components:{Pagination:i["a"]},data:function(){return{tableKey:0,list:[],total:0,listLoading:!0,pagesize:10,currpage:1,indexMethod:1,enableOptions:[{key:1,display_name:"推送"},{key:0,display_name:"禁止推送"}],temp:{id:null,name:null,protoNo:null,enable:null,speed:50},speed1:null,dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"添加"},rules:{name:[{required:!0,message:"请填写报警名称",trigger:"blur"}],protoNo:[{required:!0,message:"请填写协议号",trigger:"blur"}],enable:[{required:!0,message:"请选择推送状态",trigger:"change"}],speed:[{required:!0,message:"请填写超速值",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this,t=this;o({}).then(function(a){200==a.code?(e.total=a.data.length,t.listLoading=!1,t.list=a.data):e.$message.error(a.msg)}),Object(c["c"])().then(function(e){0==e.status&&(t.speed1=e.data)})},handleDelete:function(e){var t=this;u({id:e.id}).then(function(e){200==e.code?(t.getList(),t.$message({message:e.msg,type:"success"})):t.$message.error(e.msg)})},resetTemp:function(){this.temp={id:null,name:null,protoNo:null,enable:null}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()}),this.temp.speed=this.speed1},createData:function(){var e=this;this.$refs["dataForm"].validate(function(t){if(!t)return!1;l({name:e.temp.name,protoNo:e.temp.protoNo,enable:e.temp.enable}).then(function(t){200==t.code?(e.getList(),e.dialogFormVisible=!1,e.$message({message:t.msg,type:"success"})):e.$message.error(t.msg)})})},handleUpdate:function(e){var t=this;e.speed=this.speed1,this.temp=Object.assign({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},updateData:function(){var e=this;this.$refs["dataForm"].validate(function(t){if(!t)return!1;var a=e.temp.speed;l(e.temp).then(function(t){200==t.code?(e.getList(),e.dialogFormVisible=!1,e.$message({message:t.msg,type:"success"})):e.$message.error(t.msg)}),"number"==typeof a&&6==e.temp.id?Object(c["i"])({speed:a}).then(function(t){0==t.status&&(e.getList(),e.$message.success(t.msg))}):e.$message.warning("超速值请输入数字")})},enableChange:function(e){var t=this;this.temp=Object.assign({},e),l(this.temp).then(function(e){200==e.code?t.$message({message:e.msg,type:"success"}):t.$message.error(e.msg)})},formateEnale:function(e){return 1==e?"推送":"禁止推送"},handleCurrentChange:function(e){this.currpage=e,this.indexMethod=(this.currpage-1)*this.pagesize+1},handleSizeChange:function(e){this.pagesize=e,this.indexMethod=(this.currpage-1)*this.pagesize+1},handleSelectionChange:function(e){},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2==0?"color-row":t%2==1?"noColor-row":""}}},m=d,p=(a("230f"),a("2877")),f=Object(p["a"])(m,n,r,!1,null,null,null);t["default"]=f.exports},"9a5f":function(e,t,a){},abce:function(e,t,a){"use strict";var n=a("e052"),r=a.n(n);r.a},ad19:function(e,t,a){"use strict";a.d(t,"g",function(){return r}),a.d(t,"f",function(){return i}),a.d(t,"h",function(){return s}),a.d(t,"d",function(){return o}),a.d(t,"c",function(){return l}),a.d(t,"e",function(){return u}),a.d(t,"j",function(){return c}),a.d(t,"a",function(){return d}),a.d(t,"b",function(){return m}),a.d(t,"i",function(){return p});var n=a("2ade");function r(e){return Object(n["a"])({url:"/cars/allList",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/cars/allBindList",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/guns/allList",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/logs/delays",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/map/lastgps",method:"post",data:e,headers:{"content-type":"application/json"}})}function u(e){return Object(n["a"])({url:"/terminal/send",method:"post",data:e,headers:{"content-type":"application/json"}})}function c(e){return Object(n["a"])({url:"/proxy/StandardApiAction_vehicleControlOthers",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/eoms/relations/queryByCars",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/eoms/relations/queryByGuns",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/noapp/thirdparty/gaode/regeo",method:"post",data:e})}},b210:function(e,t,a){"use strict";a.d(t,"i",function(){return r}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return s}),a.d(t,"b",function(){return o}),a.d(t,"f",function(){return l}),a.d(t,"g",function(){return u}),a.d(t,"a",function(){return c}),a.d(t,"h",function(){return d}),a.d(t,"j",function(){return m}),a.d(t,"e",function(){return p}),a.d(t,"k",function(){return f});var n=a("2ade");function r(e){return Object(n["a"])({url:"/cars/limitSpeed",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/cars/getlimitSpeed",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/params/gunOptimize",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/params/values",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/cmd/sendAll",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/cmd/sendOne",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/params/getDisplayLimit",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/params/setDisplayLimit",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/params/setOffline",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/params/queryOffline",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/guns/updateAllReturnTime",method:"post",data:e})}},b757:function(e,t,a){},c31b:function(e,t,a){"use strict";a.d(t,"l",function(){return r}),a.d(t,"d",function(){return i}),a.d(t,"k",function(){return s}),a.d(t,"n",function(){return o}),a.d(t,"h",function(){return l}),a.d(t,"a",function(){return u}),a.d(t,"p",function(){return c}),a.d(t,"o",function(){return d}),a.d(t,"b",function(){return m}),a.d(t,"q",function(){return p}),a.d(t,"c",function(){return f}),a.d(t,"r",function(){return h}),a.d(t,"j",function(){return g}),a.d(t,"f",function(){return b}),a.d(t,"e",function(){return v}),a.d(t,"i",function(){return y}),a.d(t,"g",function(){return k}),a.d(t,"m",function(){return O});var n=a("2ade");function r(e){return Object(n["a"])({url:"/cars/list",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/cars/add",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/cars/delete",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/cars/update",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/cars/query",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/cars/addBatch",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/params/setPause",method:"post",data:e,headers:{"content-type":"application/json"}})}function d(e){return Object(n["a"])({url:"/cars/scrap",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/cars/bindDriver",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/cars/unbindDriver",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/cars/bindTeam",method:"post",data:e})}function h(e){return Object(n["a"])({url:"/cars/unbindTeam",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/cars/unbindScanDevice",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/cars/bindScanDevice",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/cars/bindRfid",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/cars/unbindRfid",method:"post",data:e})}function k(e,t){return Object(n["a"])({url:"/cars/detail",method:"post",data:e,cancelToken:t})}function O(e){return Object(n["a"])({url:"/cars/bindPhoto",method:"post",data:e})}},c79e:function(e,t,a){},e052:function(e,t,a){}}]);
//# sourceMappingURL=alarmSettings.ae7dae6f.js.map