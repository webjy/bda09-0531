(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["gunFiles"],{"061d":function(e,t,i){},"333d":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[i("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},a=[];i("c5f6");Math.easeInOutQuad=function(e,t,i,n){return e/=n/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,i){var n=l(),a=e-n,r=20,u=0;t="undefined"===typeof t?500:t;var d=function e(){u+=r;var l=Math.easeInOutQuad(u,n,a,t);o(l),u<t?s(e):i&&"function"===typeof i&&i()};d()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.currentPage=1,this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&r(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&r(0,800)}}},d=u,c=(i("abce"),i("2877")),p=Object(c["a"])(d,n,a,!1,null,"2d3d4633",null);t["a"]=p.exports},"3ac7":function(e,t,i){"use strict";var n=i("061d"),a=i.n(n);a.a},4807:function(e,t,i){"use strict";i.d(t,"b",function(){return a}),i.d(t,"c",function(){return s}),i.d(t,"e",function(){return o}),i.d(t,"a",function(){return l}),i.d(t,"d",function(){return r});var n=i("2ade");function a(e,t){return Object(n["a"])({url:"/eoms/rfidInfos/query",method:"post",data:e,headers:{"content-type":"application/json"},cancelToken:t})}function s(e){return Object(n["a"])({url:"/eoms/rfidInfos/page",method:"post",data:e,headers:{"content-type":"application/json"}})}function o(e){return Object(n["a"])({url:"/eoms/rfidInfos/update",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/noapp/scanner/rfid/metaData",method:"post",data:e,headers:{"content-type":"application/json"}})}function r(e){return Object(n["a"])({url:"/noapp/scanner/rfid/reg",method:"post",data:e,headers:{"content-type":"application/json"}})}},"66e8":function(e,t,i){"use strict";i.d(t,"j",function(){return a}),i.d(t,"g",function(){return s}),i.d(t,"i",function(){return o}),i.d(t,"a",function(){return l}),i.d(t,"f",function(){return r}),i.d(t,"e",function(){return u}),i.d(t,"b",function(){return d}),i.d(t,"k",function(){return c}),i.d(t,"c",function(){return p}),i.d(t,"h",function(){return m}),i.d(t,"d",function(){return f});var n=i("2ade");function a(e){return Object(n["a"])({url:"teams/select",method:"post",data:e})}function s(e){return Object(n["a"])({url:"persons/select",method:"post",data:e})}function o(e){return Object(n["a"])({url:"persons/selectByCondition",method:"post",data:e,headers:{"content-type":"application/json"}})}function l(e){return Object(n["a"])({url:"cars/select",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/map/routeByStatus",method:"post",data:e})}function u(e){return Object(n["a"])({url:"logs/invoke",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/file/exportExcel",method:"post",data:e,responseType:"arraybuffer",headers:{"content-type":"application/json"}})}function c(e){return Object(n["a"])({url:"/noapp/file/xxx/upload",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/file/importExcel",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/eoms/schedulings/queryTaskByIds",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/file/importFile",method:"post",data:e})}},"98c6":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:"导入",visible:e.openUploadDialog},on:{"update:visible":function(t){e.openUploadDialog=t}}},[i("el-upload",{ref:"upload",attrs:{drag:"",limit:e.limitNum,"auto-upload":!1,accept:".xlsx,.xls","on-remove":e.handleRemove,action:e.UploadUrl(),"before-upload":e.beforeUploadFile,"on-change":e.fileChange,"on-exceed":e.exceedFile,"on-success":e.handleSuccess,"on-error":e.handleError,"file-list":e.fileList}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xlsx或xls文件,且文件大小不得超过10M")]),i("div",{staticClass:"el-upload__tip red",attrs:{slot:"tip"},slot:"tip"},[e._v("请在“帮助”界面的“文件下载”清单中下载标准模板，并使用标准模板填写信息后再上传")])]),i("br"),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.uploadFile}},[e._v("上传")]),i("el-button",{attrs:{size:"small"},on:{click:function(t){e.openUploadDialog=!1}}},[e._v("取消")])],1)],1)],1)},a=[],s=(i("9865"),i("7f7f"),i("c5f6"),i("66e8")),o={props:{visible:{type:Boolean,default:!1},limitNum:{type:Number,default:1},uploadData:{type:Object,required:!0},dataUpdated:{type:Boolean,default:!1}},data:function(){return{fileList:[]}},computed:{openUploadDialog:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e),this.$refs.upload.clearFiles(),this.fileList=[]}}},methods:{handleRemove:function(e,t){e&&"success"===e.status&&(this.fileList=[])},exceedFile:function(e,t){this.$message.warning("只能选择 ".concat(this.limitNum," 个文件，当前共选择了 ").concat(e.length+t.length," 个"))},fileChange:function(e,t){console.log(e.raw),this.fileList=[e.raw],console.log(this.fileList)},beforeUploadFile:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),i=e.size/1024/1024;return"xlsx"!==t&&"xls"!==t&&"XLSX"!==t&&"XLS"!==t?(this.$message.warning("只能上传后缀是.xlsx或者.xls的文件"),!1):i>10?(this.$message.warning("文件大小不得超过10M"),!1):void 0},handleSuccess:function(e,t,i){this.$message.success("文件上传成功")},handleError:function(e,t,i){this.$message.error("文件上传失败")},UploadUrl:function(){return""},uploadFile:function(){var e=this;if(this.$emit("dataUpdated",!1),0===this.fileList.length)this.$message.warning("请选择文件");else{new FormData;Object(s["k"])({file:this.fileList[0]}).then(function(t){e.uploadData.fileName=t.data.filename,e.uploadData.path=t.data.path,Object(s["c"])(e.uploadData).then(function(t){e.$message.success(t.data),e.$emit("dataUpdated",!0),e.openUploadDialog=!1}).catch(function(){}).finally(function(){e.$refs.upload.clearFiles(),ths.fileList=[]})}).catch(function(){})}}}},l=o,r=(i("a408"),i("2877")),u=Object(r["a"])(l,n,a,!1,null,"7fc0d3e1",null);t["a"]=u.exports},"9a3e":function(e,t,i){"use strict";i.d(t,"k",function(){return a}),i.d(t,"e",function(){return s}),i.d(t,"n",function(){return o}),i.d(t,"i",function(){return l}),i.d(t,"l",function(){return r}),i.d(t,"f",function(){return u}),i.d(t,"p",function(){return d}),i.d(t,"o",function(){return c}),i.d(t,"a",function(){return p}),i.d(t,"q",function(){return m}),i.d(t,"h",function(){return f}),i.d(t,"d",function(){return g}),i.d(t,"b",function(){return b}),i.d(t,"r",function(){return h}),i.d(t,"c",function(){return y}),i.d(t,"s",function(){return v}),i.d(t,"g",function(){return O}),i.d(t,"m",function(){return T}),i.d(t,"j",function(){return j});var n=i("2ade");function a(e){return Object(n["a"])({url:"/guns/list",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/guns/add",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/guns/update",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/guns/scrap",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/guns/query",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/guns/addBatch",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/qus/list",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/qus/add",method:"post",data:e,headers:{"content-type":"application/json"}})}function p(e){return Object(n["a"])({url:"/qus/answer",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/qus/query",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/card/gunPage",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/card/carPage",method:"post",data:e})}function b(e){return Object(n["a"])({url:"/guns/bindPerson",method:"post",data:e})}function h(e){return Object(n["a"])({url:"/guns/unbindPerson",method:"post",data:e})}function y(e){return Object(n["a"])({url:"/guns/bindTeam",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/guns/unbindTeam",method:"post",data:e})}function O(e){return Object(n["a"])({url:"/guns/bindRfid",method:"post",data:e})}function T(e){return Object(n["a"])({url:"/guns/unbindRfid",method:"post",data:e})}function j(e,t){return Object(n["a"])({url:"/guns/detail",method:"post",data:e,cancelToken:t})}},a408:function(e,t,i){"use strict";var n=i("de8d"),a=i.n(n);a.a},a517:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container",attrs:{id:"gunFiles"}},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"设备号/枪号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.iMei,callback:function(t){e.$set(e.listQuery,"iMei",t)},expression:"listQuery.iMei"}}),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),1==e.power?i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.handleCreate}},[e._v("添加")]):e._e(),1==e.power?i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"iconfont iconpiliangtianjia"},on:{click:e.handleCreateAll}},[e._v("批量添加")]):e._e(),i("el-button",{staticClass:"filter-item filter-item-btn",attrs:{type:"primary",icon:"iconfont icondaochu",loading:e.exportLoading},on:{click:e.exportExcel}},[e._v("导出")]),i("el-button",{staticClass:"filter-item filter-item-btn",attrs:{type:"primary",icon:"iconfont icondaoru"},on:{click:function(t){e.uploadVisible=!0}}},[e._v("导入")])],1),i("div",{staticClass:"tableBox"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName}},[i("el-table-column",{attrs:{label:"序号",fixed:"",prop:"id",sortable:"custom",align:"center",type:"index",index:e.indexMethod}}),i("el-table-column",{attrs:{label:"枪号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[1==e.power?i("span",{staticClass:"link-type",on:{click:function(t){return e.handleUpdate(n)}}},[e._v(e._s(n.code))]):i("span",[e._v(e._s(n.code))])]}}])}),1==e.power?i("el-table-column",{attrs:{label:"设备号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[1==e.power?i("span",{staticClass:"link-type",on:{click:function(t){return e.handleUpdate(n)}}},[e._v(e._s(n.iMei))]):i("span",[e._v(e._s(n.iMei))])]}}],null,!1,92182069)}):e._e(),1==e.power?i("el-table-column",{attrs:{label:"标签",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[i("span",[e._v(e._s(n.rfid))])]}}],null,!1,2281745405)}):e._e(),i("el-table-column",{attrs:{label:"使用人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.securityName))])]}}])}),1==e.power?i("el-table-column",{attrs:{label:"枪支类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[i("span",[e._v(e._s(1==n.type?"普通枪":"机动枪"))])]}}],null,!1,1595404174)}):e._e(),i("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.formatStatus(t.row.status)))])]}}])}),i("el-table-column",{attrs:{label:"枪支归还时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.returnTime))])]}}])}),i("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"400","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[i("el-button",{attrs:{type:"primary",size:"mini",icon:"iconfont iconsuo",disabled:null!==n.rfid&&null!==n.securityId&&1==e.power||null!==n.securityId&&1!==e.power},on:{click:function(t){return e.handleBind(n)}}},[e._v("绑定")]),i("el-button",{attrs:{type:"warning",size:"mini",disabled:null==n.rfid&&null==n.securityId&&1==e.power||null==n.securityId&&1!==e.power,icon:"iconfont iconjiesuo5"},on:{click:function(t){return e.handleUnbind(n)}}},[e._v("解绑")]),i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit-outline"},on:{click:function(t){return e.handleUpdate(n)}}},[e._v("编辑")]),i("el-button",{attrs:{type:"danger",size:"mini",disabled:4==n.status,icon:"iconfont iconbaofei"},on:{click:function(t){return e.deleteConfirmOpen(n)}}},[e._v("报废")])]}}])})],1)],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit,layout:"prev, pager, next, sizes, total, jumper"},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),i("el-dialog",{attrs:{id:"myDialog",title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"dataForm",staticClass:"formStyle",attrs:{rules:e.rules,model:e.temp,"label-position":"left"}},["create"==e.dialogStatus?i("el-form-item",{attrs:{label:"设备号",prop:"imei"}},[i("el-input",{model:{value:e.temp.imei,callback:function(t){e.$set(e.temp,"imei",t)},expression:"temp.imei"}})],1):e._e(),i("el-form-item",{attrs:{label:"枪号",prop:"code"}},[i("el-input",{attrs:{readonly:1!==e.power},model:{value:e.temp.code,callback:function(t){e.$set(e.temp,"code",t)},expression:"temp.code"}})],1),"update"==e.dialogStatus&&1==e.power?i("el-form-item",{attrs:{label:"所属大队",prop:"gunId"}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:e.temp.gunId,callback:function(t){e.$set(e.temp,"gunId",t)},expression:"temp.gunId"}},e._l(e.largeTeamOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.teamName,value:e.id}})}),1)],1):e._e(),i("el-form-item",{attrs:{label:"使用状态",prop:"status"}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.temp.status,callback:function(t){e.$set(e.temp,"status",t)},expression:"temp.status"}},e._l(e.usageStatusOptions,function(e){return i("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})}),1)],1),i("el-form-item",{attrs:{label:"枪支类型",prop:"type"}},[i("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:e.temp.type,callback:function(t){e.$set(e.temp,"type",t)},expression:"temp.type"}},e._l(e.typeOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),i("el-form-item",{attrs:{label:"电池电量",prop:"battery"}},[i("el-input",{model:{value:e.temp.battery,callback:function(t){e.$set(e.temp,"battery",e._n(t))},expression:"temp.battery"}})],1),i("el-form-item",{attrs:{label:"枪支归还时间",prop:"returnTime"}},[i("el-time-picker",{attrs:{placeholder:"枪支归还时间","value-format":"HH:mm:ss"},model:{value:e.temp.returnTime,callback:function(t){e.$set(e.temp,"returnTime",t)},expression:"temp.returnTime"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("确定")])],1)],1),i("el-dialog",{attrs:{id:"myDialog",title:"批量添加",visible:e.dialogVisible,center:""},on:{close:e.scrollTop,"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"addAllForm",staticClass:"addAllForm formStyle",attrs:{rules:e.rules1,model:e.addAlltemp,"label-position":"left"}},[i("el-form-item",{attrs:{label:"设备号头",prop:"head"}},[i("el-input",{staticClass:"carNO",attrs:{placeholder:"(不包括后五位,例如“CX0512345”请输入“CX05”)"},model:{value:e.addAlltemp.head,callback:function(t){e.$set(e.addAlltemp,"head",t)},expression:"addAlltemp.head"}})],1),i("el-form-item",{attrs:{label:"后五位开始",prop:"begin"}},[i("el-input",{model:{value:e.addAlltemp.begin,callback:function(t){e.$set(e.addAlltemp,"begin",t)},expression:"addAlltemp.begin"}})],1),i("el-form-item",{attrs:{label:"后五位结束",prop:"end"}},[i("el-input",{model:{value:e.addAlltemp.end,callback:function(t){e.$set(e.addAlltemp,"end",t)},expression:"addAlltemp.end"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createAllCar()}}},[e._v("确定")])],1)],1),i("el-dialog",{attrs:{id:"myDialog",title:e.bindMap[e.bindDialogStatus],visible:e.BindDialogFormVisible,center:""},on:{"update:visible":function(t){e.BindDialogFormVisible=t}}},[i("el-form",{ref:"bindForm",staticClass:"formStyle",attrs:{rules:e.bindRules,model:e.bindTemp,"label-position":"left"}},[i("el-form-item",{attrs:{label:e.bindMap[e.bindDialogStatus]+"类型",prop:"type"}},[i("el-select",{staticClass:"filter-item",attrs:{filterable:"",placeholder:"Please select"},on:{change:e.selectChange},model:{value:e.bindTemp.type,callback:function(t){e.$set(e.bindTemp,"type",t)},expression:"bindTemp.type"}},e._l(e.bindTypeOptions,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:t.disabled||1!==e.power&&3==t.id}})}),1)],1),1==e.bindTemp.type&&"bind"==e.bindDialogStatus?i("el-form-item",{attrs:{label:"使用人",prop:"personId"}},[i("el-select",{staticClass:"filter-item",attrs:{filterable:"",placeholder:"Please select"},model:{value:e.bindTemp.personId,callback:function(t){e.$set(e.bindTemp,"personId",t)},expression:"bindTemp.personId"}},e._l(e.userOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),2==e.bindTemp.type&&"bind"==e.bindDialogStatus?i("el-form-item",{attrs:{label:"大队",prop:"teamId"}},[i("el-select",{staticClass:"filter-item",attrs:{filterable:"",placeholder:"Please select"},model:{value:e.bindTemp.teamId,callback:function(t){e.$set(e.bindTemp,"teamId",t)},expression:"bindTemp.teamId"}},e._l(e.largeTeamOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.teamName,value:e.id}})}),1)],1):e._e(),3==e.bindTemp.type&&"bind"==e.bindDialogStatus?i("el-form-item",{attrs:{label:"标签",prop:"rfidId"}},[i("el-select",{staticClass:"filter-item",attrs:{filterable:"",placeholder:"Please select"},model:{value:e.bindTemp.rfidId,callback:function(t){e.$set(e.bindTemp,"rfidId",t)},expression:"bindTemp.rfidId "}},e._l(e.rfidOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.rfid,value:e.id}})}),1)],1):e._e()],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){"bind"==e.bindDialogStatus?e.bindSubmit():e.unbindSubmit()}}},[e._v("确定")])],1)],1),i("my-upload",{attrs:{visible:e.uploadVisible,uploadData:{type:3}},on:{"update:visible":function(t){e.uploadVisible=t},dataUpdated:e.reqSuccess}})],1)},a=[],s=(i("34ef"),i("7f7f"),i("7514"),i("cebc")),o=i("bd86"),l=(i("78ce"),i("333d")),r=i("98c6"),u=i("9a3e"),d=i("66e8"),c=i("4807"),p=[{key:1,display_name:"使用中"},{key:2,display_name:"维修"},{key:3,display_name:"保养"},{key:4,display_name:"报废"}],m=function(e,t,i){var n=/[0-9]{5}/;n.test(t)?i():i(new Error("长度为5"))},f=function(e,t,i){-1==t?i(new Error("请选择")):i()},g=void 0,b={name:"gunFiles",components:{Pagination:l["a"],myUpload:r["a"]},data:function(){var e;return e={power:JSON.parse(sessionStorage.getItem("userInfo")).Power,tableKey:0,list:null,total:0,indexMethod:1,listLoading:!1,listQuery:{page:1,limit:10,iMei:void 0},largeTeamOptions:[{id:-1,teamName:"请选择"}],usageStatusOptions:p,userOptions:[{id:-1,name:"请选择"}],temp:{imei:"",status:1,battery:0,code:"",type:1,returnTime:""},dialogFormVisible:!1,addAlltemp:{head:void 0,begin:void 0,end:void 0},dialogStatus:"",textMap:{update:"编辑",create:"添加"},dialogVisible:!1,rules:{imei:[{required:!0,message:"请填写设备号",trigger:"blur"}]}},Object(o["a"])(e,"largeTeamOptions",[{id:-1,teamName:"请选择"}]),Object(o["a"])(e,"bindTypeOptions",[{id:1,name:"人员"},{id:3,name:"标签"}]),Object(o["a"])(e,"bindTemp",{gunId:-1,type:3,personId:-1}),Object(o["a"])(e,"BindDialogFormVisible",!1),Object(o["a"])(e,"bindDialogStatus",""),Object(o["a"])(e,"bindMap",{bind:"绑定",unbind:"解绑"}),Object(o["a"])(e,"bindRules",{type:[{required:!0,message:"请选择绑定类型",trigger:"change",validator:f}],personId:[{required:!0,message:"请选择绑定人员",trigger:"change",validator:f}],teamId:[{required:!0,message:"请选择绑定大队",trigger:"change",validator:f}],rfidId:[{required:!0,message:"请选择标签",trigger:"change"}]}),Object(o["a"])(e,"bindobj",{}),Object(o["a"])(e,"rules1",{head:[{required:!0,message:"请填写设备号头",trigger:"blur"}],begin:[{required:!0,message:"请填写设备号后五位区间头",trigger:"blur"},{validator:m,trigger:"blur"}],end:[{required:!0,message:"请填写设备号后五位区间尾",trigger:"blur"},{validator:m,trigger:"blur"}]}),Object(o["a"])(e,"pickerOptions",{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}),Object(o["a"])(e,"pausetemp",{time:null}),Object(o["a"])(e,"rules2",{time:[{required:!0,message:"请填写暂停时间",trigger:"blur"}]}),Object(o["a"])(e,"dialogVisibleOfPause",!1),Object(o["a"])(e,"rfidOptions",[]),Object(o["a"])(e,"uploadVisible",!1),Object(o["a"])(e,"typeOptions",[{id:1,name:"普通枪"},{id:2,name:"机动枪"}]),Object(o["a"])(e,"exportLoading",!1),e},created:function(){this.getList(),this.getSelect()},methods:{deleteConfirmOpen:function(e){var t=this;this.$confirm("确定进行此操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.handleDelete(e)}).catch(function(){t.$message({type:"info",message:"已取消"})})},reqSuccess:function(e){1==e&&this.getList()},formatRunStatus:function(e){return 0==e?"入库":1==e?"出库":-1==e?"":void 0},getList:function(){var e=this;this.$set(this.listQuery,"page",this.listQuery.page);var t=this;t.listLoading=!0,Object(u["k"])({page:this.listQuery.page,limit:this.listQuery.limit,status:[1,2,3]}).then(function(i){0==i.status?(e.listQuery.page=e.listQuery.page,e.listLoading=!1,e.list=i.data,e.total=i.count,e.getSelect(),e.indexMethod=(t.listQuery.page-1)*t.listQuery.limit+1):e.$message.error(i.msg)}).finally(function(){t.listLoading=!1})},handleFilter:function(){var e=this;if(""==this.listQuery.iMei||void 0==this.listQuery.iMei)return this.listQuery.iMei=null,void this.getList();Object(u["l"])({keyword:this.listQuery.iMei}).then(function(t){0==t.status?(e.listQuery.page=1,e.listLoading=!1,e.list=[],e.list=t.data,e.total=0):e.$message.error(t.msg)})},resetTemp:function(){this.temp={imei:"",status:1,battery:0,code:"",returnTime:""}},selectChange:function(e){1==e?this.bindTemp.personId=this.bindobj.securityId:2==e&&(this.bindTemp.teamId=this.bindobj.teamId)},handleBind:function(e){this.getRfid(e),this.bindobj=Object(s["a"])({},e),this.bindTypeOptions=[{id:1,name:"人员"},{id:3,name:"标签"}],this.bindDialogStatus="bind",null!==e.securityId?this.bindTypeOptions[0].disabled=!0:this.bindTypeOptions[0].disabled=!1,null!==e.rfidId?this.bindTypeOptions[1].disabled=!0:this.bindTypeOptions[1].disabled=!1,this.bindTemp={gunId:e.id,rfidId:null,personId:null},this.BindDialogFormVisible=!0},handleUnbind:function(e){null==e.securityId?this.bindTypeOptions[0].disabled=!0:this.bindTypeOptions[0].disabled=!1,null===e.rfidId?this.bindTypeOptions[1].disabled=!0:this.bindTypeOptions[1].disabled=!1,this.bindDialogStatus="unbind",this.bindTemp={gunId:e.id},this.BindDialogFormVisible=!0},bindSubmit:function(){var e=this;this.$refs["bindForm"].validate(function(t){var i;t&&(g=e.$loading({target:"#myDialog .el-dialog"}),1==e.bindTemp.type?(i={gunId:e.bindTemp.gunId,personId:e.bindTemp.personId},Object(u["b"])(i).then(function(t){0==t.status?(e.getList(),e.$message.success(t.msg),e.BindDialogFormVisible=!1):e.$message.error(t.msg)}).finally(function(){g.close()})):2==e.bindTemp.type?(i={gunId:e.bindTemp.gunId,teamId:e.bindTemp.teamId},Object(u["c"])(i).then(function(t){0==t.status?(e.getList(),e.$message.success(t.msg),e.BindDialogFormVisible=!1):e.$message.error(t.msg)}).finally(function(){g.close()})):3==e.bindTemp.type&&(i={gunId:e.bindTemp.gunId,rfidId:e.bindTemp.rfidId},Object(u["g"])(i).then(function(t){0==t.status?(e.getList(),e.$message.success(t.msg),e.BindDialogFormVisible=!1):e.$message.error(t.msg)}).finally(function(){g.close()})))})},unbindSubmit:function(){var e=this;this.$refs["bindForm"].validate(function(t){var i;t&&(g=e.$loading({target:"#myDialog .el-dialog"}),1==e.bindTemp.type?(i={gunId:e.bindTemp.gunId},Object(u["r"])(i).then(function(t){0==t.status?(e.getList(),e.$message.success(t.msg),e.BindDialogFormVisible=!1):e.$message.error(t.msg)}).finally(function(){g.close()})):2==e.bindTemp.type?(i={gunId:e.bindTemp.gunId},Object(u["s"])(i).then(function(t){0==t.status?(e.getList(),e.$message.success(t.msg),e.BindDialogFormVisible=!1):e.$message.error(t.msg)}).finally(function(){g.close()})):3==e.bindTemp.type&&(i={gunId:e.bindTemp.gunId},Object(u["m"])(i).then(function(t){0==t.status?(e.getList(),e.$message.success(t.msg),e.BindDialogFormVisible=!1):e.$message.error(t.msg)}).finally(function(){g.close()})))})},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},resetAddAllTemp:function(){this.addAlltemp={head:void 0,begin:void 0,end:void 0}},handleCreateAll:function(){var e=this;this.resetAddAllTemp(),this.dialogVisible=!0,this.$nextTick(function(){e.$refs["addAllForm"].clearValidate()})},createAllCar:function(){var e=this;this.$refs["addAllForm"].validate(function(t){if(!t)return!1;g=e.$loading({target:"#myDialog .el-dialog"}),Object(u["f"])(e.addAlltemp).then(function(t){0==t.status?(e.getList(),e.$message.success(t.msg),e.dialogVisible=!1,e.$store.commit("realTimeMonitor/ISEDITFILES",!0)):e.$message.error(t.msg)}).finally(function(){g.close()})})},createData:function(){var e=this;this.$refs["dataForm"].validate(function(t){if(!t)return!1;g=e.$loading({target:"#myDialog .el-dialog"});var i=Object(s["a"])({},e.temp);void 0==i.returnTime&&delete i.returnTime,Object(u["e"])(i).then(function(t){0==t.status?(e.getList(),e.$message.success(t.msg),e.dialogFormVisible=!1,e.$store.commit("realTimeMonitor/ISEDITFILES",!0)):e.$message.error(t.msg)}).finally(function(){g.close()})})},handleUpdate:function(e){var t=this;this.temp={id:e.id,status:e.status,battery:e.battery,code:e.code,type:e.type,returnTime:e.returnTime},this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},updateData:function(){var e=this;this.$refs["dataForm"].validate(function(t){if(!t)return!1;g=e.$loading({target:"#myDialog .el-dialog"});var i=Object(s["a"])({},e.temp);void 0==i.returnTime&&delete i.returnTime,Object(u["n"])(i).then(function(t){0==t.status?(e.getList(),e.$message.success(t.msg),e.dialogFormVisible=!1,e.$store.commit("realTimeMonitor/ISEDITFILES",!0)):e.$message.error(t.msg)}).finally(function(){g.close()})})},handleDelete:function(e){var t=this,i=this;i.listLoading=!0,Object(u["i"])({gunId:e.id}).then(function(e){0==e.status?(i.listQuery.page>1&&i.list.length<=1&&(i.listQuery.page-=1),t.getList(),i.$message.success("刪除成功"),t.$store.commit("realTimeMonitor/ISEDITFILES",!0)):(t.$message.error(e.msg),i.listLoading=!1)}).catch(function(e){i.listLoading=!1})},formatStatus:function(e){return 1==e?"使用中":2==e?"维修":3==e?"保养":4==e?"报废":5==e?"未注册":void 0},selectFilter:function(e,t,i,n,a,s){var o={};o=t.find(function(t){return t[i]===e}),this.temp[s]=o[n]},getSelect:function(){var e=this,t=this;Object(d["j"])({status:1}).then(function(i){if(0==i.status){if(null==i.data)return;t.largeTeamOptions=i.data,t.largeTeamOptions.unshift({id:-1,teamName:"请选择"})}else null==i.data&&(e.largeTeamOptions=[],e.largeTeamOptions.pop()),e.$message.error(i.msg)}),Object(d["g"])({work:3,status:1}).then(function(i){if(0==i.status){if(null==i.data)return;t.userOptions=i.data,t.userOptions.unshift({id:-1,name:"请选择"})}else null==i.data&&(e.userOptions=[],e.userOptions.pop()),e.$message.error(i.msg)})},getRfid:function(e){var t=this,i=this;this.rfidOptions=[],Object(c["b"])({rfidType:[80],status:[0]}).then(function(e){if(0==e.status){if(null==e.data)return;i.rfidOptions=e.data,i.rfidOptions.unshift({id:null,rfid:"请选择"})}else null==e.data&&(t.rfidOptions=[],t.rfidOptions.pop()),t.$message.error(e.msg)})},changToNull:function(e){return null==e.gunId&&(e.teamName=null),null==e.securityId&&(e.securityName=null),e},scrollTop:function(){var e=document.querySelector("#myDialog .el-dialog__body");e.scrollTop=0},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2==0?"color-row":t%2==1?"noColor-row":""},exportExcel:function(){var e=this;this.exportLoading=!0,Object(d["b"])({excelType:5,title:"枪支信息"}).then(function(t){try{var i=new TextDecoder("utf-8"),n=JSON.parse(i.decode(new Uint8Array(t)));e.$message({message:n.msg,type:"warning"})}catch(l){t.headers;var a="枪支信息.xls",s=new Blob([t],{type:"application/excel"}),o=document.createElement("a");o.href=window.URL.createObjectURL(s),o.download=a,o.click(),o.remove()}}).finally(function(){e.exportLoading=!1})}}},h=b,y=(i("3ac7"),i("2877")),v=Object(y["a"])(h,n,a,!1,null,null,null);t["default"]=v.exports},abce:function(e,t,i){"use strict";var n=i("e052"),a=i.n(n);a.a},de8d:function(e,t,i){},e052:function(e,t,i){}}]);
//# sourceMappingURL=gunFiles.667e5fc0.js.map