(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["firearmsAlarmStatistics"],{"333d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[];n("c5f6");Math.easeInOutQuad=function(e,t,n,a){return e/=a/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function u(e,t,n){var a=l(),r=e-a,u=20,s=0;t="undefined"===typeof t?500:t;var c=function e(){s+=u;var l=Math.easeInOutQuad(s,a,r,t);i(l),s<t?o(e):n&&"function"===typeof n&&n()};c()}var s={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.currentPage=1,this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&u(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&u(0,800)}}},c=s,d=(n("abce"),n("2877")),p=Object(d["a"])(c,a,r,!1,null,"2d3d4633",null);t["a"]=p.exports},"66e8":function(e,t,n){"use strict";n.d(t,"j",function(){return r}),n.d(t,"g",function(){return o}),n.d(t,"i",function(){return i}),n.d(t,"a",function(){return l}),n.d(t,"f",function(){return u}),n.d(t,"e",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"k",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"h",function(){return f}),n.d(t,"d",function(){return g});var a=n("2ade");function r(e){return Object(a["a"])({url:"teams/select",method:"post",data:e})}function o(e){return Object(a["a"])({url:"persons/select",method:"post",data:e})}function i(e){return Object(a["a"])({url:"persons/selectByCondition",method:"post",data:e,headers:{"content-type":"application/json"}})}function l(e){return Object(a["a"])({url:"cars/select",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/map/routeByStatus",method:"post",data:e})}function s(e){return Object(a["a"])({url:"logs/invoke",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/file/exportExcel",method:"post",data:e,responseType:"arraybuffer",headers:{"content-type":"application/json"}})}function d(e){return Object(a["a"])({url:"/noapp/file/xxx/upload",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/file/importExcel",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/eoms/schedulings/queryTaskByIds",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/file/importFile",method:"post",data:e})}},6763:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container",attrs:{id:"firearmsAlarmStatistics"}},[n("router-view"),n("el-form",{ref:"ruleForm",staticClass:"filter-container",attrs:{model:e.ruleForm,rules:e.rules,inline:!0}},[n("el-form-item",{attrs:{prop:"value1"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp","picker-options":e.pickerOptions,clearable:!1},model:{value:e.ruleForm.value1,callback:function(t){e.$set(e.ruleForm,"value1",t)},expression:"ruleForm.value1"}})],1),n("span",[e._v("-")]),n("el-form-item",{attrs:{prop:"value2"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp","picker-options":e.pickerOptions,clearable:!1},model:{value:e.ruleForm.value2,callback:function(t){e.$set(e.ruleForm,"value2",t)},expression:"ruleForm.value2"}})],1),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),n("el-button",{attrs:{type:"primary",icon:"iconfont icondaochu",loading:e.exportLoading},on:{click:e.exportExcel}},[e._v("导出")])],1),n("div",{staticClass:"tableBox"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list.slice((e.currpage-1)*e.pagesize,e.currpage*e.pagesize),fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName}},[n("el-table-column",{attrs:{label:"序号",prop:"id",sortable:"custom",align:"center",width:"80",type:"index",index:e.indexMethod,fixed:""}}),n("el-table-column",{attrs:{label:"设备编号",width:"150px",align:"center",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",{staticClass:"link-type"},[e._v(e._s(a.objectId))])]}}])}),n("el-table-column",{attrs:{label:"车牌号或枪号",width:"150px",align:"center",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",{staticClass:"link-type"},[e._v(e._s(a.licenseNo))])]}}])}),n("el-table-column",{attrs:{label:"枪支偏离车辆",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.gunLostCar))])]}}])}),n("el-table-column",{attrs:{label:"车辆偏移路线",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.carLostRoad))])]}}])}),n("el-table-column",{attrs:{label:"拆卸报警",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.deviceBroken))])]}}])}),n("el-table-column",{attrs:{label:"枪支网络异常",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.gunGpsMissing))])]}}])}),n("el-table-column",{attrs:{label:"车辆信号丢失",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.carGpsMissing))])]}}])}),n("el-table-column",{attrs:{label:"同一辆车周围少于2支枪",width:"180px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.gunNotEnough))])]}}])}),n("el-table-column",{attrs:{label:"未到规定时间内打卡",width:"180px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.carCheckinTimeout))])]}}])}),n("el-table-column",{attrs:{label:"车辆道路变换",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.carChangeRoad))])]}}])}),n("el-table-column",{attrs:{label:"电量不足",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.gunLowBattery))])]}}])}),n("el-table-column",{attrs:{label:"自定义超速",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.carOverSpeed))])]}}])}),n("el-table-column",{attrs:{label:"一键报警",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.carOneKeyAlarm))])]}}])}),n("el-table-column",{attrs:{label:"车载定位系统推送的超速",width:"180px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.carOverSpeedCorrect))])]}}])}),n("el-table-column",{attrs:{label:"未保留笼统的异常","min-width":"180px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.carNotDefined))])]}}])}),n("el-table-column",{attrs:{label:"总计","min-width":"120px",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.amount))])]}}])})],1)],1),n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.list.length>0,expression:"list.length>0"}],attrs:{background:"",layout:"prev, pager, next, sizes, total, jumper","page-sizes":[5,10,15,20],"page-size":e.pagesize,total:e.list.length},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)},r=[],o=(n("34ef"),n("78ce"),n("333d")),i=n("c318"),l=n("66e8"),u={name:"firearmsAlarmStatistics",components:{Pagination:o["a"]},data:function(){return{tableKey:0,pagesize:10,currpage:1,indexMethod:1,list:[],total:0,listLoading:!1,power:JSON.parse(sessionStorage.getItem("userInfo")).Power,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},exportLoading:!1,ruleForm:{value1:"",value2:""},rules:{value1:[{type:"date",required:!0,message:"请选择起止日期",trigger:"change"}],value2:[{type:"date",required:!0,message:"请选择起止日期",trigger:"change"}]}}},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{getList:function(e){var t=this;e.length>31?this.$message.warning("请搜素31天内的数据,请重新选择!"):(this.listLoading=!0,this.indexMethod=1,this.currpage=1,Object(i["a"])({dates:e}).then(function(e){0==e.status&&(null!==e.data?(t.list=e.data,t.listLoading=!1,t.indexMethod=(t.currpage-1)*t.pagesize+1):(t.$message.warning("无数据"),t.list=[],t.listLoading=!1,t.indexMethod=(t.currpage-1)*t.pagesize+1))}))},dealDate:function(){var e=this;function t(e){var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();return a=a<10?"0"+a:a,r=r<10?"0"+r:r,"".concat(n,"-").concat(a,"-").concat(r)}for(var n=864e5,a=Math.min(e.ruleForm.value1,e.ruleForm.value2),r=Math.max(e.ruleForm.value1,e.ruleForm.value2)+n-1,o=Math.ceil((r-a)/n),i=[],l=0;l<o;l++){var u=t(a+n*l);i.push(u)}return i},search:function(){var e=this;e.$refs.ruleForm.validate(function(t){t&&e.getList(e.dealDate())})},excute:function(){var e=this,t=this;t.$refs.ruleForm.validate(function(n){if(n){if(t.dealDate().length>1)return void e.$message.warning("请选择同一天");Object(l["e"])({startTime:e.ruleForm.value1,endTime:e.ruleForm.value1+864e5}).then(function(t){0==t.status&&e.$message.success(t.msg)})}})},exportExcel:function(){var e=this,t=this;t.$refs.ruleForm.validate(function(t){if(t){var n=e.dealDate();if(n.length>31)return void e.$message.warning("请搜素31天内的数据,请重新选择!");e.exportLoading=!0,e.$message.warning("稍等，正在请求数据，请勿重复点击哦"),Object(l["b"])({dates:n,excelType:3,title:"枪支车辆报警统计"}).then(function(t){try{var a=new TextDecoder("utf-8"),r=JSON.parse(a.decode(new Uint8Array(t)));e.$message({message:r.msg,type:"warning"})}catch(s){t.headers;var o="";n.length>1&&(o=n[n.length-1]);var i=n[0]+"----"+o+"枪支车辆报警统计.xls",l=new Blob([t],{type:"application/excel"}),u=document.createElement("a");u.href=window.URL.createObjectURL(l),u.download=i,u.click(),u.remove()}}).finally(function(){e.exportLoading=!1})}})},handleCurrentChange:function(e){this.currpage=e,this.indexMethod=(this.currpage-1)*this.pagesize+1},handleSizeChange:function(e){this.pagesize=e,this.indexMethod=(this.currpage-1)*this.pagesize+1},handleSelectionChange:function(e){},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2==0?"color-row":t%2==1?"noColor-row":""}}},s=u,c=(n("6dc3"),n("2877")),d=Object(c["a"])(s,a,r,!1,null,"19a38768",null);t["default"]=d.exports},"6dc3":function(e,t,n){"use strict";var a=n("e3f1"),r=n.n(a);r.a},abce:function(e,t,n){"use strict";var a=n("e052"),r=n.n(a);r.a},c318:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var a=n("2ade");function r(e){return Object(a["a"])({url:"/logs/byType",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/logs/byObjectId",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/logs/byTeam",method:"post",data:e})}},e052:function(e,t,n){},e3f1:function(e,t,n){}}]);
//# sourceMappingURL=firearmsAlarmStatistics.8cf42137.js.map