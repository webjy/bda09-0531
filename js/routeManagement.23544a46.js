(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["routeManagement"],{"04a0":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return u}),n.d(t,"e",function(){return c});var a=n("2ade");n("bc3a");function r(e){return Object(a["a"])({url:"/histroy/gun",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/histroy/carNo",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/bindRelations/queryByGun",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/bindRelations/queryByCar",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/bindRelations/queryHourRangeRelByCar",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/bindRelations/queryHourRangeRelByGun",method:"post",data:e})}function c(e,t){return Object(a["a"])({url:e.url,method:"get",data:e,cancelToken:t})}},"051a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAADk0lEQVRIS+2VT2hcVRTGv++++/IapmEympJkrKiIf7CiQhdFKt0YQZcuEiiiNgyZO0lIdCUVXTz8gwVxKkIy8wyxpLgxWBSKCLYgIhRFEXFRC1JoFgabVFKTOjXz3twjN82IlXmZgFAQvLv37p/fOd/9zrnEDRq8QRz890Dz8/PeysrKgwBeAXAAgAVwQkTeKpVKZ7eVURRFfq1Wy4iIyuVytYWFBdvf39/XaDS0k57kFa11h7X2TQAPi8h3ADpJ3iMip0ulUnFL0GaUt4jIYwD2kewQkRMkfwIwA2C3iDRIngTwKYCj1to5rfUcAF9EXhCRg8aYXamgMAxVb2/vAaVUKCK3OSlIXiU5HcfxZ1rrl0neCuAPETkF4KyIvAPg3SRJ5nzf7wDgQE+XSqWeVNDs7Gw+juOI5N0k36jX62eCIIjjOL68tLS01tPTkw2CQCdJIqurq1e7u7tzIvI2yYdE5EuSGQB7AZwxxjyVCqpWq+5i31dKHRGReWNMvFUpDA4OegMDA/dZaw8rpfZtmsHJWTHGnEsFzczM7LXWHlNKFUdGRr7aZr0xiqKbkyTZ5ft+w/f9peHh4csbhkk7IIqiewF85PSP4/jIxMTE4jZhLZelgqanp3NKKXfhQwBOWWuPk/zZnaKUorVWkiSpk/x1fHz8SrsgtrI3K5VKXin1HIAn/5G9uJoiuS4iH2ut3ysUCudJShqwbcFGUZQluUdEHgHg7Oz2NERkB4AHSO521k6S5PmxsbFzabC2oGaE5XK5U2vtN7+DIHDy7ST5OMkXAXyxvr5+eHJycrlVVn+BpqamdmqtuwDUjDG/tdO8Oe/u0vO81wHsJ/lssVj8viXIdYC+vr473SKS+0XkR6XU8Ww2+83Q0FCjHTAMwx35fH6j1QA4ZIz5uiWoUqncv1mUTm/nnk4AlzzPG/c874e1tTXp6uq6TmL3zx3meZ4fBMHtSZKUXR+01h4aHR290BIURdFrAJ5x7d1ae5rkXSSPisgvJF1lxyKy0aWbY8NySjlYL4BHAXSTfHVxcfGDMAzraaBIRJ5wqcdx/G0QBHcAmAWwB4C7WCF5XUYi11x8jacuWWunSH5ojKml2rtarR4k6Tr0AoBPNp8D96Ycs9Z+7nmeA3mtDrDW/t5oNC4uLy9fTMukuY/lcvmmTCYzCsAVZiIirr2f9H3/pUKh8K/azt+D23YdtXNfu/n/Qe0USp3/E4I5lSrRU5utAAAAAElFTkSuQmCC"},"09d1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container",attrs:{id:"routeManagement"}},[n("div",{staticClass:"filter-container"},[n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.addList}},[e._v("添加")])],1),n("div",{staticClass:"tableBox"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName}},[n("el-table-column",{attrs:{label:"序号",prop:"id",align:"center",width:"60",type:"index",index:e.indexMethod}}),n("el-table-column",{attrs:{label:"路线名称","min-width":"150px",align:"center",prop:"name"}}),n("el-table-column",{attrs:{label:"路线类型",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.formateRouteType(t.row.schedulingType)))])]}}])}),n("el-table-column",{attrs:{label:"路线排班日期",width:"300px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.formateScheduleDates(t.row.schedulingWeekDay)))])]}}])}),n("el-table-column",{attrs:{label:"绑定车组",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.groupObj[t.row.linkedGroup]))])]}}])}),n("el-table-column",{attrs:{label:"上午出车时间","min-width":"180px",align:"center",prop:"morningTime"}}),n("el-table-column",{attrs:{label:"下午出车时间","min-width":"180px",align:"center",prop:"afternoonTime"}}),n("el-table-column",{attrs:{label:"建立时间","min-width":"180px",align:"center",prop:"createTime"}}),n("el-table-column",{attrs:{label:"操作",align:"center","min-width":"330",fixed:"right","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-button",{attrs:{type:"primary",size:"mini",icon:"iconfont iconsuo"},on:{click:function(t){return e.handleBindRoute(a)}}},[e._v("绑定车组")]),n("el-button",{attrs:{type:"primary",size:"mini",icon:"iconfont iconchakan"},on:{click:function(t){return e.toView(a)}}},[e._v("查看")]),n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){return e.deleteConfirmOpen(a)}}},[e._v("删除")])]}}])})],1)],1),e.total>0?n("pagination",{attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit,layout:"prev, pager, next, sizes, total, jumper"},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}):e._e(),n("el-dialog",{staticClass:"myDial",attrs:{visible:e.myDial.dShow,fullscreen:e.myDial.dFull,modal:e.myDial.dModal,"show-close":e.myDial.dModal,"destroy-on-close":!e.myDial.dModal},on:{"update:visible":function(t){return e.$set(e.myDial,"dShow",t)}}},[e.myDial.dShow?n("addOrEdit",{attrs:{geomList:e.geomList,roadName:e.roadName,afternoonTime:e.afternoonTime,morningTime:e.morningTime,schedulingType:e.schedulingType,schedulingWeekDay:e.schedulingWeekDay,roadId:e.roadId},on:{closePDial:e.closePDialF}}):e._e()],1),n("el-dialog",{attrs:{id:"groupDialog",title:"绑定车组",visible:e.groupDialogFormVisible,center:""},on:{"update:visible":function(t){e.groupDialogFormVisible=t}}},[n("el-form",{ref:"teamForm",staticClass:"formStyle",attrs:{rules:e.groupRules,model:e.groupTemp,"label-position":"left"}},[n("el-form-item",{attrs:{label:"车组",prop:"groupIds"}},[n("el-select",{staticClass:"filter-item",attrs:{filterable:"",multiple:"",placeholder:"Please select"},model:{value:e.groupTemp.groupIds,callback:function(t){e.$set(e.groupTemp,"groupIds",t)},expression:"groupTemp.groupIds "}},e._l(e.groupOptions,function(e){return n("el-option",{key:e.id,attrs:{label:e.groupName,value:e.id}})}),1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.groupSubmit()}}},[e._v("确定")])],1)],1)],1)},r=[],i=(n("28a5"),n("7f7f"),n("6b54"),n("87b3"),n("6d67"),n("cebc")),o=(n("ac6a"),n("f3e2"),n("bd86")),s=n("333d"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"historyBox"}},[a("div",{staticClass:"left"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.myLoading,expression:"myLoading"}],ref:"temp",staticClass:"routeForm",attrs:{rules:e.rules,model:e.temp}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.viewHide,expression:"viewHide"}],staticClass:"selectionMode"},[a("div",{class:["手绘路线"==e.loadType?"isSelectClass":"unSelectClass"],on:{click:function(t){return e.changeLoadType(0)}}},[a("div",["手绘路线"!==e.loadType?a("img",{attrs:{src:n("8c52"),alt:""}}):a("img",{attrs:{src:n("8f72"),alt:""}})]),a("span",[e._v("手绘路线")])]),a("div",{class:["手绘路线"!==e.loadType?"isSelectClass":"unSelectClass"],on:{click:function(t){return e.changeLoadType(1)}}},[a("div",["选取路线"!==e.loadType?a("img",{attrs:{src:n("051a"),alt:""}}):a("img",{attrs:{src:n("254e"),alt:""}})]),a("span",[e._v("选取路线")])])]),a("el-form-item",{attrs:{prop:"roadName"}},[a("el-input",{attrs:{placeholder:"请输入路线名称"},model:{value:e.temp.roadName,callback:function(t){e.$set(e.temp,"roadName",t)},expression:"temp.roadName"}})],1),a("el-form-item",{staticClass:"networkItem"},[a("el-select",{staticClass:"filter-item networkSelect",attrs:{placeholder:"请选择网点",multiple:"",filterable:"","collapse-tags":""},on:{change:e.selectChange},model:{value:e.temp.network,callback:function(t){e.$set(e.temp,"network",t)},expression:"temp.network"}},e._l(e.networkOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{staticClass:"networkItem"},[a("el-select",{staticClass:"filter-item networkSelect",attrs:{placeholder:"路线类型",filterable:"","collapse-tags":""},model:{value:e.temp.schedulingType,callback:function(t){e.$set(e.temp,"schedulingType",t)},expression:"temp.schedulingType"}},e._l(e.schedulingTypeOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{staticClass:"networkItem"},[a("el-select",{staticClass:"filter-item networkSelect",attrs:{placeholder:"路线排班日期",multiple:"",filterable:"","collapse-tags":""},model:{value:e.temp.schedulingWeekDay,callback:function(t){e.$set(e.temp,"schedulingWeekDay",t)},expression:"temp.schedulingWeekDay"}},e._l(e.schedulingWeekDayOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{staticClass:"networkItem"},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"上午出车时间"},model:{value:e.temp.morningTime,callback:function(t){e.$set(e.temp,"morningTime",t)},expression:"temp.morningTime"}})],1),a("el-form-item",{staticClass:"networkItem"},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"下午出车时间"},model:{value:e.temp.afternoonTime,callback:function(t){e.$set(e.temp,"afternoonTime",t)},expression:"temp.afternoonTime"}})],1),a("el-form-item",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRoute("temp")}}},[e._v("提交")]),a("el-button",{attrs:{type:"primary"},on:{click:e.goBack}},[e._v("返回")])],1)],1),a("div",{staticClass:"editRoute"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.lineLoading,expression:"lineLoading"},{name:"show",rawName:"v-show",value:e.handOrGet,expression:"handOrGet"}],ref:"lineForm",attrs:{"hide-required-asterisk":"",inline:!0,rules:e.lineRule,model:e.lineForm}},[a("el-form-item",{attrs:{prop:"devDefault"}},[a("SelectTree",{attrs:{props:e.carprops,options:e.carList,setVal:e.lineForm.devDefault},on:{"update:setVal":function(t){return e.$set(e.lineForm,"devDefault",t)},"update:set-val":function(t){return e.$set(e.lineForm,"devDefault",t)}}})],1),a("el-form-item",{attrs:{label:"选择日期",prop:"date"}},[a("el-date-picker",{attrs:{clearable:!1,type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd"},model:{value:e.lineForm.date,callback:function(t){e.$set(e.lineForm,"date",t)},expression:"lineForm.date"}})],1),a("el-form-item",{attrs:{label:"开始时间",prop:"timeS"}},[a("el-col",{attrs:{span:11}},[a("el-time-picker",{attrs:{clearable:!1,"value-format":"HH:mm:ss",placeholder:"开始时间"},model:{value:e.lineForm.timeS,callback:function(t){e.$set(e.lineForm,"timeS",t)},expression:"lineForm.timeS"}})],1)],1),a("el-form-item",{attrs:{label:"结束时间",prop:"timeE"}},[a("el-col",{attrs:{span:11}},[a("el-time-picker",{attrs:{clearable:!1,"value-format":"HH:mm:ss",placeholder:"结束时间"},model:{value:e.lineForm.timeE,callback:function(t){e.$set(e.lineForm,"timeE",t)},expression:"lineForm.timeE"}})],1)],1),a("el-button",{staticClass:"getLine",attrs:{type:"primary"},on:{click:function(t){return e.getLine("lineForm")}}},[e._v("获取路线")])],1)],1)],1),a("div",{staticClass:"content"},[a("div",{ref:"historyRouteMap",attrs:{id:"historyRouteMap"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.viewHide,expression:"viewHide"}],staticClass:"atMapTopBox"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showDelete,expression:"showDelete"}],attrs:{type:"danger"},on:{click:e.deleteRoute}},[e._v("删除路线")]),"手绘路线"==e.loadType?a("el-radio-group",{staticClass:"drawStart",model:{value:e.drawStart,callback:function(t){e.drawStart=t},expression:"drawStart"}},[a("el-radio",{staticClass:"elRadio",attrs:{label:1}},[e._v("从起点继续绘制")]),a("el-radio",{staticClass:"elRadio",attrs:{label:2}},[e._v("从终点继续绘制")])],1):e._e()],1)])])},u=[],c=(n("57e7"),n("d25f"),n("a481"),n("75fc")),d=n("123d"),p=n.n(d),m=n("53e9"),f=n.n(m),h=n("d941"),g=n("2ade");function y(e){return Object(g["a"])({url:"/map/simplify",method:"post",data:e,headers:{"content-type":"application/json"}})}function v(e){return Object(g["a"])({url:"/map/create",method:"post",data:e,headers:{"content-type":"application/json"}})}function b(e){return Object(g["a"])({url:"/map/modifyCross",method:"post",data:e})}var A=n("ad19"),w=n("04a0"),O=n("69d9"),k=n("bc33"),T=n("b78f"),S=n.n(T),M=function(e){var t=new Date;e&&(t=new Date(e));var n=t.getFullYear(),a=t.getMonth()+1,r=a>9?a:"0"+a,i=t.getDate(),o=i>9?i:"0"+i;return"".concat(n,"-").concat(r,"-").concat(o)},C={data:function(){var e=this,t=function(t,n,a){""!=e.temp.roadName?a():a(new Error("请输入路线名称"))},n=function(e,t,n){0==t.length?n(new Error("请选择网点")):n()},a=function(t,n,a){var r=e.lineForm.date+" "+e.lineForm.timeS,i=e.lineForm.date+" "+e.lineForm.timeE;""==n||null==n?a(new Error("请选择结束时间")):i<r?a(new Error("结束时间小于开始时间")):a()};return{isRefresh:!1,map:void 0,myLoading:!1,lineLoading:!1,carList:[],getCarImei:{},carprops:{id:"id",label:"licenseNo"},loadType:"手绘路线",handOrGet:!1,showDelete:!1,pointArr:[],datemin:"",pickerOptions:{onPick:function(t){var n=t.maxDate,a=t.minDate;e.datemin=a.getTime(),n&&(e.datemin="")},disabledDate:function(t){if(""!=e.datemin){var n=5184e5,a=e.datemin-n,r=e.datemin+n;return t.getTime()<a||t.getTime()>r}}},lineForm:{devDefault:"",date:M(),timeS:"00:00:00",timeE:"23:59:59"},temp:{roadName:this.roadName,roadDiscribe:void 0,network:[],schedulingWeekDay:[1,2,3,4,5],schedulingType:1,afternoonTime:"",morningTime:""},rules:{roadName:[{validator:t,trigger:"blur"}],network:[{validator:n,trigger:"change"}]},lineRule:{devDefault:[{required:!0,message:"请选择终端",trigger:"change"}],date:[{required:!0,message:"请选择日期",trigger:"change"}],timeS:[{required:!0,message:"请选择开始时间",trigger:"change"}],timeE:[{required:!0,validator:a,trigger:"change"}]},lineOptions:{strokeOpacity:1,strokeColor:"#3f9c0f",strokeWeight:4},markerStart:new BMap.Icon(S.a,new BMap.Size(26,41),{anchor:new BMap.Size(13,42),imageOffset:new BMap.Size(-199,-139)}),markerEnd:new BMap.Icon(S.a,new BMap.Size(26,41),{anchor:new BMap.Size(13,42),imageOffset:new BMap.Size(-225,-139)}),drawStart:2,networkOptions:[],schedulingTypeOptions:[{id:1,name:"晚收+早送"},{id:2,name:"晚收"},{id:3,name:"早送"},{id:5,name:"加钞"},{id:7,name:"收款"},{id:0,name:"无效"}],schedulingWeekDayOptions:[{id:1,name:"周一"},{id:2,name:"周二"},{id:3,name:"周三"},{id:4,name:"周四"},{id:5,name:"周五"},{id:6,name:"周六"},{id:7,name:"周日"}],mapvLayer:null,mapvLayer1:null}},props:["geomList","roadName","roadId","schedulingWeekDay","schedulingType","morningTime","afternoonTime"],computed:{pointStrArr:function(){return this.pointArr.map(function(e){return"".concat(e.lng," ").concat(e.lat)})},viewHide:function(){return!this.roadName}},components:{SelectTree:h["a"]},mounted:function(){this.initMap(),this.getDevlist(),this.getSelect()},methods:{selectChange:function(e){this.mapvLayer&&this.mapvLayer.destroy(),this.mapvLayer1&&this.mapvLayer1.destroy();for(var t=[],n=[],a=[],r=0;r<this.temp.network.length;r++)for(var i=0;i<this.networkOptions.length;i++)this.temp.network[r]==this.networkOptions[i].id&&(t=this.networkOptions[i].geom.slice(6,-1).split(" "),n.push({geometry:{type:"Point",coordinates:[t[0],t[1]]},text:this.networkOptions[i].name}),a.push({geometry:{type:"Point",coordinates:[t[0],t[1]]}}));var o=new mapv.DataSet(n),s=new mapv.DataSet(a),l={draw:"text",avoid:!0,size:12,font:"18px Arial",fillStyle:"#31478F",shadowColor:"#31478F",shadowBlur:10};this.mapvLayer=new mapv.baiduMapLayer(this.map,o,l);var u={fillStyle:"rgba(255, 50, 50, 1)",shadowColor:"rgba(255, 50, 50, 1)",shadowBlur:30,globalCompositeOperation:"lighter",size:5,draw:"simple"};this.mapvLayer1=new mapv.baiduMapLayer(this.map,s,u)},getNetworkByRoute:function(){var e=this;return new Promise(function(t,n){Object(k["e"])({routeId:e.roadId}).then(function(e){t(e.data)}).catch(function(e){}).finally(function(){})})},initMap:function(){var e=this,t=this;if(t.createMap(),t.setMapEvent(),t.addMapControl(),t.showDelete=!1,t.pointArr=[],t.$nextTick(function(){t.$refs["temp"].resetFields()}),t.viewHide)t.handOrGet?t.$nextTick(function(){t.$refs["lineForm"].resetFields()}):t.handDraw();else{var n=this,a=n.map,r=[],i=[];if(this.temp.schedulingType=this.schedulingType,this.temp.morningTime=this.morningTime,this.temp.afternoonTime=this.afternoonTime,this.schedulingWeekDay?(this.$set(this.temp,"schedulingWeekDay",Object(c["a"])(JSON.parse(this.schedulingWeekDay))),console.warn(this.temp.schedulingWeekDay)):this.temp.schedulingWeekDay=[],this.getNetworkByRoute().then(function(t){t||(t=[]),t.forEach(function(t){e.temp.network.push(t.id);var n=t.geom.slice(6,-1).split(" ");i.push({geometry:{type:"Point",coordinates:[n[0],n[1]]},text:t.name})});var n=new mapv.DataSet(i),r={draw:"text",avoid:!0,size:12,font:"18px Arial",fillStyle:"#31478F",shadowColor:"#31478F",shadowBlur:10};new mapv.baiduMapLayer(a,n,r)}),this.geomList.length){this.geomList.forEach(function(e){r.push(new BMap.Point(e.split(" ")[0],e.split(" ")[1]))}),a.setViewport(r,{margins:[100,100,100,100]});var o=new BMap.Polyline(r,n.lineOptions);a.addOverlay(o);var s=new BMap.Marker(r[0],{icon:n.markerStart});a.addOverlay(s);var l=new BMap.Marker(r[r.length-1],{icon:n.markerEnd});a.addOverlay(l),n.pointArr=[].concat(r)}}},createMap:function(){this.map=new BMap.Map("historyRouteMap",{enableMapClick:!1}),0==this.geomList.length&&this.map.centerAndZoom("潮州",13),this.map.enableScrollWheelZoom()},setMapEvent:function(){this.map.enableDragging(),this.map.enableScrollWheelZoom(),this.map.enableDoubleClickZoom(),this.map.enableKeyboard()},addMapControl:function(){new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE}),new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT}),new BMap.OverviewMapControl;var e=new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP],anchor:BMAP_ANCHOR_TOP_LEFT});this.map.addControl(e)},delete_control:function(){this.map.removeControl(mapType1),this.map.removeControl(overView),this.map.removeControl(overViewOpen)},getLine:function(e){var t=this;t.map.clearOverlays(),this.selectChange(),t.pointArr=[],t.$nextTick(function(){t.$refs[e].validate(function(e){if(e){t.lineLoading=!0;var n=new Date(t.lineForm.date.replace(/-/g,"/")+" "+t.lineForm.timeS).getTime(),a=new Date(t.lineForm.date.replace(/-/g,"/")+" "+t.lineForm.timeE).getTime();Object(w["a"])({carNo:t.getCarImei[t.lineForm.devDefault],startTime:n,endTime:a,hasAddress:!1}).then(function(e){if(e.success)if(null==e.data||0==e.data.length||0==e.data.filter(function(e){return null!=e.lat&&null!=e.lng&&1*e.lat>1&&1*e.lng>1}).length)t.$message.warning("查询结果为空，请重新选择"),t.showDelete=!1;else{t.showDelete=!0;var n=[];n=e.data.filter(function(e){return null!=e.lat&&null!=e.lng&&1*e.lat>1&&1*e.lng>1}).map(function(e){var t=Object(O["a"])(new BMap.Point(e.lng,e.lat));return"".concat(t.lng," ").concat(t.lat)});var a={wktGps:n};y(a).then(function(e){if(e.success){var n=e.data.slice(11,-1).split(",");n.forEach(function(e){e.split(" ");t.pointArr.push(new BMap.Point(e.split(" ")[0],e.split(" ")[1]))}),t.$refs.temp.validateField("roadName"),t.map.setViewport(t.pointArr,{margins:[100,100,100,100]}),t.getNewPoint()}else t.$message.error(e.msg)})}else t.$message.error(e.msg)}).finally(function(){t.lineLoading=!1})}})})},addRoute:function(e){var t=this,n=this,a=v;n.$nextTick(function(){n.$refs[e].validate(function(e){var r;e&&(n.myLoading=!0,t.viewHide?(r={name:n.temp.roadName,schedulingType:n.temp.schedulingType},n.temp.network.length&&(r.crosslobby=JSON.stringify(n.temp.network)),0!==n.temp.schedulingWeekDay.length&&(r.schedulingWeekDay=JSON.stringify(n.temp.schedulingWeekDay)),n.pointStrArr.length&&(r.wktGps=n.pointStrArr.length),null!==n.temp.morningTime&&(r.morningTime=n.temp.morningTime),null!==n.temp.afternoonTime&&(r.afternoonTime=n.temp.afternoonTime)):(a=b,r={id:t.roadId,name:n.temp.roadName,schedulingType:n.temp.schedulingType},r.schedulingWeekDay=JSON.stringify(n.temp.schedulingWeekDay),n.temp.network.length&&(r.corss=JSON.stringify(n.temp.network)),n.temp.morningTime&&(r.morningTime=n.temp.morningTime),n.temp.afternoonTime&&(r.afternoonTime=n.temp.afternoonTime)),a(r).then(function(e){if(0==e.status){n.isRefresh=!0;var a="添加成功";if(!t.viewHide)return a="编辑成功",n.$message.success(a),void t.goBack();n.$message.success(a),n.initMap()}else n.$message.error(e.msg)}).finally(function(){n.myLoading=!1}))})})},changeLoadType:function(e){0==e?(this.loadType="手绘路线",this.handOrGet=!1):1==e&&(this.loadType="选取路线",this.handOrGet=!0),this.initMap(),0==e&&this.handDraw()},handDraw:function(){var e=this,t=new BMapLib.DrawingManager(e.map,{enableDrawingTool:!0,polylineOptions:e.lineOptions,drawingToolOptions:{drawingModes:[BMAP_DRAWING_POLYLINE]}});t.addEventListener("polylinecomplete",function(t){if(e.showDelete=!0,2==e.drawStart)e.pointArr=e.pointArr.concat(t.getPath());else if(1==e.drawStart&&e.pointArr.length){var n=Object(c["a"])(t.getPath()).reverse();e.pointArr=n.concat(e.pointArr)}else e.pointArr=t.getPath();e.map.clearOverlays(),e.selectChange(),e.$refs.temp.validateField("roadName"),e.getNewPoint()})},getNewPoint:function(){var e=this,t=e.map,n=0,a=[],r=[],i=void 0,o=void 0,s=Object(c["a"])(e.pointArr),l=void 0,u=[];i=new BMap.Polyline(e.pointArr,e.lineOptions),t.addOverlay(i);var d=new BMap.Marker(e.pointArr[0],{icon:e.markerStart});t.addOverlay(d);var m=new BMap.Marker(e.pointArr[e.pointArr.length-1],{icon:e.markerEnd});t.addOverlay(m),o=new BMap.PointCollection(e.pointArr,{color:"#d340c3",size:BMAP_POINT_SIZE_SMALL}),t.addOverlay(o),o.addEventListener("click",function(h){var g=h.point,y="".concat(g.lng," ").concat(g.lat),v=e.pointStrArr.indexOf(y),b={icon:new BMap.Symbol(BMap_Symbol_SHAPE_CIRCLE,{scale:7,fillColor:"red",fillOpacity:1,strokeWeight:1})};a.length<2&&(r.push(v),u.push(g),a[n]=new BMap.Marker(g,b),t.addOverlay(a[n++])),2==n&&(n=3,r[0]>r[1]&&(r.reverse(),a.reverse(),u.reverse()),a[0].setIcon(new BMap.Icon(p.a,new BMap.Size(16,16))),a[1].setIcon(new BMap.Icon(f.a,new BMap.Size(16,16))),0==r[0]&&a[0].setOffset(new BMap.Size(12,12)),r[1]==e.pointArr.length-1&&a[1].setOffset(new BMap.Size(12,12)),l=new BMap.Polyline(u,{strokeColor:"red",enableEditing:!0}),t.addOverlay(l),s.splice(r[0],r[1]-r[0]+1),o.setPoints(s),l.addEventListener("lineupdate",function(e){u=e.target.getPath()}),a.forEach(function(p,f){p.addEventListener("click",function(){0==f&&(e.pointArr.splice(r[0],r[1]-r[0]+1),u.forEach(function(t,n){e.pointArr.splice(r[0]+n,0,t)})),t.removeOverlay(a[0]),t.removeOverlay(a[1]),t.removeOverlay(l),t.removeOverlay(i),o.clear(),n=0,a=[],r=[],u=[],s=Object(c["a"])(e.pointArr),i=new BMap.Polyline(e.pointArr,e.lineOptions),t.addOverlay(i),o.setPoints(e.pointArr),d.setPosition(e.pointArr[0]),m.setPosition(e.pointArr[e.pointArr.length-1])})}))})},deleteRoute:function(){this.map.clearOverlays(),this.selectChange(),this.pointArr=[],this.showDelete=!1;var e=document.getElementsByClassName("BMapLib_Drawing_panel")[0];e&&(e.style.display="block")},getDevlist:function(){var e=this,t=this;Object(A["f"])({}).then(function(n){0==n.status?t.setCarLineOptions(n):e.$message.error(n.msg)})},setCarLineOptions:function(e){var t=this,n=[],a=e.data;for(var r in a)a[r].length>0&&(a[r].forEach(function(e){t.getCarImei[e.licenseNo]=e.licenseNo,e.title=e.serialNo}),n.push({licenseNo:""==r?"未分组":r,children:a[r]}));this.carList=n},goBack:function(){this.$emit("closePDial",this.isRefresh)},getSelect:function(){var e=this,t=this;Object(k["b"])({type:-1}).then(function(n){if(0==n.status){if(null===n.data.records)return;t.networkOptions=n.data}else null==n.data&&(e.networkOptions=[]),e.$message.error(n.msg)})}}},B=C,j=(n("31ba"),n("c500"),n("2877")),E=Object(j["a"])(B,l,u,!1,null,"1893e4da",null),L=E.exports,x=n("0a6e"),D=n("a90f"),N={data:function(){var e;return e={power:JSON.parse(sessionStorage.getItem("userInfo")).Power,list:null,total:0,listLoading:!1,listQuery:{page:1,limit:10},indexMethod:1,myDial:{styles:{top:"120px"},dShow:!1,dFull:!0,dModal:!1},geomList:[],roadName:"",morningTime:"",afternoonTime:"",roadId:null,schedulingWeekDay:"",schedulingType:1,groupObj:{},groupDialogFormVisible:!1,groupTemp:{},teamOptions:[],groupRules:{groupIds:[{required:!0,message:"请选择车组",trigger:"change"}]}},Object(o["a"])(e,"groupObj",{}),Object(o["a"])(e,"groupOptions",[]),e},components:{Pagination:s["a"],addOrEdit:L},created:function(){var e=this;this.getList(),this.getSelect(),Object(D["c"])({}).then(function(t){if(0==t.status){t.data||(t.data=[]);var n=t.data;e.groupObj={},n.forEach(function(t,n){e.groupObj[t.id]=t.groupName}),console.warn(e.groupObj)}else e.$message.error(t.msg)})},methods:{deleteConfirmOpen:function(e){var t=this;this.$confirm("确定进行此操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteList(e)}).catch(function(){t.$message({type:"info",message:"已取消"})})},groupSubmit:function(){var e=this;this.$refs["teamForm"].validate(function(t){if(t){var n=e.$loading({target:"#groupDialog .el-dialog"}),a=Object(i["a"])({},e.groupTemp);Object(x["a"])(a).then(function(t){0==t.status?(e.getList(),e.$message.success(t.msg),e.routeDialogFormVisible=!1):e.$message.error(t.msg)}).finally(function(){n.close()})}})},getSelect:function(){var e=this;Object(x["f"])().then(function(t){if(0==t.status){if(null==t.data)return;e.groupOptions=t.data,e.groupObj={},e.groupOptions.forEach(function(t,n){e.groupObj[t.id]=t.groupName})}else null==t.data&&(e.groupOptions=[]),e.$message.error(t.msg)})},queryBindedGroupsById:function(e){var t=this;Object(x["i"])({routeId:e}).then(function(e){0==e.status?(e.data||(e.data=[]),t.groupTemp.groupIds=e.data.map(function(e,t){return e.id})):t.$message.error(e.msg)}).finally(function(){})},handleBindRoute:function(e){var t=this;this.groupDialogFormVisible=!0,this.$nextTick(function(){t.$refs["teamForm"].clearValidate()}),this.groupTemp={routeId:e.id,groupIds:[]},this.queryBindedGroupsById(e.id)},formateRouteType:function(e){var t="";switch(e){case 1:t="晚收+早送";break;case 2:t="晚收";break;case 3:t="早送";break;case 5:t="加钞";break;case 7:t="收款";break}return t},formateScheduleDates:function(e){var t=[];if(e)for(var n=JSON.parse(e),a=0;a<n.length;a++)switch(n[a]){case 1:t.push("周一");break;case 2:t.push("周二");break;case 3:t.push("周三");break;case 4:t.push("周四");break;case 5:t.push("周五");break;case 6:t.push("周六");break;case 7:t.push("周日");break}else t=[];return t.toString()},getList:function(){var e=this;e.listLoading=!0,Object(x["j"])({page:e.listQuery.page,limit:e.listQuery.limit}).then(function(t){0==t.status?(e.list=t.data.records,e.list.forEach(function(t,n){e.list[n].createTime=Object(O["d"])(t.createTime)}),e.total=t.data.total,e.indexMethod=(e.listQuery.page-1)*e.listQuery.limit+1):e.$message.error(t.msg)}).finally(function(){e.listLoading=!1})},searchList:function(){this.listQuery.page=1,this.getList()},addList:function(){this.geomList=[],this.roadName="",this.roadId=null,this.schedulingWeekDay="",this.schedulingType=1,this.morningTime="",this.afternoonTime="",this.myDial.dShow=!0},deleteList:function(e){var t=this;t.listLoading=!0,Object(x["e"])({geometryId:e.id}).then(function(e){0==e.status?(t.$message.success("刪除成功"),t.listQuery.page>1&&t.list.length<=1&&(t.listQuery.page-=1),t.getList()):(t.$message.error(e.msg),t.listLoading=!1)}).catch(function(e){t.listLoading=!1,console.error(e)})},closePDialF:function(e){this.myDial.dShow=!1,e&&this.getList()},toView:function(e){var t=this;if(t.geomList=[],t.roadName=e.name,t.roadId=e.id,t.schedulingWeekDay=e.schedulingWeekDay,t.schedulingType=e.schedulingType,t.morningTime=e.morningTime,t.afternoonTime=e.afternoonTime,null==e.geometryId)return t.geomList=[],void(t.myDial.dShow=!0);Object(x["k"])({geometryId:e.geometryId}).then(function(e){0==e.status?(t.geomList=e.data.geom.split(","),t.myDial.dShow=!0):t.$message.error(e.msg)})},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2==0?"color-row":t%2==1?"noColor-row":""}}},I=N,P=(n("c575"),Object(j["a"])(I,a,r,!1,null,null,null));t["default"]=P.exports},"0a6e":function(e,t,n){"use strict";n.d(t,"j",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"k",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return u}),n.d(t,"g",function(){return c}),n.d(t,"h",function(){return d}),n.d(t,"i",function(){return p}),n.d(t,"f",function(){return m}),n.d(t,"a",function(){return f});var a=n("2ade");function r(e){return Object(a["a"])({url:"/map/roadlist",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/map/delete",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/map/complexGeometry",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/planRoad/list",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/planRoad/add",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/planRoad/remove",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/statistics/milesrange",method:"post",data:e,headers:{"content-type":"application/json"}})}function d(e){return Object(a["a"])({url:"/statistics/milesRangeByTeam",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/eoms/groups/queryBindedGroupsByRoute",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/eoms/groups/queryAllGroup",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/eoms/groups/bindGroup",method:"post",data:e})}},"123d":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABxklEQVQ4T42TPWhTYRiFn3OT+l2aaHEoSFGbQsVBUBcrVAcHNwUdRLqok9l1ECdXf6a6+QMOiiBOKhQRwUUTMIul4CCK+EcHO0g0qf3S5L5yb3+8iU3jHS583z3ncN57zis6nqEK2/qabkLoCNjepc+aNmxqMesfzI7xNU3RymHwLflc1d0zOCa0ep8GG2aCx/UBf2puF7VEOn6Nvsc151wFtLvT0dpnm8kO+rEPO/CJwHDJ3ZJ09v/ISygzu/35gC9qa9mNZuCdUNBTwMzHXKTQsKgFO1Uoh5eBi73IBt+k1gkscx3Yv4y/okLJTSPtWVfAeNmyhYlMEN4HDv3F2kws8Du2tDxXE1iQlE+BJmuRv5QPwift5HgWm48FfiJtTASwp83AF7Mtd0NwmMDO1Dc1pvqr4TPB+D8uzX6tMYJNfhr35woVttRz1HLV8AWwr1ucscBVpAvthYnuZDY0zkeN8Hl3cpLlNY2UwuFI9rEzRjN+SGzu9nPjGBcjP5IUqVB2N0HFXlG2uVwp0mqVv7vXPeNcVeiocnwfL1N/1d0Fjq+3TMCj+QF/um2Z0taGXrG9L3AnhY6m1vlNss6Rfzh7kC9p/B8WGbM/45uqNgAAAABJRU5ErkJggg=="},"1af6":function(e,t,n){var a=n("63b6");a(a.S,"Array",{isArray:n("9003")})},"20fd":function(e,t,n){"use strict";var a=n("d9f6"),r=n("aebd");e.exports=function(e,t,n){t in e?a.f(e,t,r(0,n)):e[t]=n}},"254e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAADVklEQVRIS+2VXWgcVRTHf/87s+uuida6BiUmWJFqabRVNxDWSl9E0EcfFIJo8xQQH9SXGOnXNG1tRLQiqLSiJcUXP4pCkYApiAhtJM0HQmNBBAU/WmshxbhpdmfukalGFHayAaEgeN7uPXPP75xzz/+OuEymy8ThPwh62ILyWjYqZEhiM+ANjiTipelIsyuqqNxvuaSdliK4n6DaAr5g3OBEmLZ+EeaLRj6BFzEqckxhFM24zRzHJiP1Lw9Ks1zPjTLul6MHyOM5Ejq+rhtvCjrMSBBHLWE0CNiPZ0QJI+TIJWIAo/fkLrVlgyJz3bBZEGHcZOARC0p4vVrnkysLbMPoNLiIZ8yMWTledcZBYkYSkVeOARmPTQzpukzQXTutPYQDBrfKs08Bx4mpL8TMlQr8Wl1klUS4kMcWqyy0FlntxCvAnWZ8jmiRUUYcn4j0aDZou20MHO/IGPZneG/yoOrLSiFt8zrWO8egGT0mvBOjIbxxItLpTNDd260cBBxK6vRP7dX4yvRmKkeUcjFtPiSpwc8zkebSs5mgSmTr6saHJsa8MTy9Sz+uDNb4q0zQHYO2Ol9gm4xHEGPEHA7ghzSMhUgxFhi1CznOn4o03yyJZcbbVNlKez3HUxgPIYT/M5wwwCEWDT7Kw9snIr4BpfsNralgy8/aKhfSJce9PqATQ4LEoCDYYNABzIYJT4/v4XQWrCloKb3KM1b0V5NbWscXUT6ktS4eIOQ5jM+SGoPT+3SuUUl/gboiay3UuIqE6uQLutCs50v+9C4LBfbK2FSrs2Xmec00BkXmemJuSRxbJDYhvkqMw1OzTPC+kmbANX1WKHUyIEevefomd+uLhqB7Iru9BsN4NuCYl1EEfjHxZCt8+f15rKP0Txmke2mwK0rkAliTh5cF+QD6xiN92xDUvcP2IB53niEXcCz2rMWxX54zwChGXfzxSi+ZT6fOMIPrneM+4Bozdi843j0VqdYYtNMOAA/Gnt75OU62lbg5Nt4y6ALOiUsBs4bGKa3e85oFfDAZqZo53t07rBcRSXyH52MTPYKK9xyymE/lMO8IGgbw/BbC2WqOs1mVLJ1TJbJrE88TXpeEGaf/HImjMWz9t8/O35NbsY6aTV8z//+gZh3K9P8OLoNSKqz0VBUAAAAASUVORK5CYII="},"31ba":function(e,t,n){"use strict";var a=n("7579"),r=n.n(a);r.a},"333d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[];n("c5f6");Math.easeInOutQuad=function(e,t,n,a){return e/=a/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,n){var a=s(),r=e-a,l=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=l;var s=Math.easeInOutQuad(u,a,r,t);o(s),u<t?i(e):n&&"function"===typeof n&&n()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.currentPage=1,this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},c=u,d=(n("abce"),n("2877")),p=Object(d["a"])(c,a,r,!1,null,"2d3d4633",null);t["a"]=p.exports},"36cd":function(e,t,n){},"53e9":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB30lEQVQ4T42TT2sTURTFz3nTaelMFoqgBUGSgElwkp0utBuhSou4FUKs+Bn8Au5c+w3cWKkiuKyV6rbuCpLRxi6SqgguFAQzz9pJ3pWZScZpOi2+5X33/N65fx6RcwSgLnsXlaGrhsPv01+2OwQGebmcDOryhZaI9QBEMXMXid8p4OFst/0kq0kBcrZ2KpixnxFYyHtpHBPIU7fr3yZgolgK6JcaGySuHSdOISIrhZ5/JwXEtmEl1kT2BPxEopqFiUgH4BkSJ2OhMS1n9/1q7KBfru8QPJ/oZdsdcj6w5AXJq6PYhhtKM7DVWxKVJIadQq9d5V65VhnC/njQumw6A96MIABCl/qWhrMG8Eo2z0JYZb/oLVKp9cO1JxBMBSZPPHK2GAGWqNTLIwGDP5aemV4DeWkyR4xZOroE6BuBOM+jcTmhtLTN9UlIXELSxIZPwEubSH05FpPXR5N5FUECW22OpyOQD4Wu78UAXfSaotTqqLs/AflGspYzxjkSJ5IxStPZ9aPFS06/VH9Mcvm/Fgl4U+i246X7t8qA0qXGIxB3j4OI4LW7Hzb5tfPjAGAs+l2qLxvyHoAGADuFCXoKcn+2569kHzj0G8eXAkztn/MqRvG0MfzlfG5vEZBJd38B3MHN7m4xdPMAAAAASUVORK5CYII="},"549b":function(e,t,n){"use strict";var a=n("d864"),r=n("63b6"),i=n("241e"),o=n("b0dc"),s=n("3702"),l=n("b447"),u=n("20fd"),c=n("7cd6");r(r.S+r.F*!n("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,d,p=i(e),m="function"==typeof this?this:Array,f=arguments.length,h=f>1?arguments[1]:void 0,g=void 0!==h,y=0,v=c(p);if(g&&(h=a(h,f>2?arguments[2]:void 0,2)),void 0==v||m==Array&&s(v))for(t=l(p.length),n=new m(t);t>y;y++)u(n,y,g?h(p[y],y):p[y]);else for(d=v.call(p),n=new m;!(r=d.next()).done;y++)u(n,y,g?o(d,h,[r.value,y],!0):r.value);return n.length=y,n}})},"54a1":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("95d5")},"681a":function(e,t,n){"use strict";var a=n("e4b5"),r=n.n(a);r.a},"69d9":function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});n("ac6a"),n("f3e2"),n("8ea5"),n("a481"),n("0298"),n("df7c");function a(e,t){var n=new Date(e),a=n.getFullYear(),i=r(n.getMonth()+1),o=r(n.getDate()),s=r(n.getHours()),l=r(n.getMinutes()),u=r(n.getSeconds());return 1==t?a+"-"+i+"-"+o+" "+s+":"+l+":"+u:a+"-"+i+"-"+o}function r(e){return e<10?"0"+e:e}function i(e){var t=new Date(e).toJSON();return new Date(+new Date(t)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")}function o(e){var t=p(e.lat,e.lng),n=new BMap.Point(t[1],t[0]);return n}function s(e){var t=[];return e.forEach(function(e){var n=p(e.lat,e.lng),a=new BMap.Point(n[1],n[0]);t.push(a)}),t}var l=3.141592653589793,u=6378245,c=.006693421622965943,d=52.35987755982988;function p(e,t){var n=f(e,t),a=m(n[0],n[1]);return a}function m(e,t){var n=t,a=e,r=Math.sqrt(n*n+a*a)+2e-5*Math.sin(a*d),i=Math.atan2(a,n)+3e-6*Math.cos(n*d),o=r*Math.cos(i)+.0065,s=r*Math.sin(i)+.006,l=[];return l.push(s),l.push(o),l}function f(e,t){var n=h(t-105,e-35),a=g(t-105,e-35),r=e/180*l,i=Math.sin(r);i=1-c*i*i;var o=Math.sqrt(i);n=180*n/(u*(1-c)/(i*o)*l),a=180*a/(u/o*Math.cos(r)*l);var s=e+n,d=t+a,p=[];return p.push(s),p.push(d),p}function h(e,t){var n=2*e-100+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return n+=2*(20*Math.sin(6*e*l)+20*Math.sin(2*e*l))/3,n+=2*(20*Math.sin(t*l)+40*Math.sin(t/3*l))/3,n+=2*(160*Math.sin(t/12*l)+320*Math.sin(t*l/30))/3,n}function g(e,t){var n=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return n+=2*(20*Math.sin(6*e*l)+20*Math.sin(2*e*l))/3,n+=2*(20*Math.sin(e*l)+40*Math.sin(e/3*l))/3,n+=2*(150*Math.sin(e/12*l)+300*Math.sin(e/30*l))/3,n}},7579:function(e,t,n){},"75fc":function(e,t,n){"use strict";var a=n("a745"),r=n.n(a);function i(e){if(r()(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var o=n("774e"),s=n.n(o),l=n("c8bb"),u=n.n(l);function c(e){if(u()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return s()(e)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(e){return i(e)||c(e)||d()}n.d(t,"a",function(){return p})},"774e":function(e,t,n){e.exports=n("d2d5")},"8c52":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAADz0lEQVRIS6WWzWtcVRjGn/ecm5mCUPAjHzMJVktB8KN+QNvELFz0D9CFLsQgDE7m3sxMDBNrpYvq6EKE1lFSZpKZcRIXroIouhGhO6FabU2xH7joQjc6sZVGKKFDzrmPnGFGYpImmeTs7/s7z/s8532vYJdnfn5eLy0tHSH5GoBnSP6ulPraGPNlOp2+1S4vu+Hk83nV09MzrLX+AMDjAAhAA7gB4FQkEplLJBJ3HGPHIAeJxWKHSE6JyAGS34jIj06ViLxI8jdjzAuZTOb6jkEOMjAwMGSMKYjIQyTPiEgtEoncajQa+0XkcwD3kxwJguCsU9qxIgfp6+s7AsBBXNGCMabS9qNUKh3UWn8BYA/Jl4Ig+L5jRQ4Sj8cHSX4M4EEAU9ba6TakVqvFjTHvAniZ5LfW2kwmk6l3BHKQ/v7+YWvtaQdxSqy1n7QhxWKxz/O8YwCSAM6RPFav13/N5/PhtkGtdB3WWhcBxEl+KCJV3/f/cUWmp6d7tNaTJEcB/GytfSOdTl9upbAZ7C09aqXr2VbxfSRPr4UopXIAUiQvGWNez2az11ZDtgS1IwzgTMuTwvLyciWXyy25j6emprqj0eikgzglWuvjyWRyYaO3eVdFDtLd3T3oeV7b+EIkEqkkEokmZHZ2ttvdPgzDMRG5EoZhNgiCqyLiHu26syGoZfzhMAwLAPaT/CgajZbbEOeJUmqCpC8iC2EYHh8bG7u0tl2raetADtLb2zuklHJK+lqefNo2vlqt9pLMkXTpuhqGYWYzJRvOujZERJzhT5GsGWPeyWazf7sPVkGcJxddhIMg+GUzJetArRf/hEsUgKcBKADfkTxRr9fPx2Kx+0hOiogP4DLJie1C/pe6crn8AMlTIvI8gJ8APAagh+QCybeVUsMAxhwEwEQqlbpyN+M3DUOtVnvEGDMPwKysrLza1dX1JIA8gH0AbgK4B8AFa+1b6XT6Yqfr5b8wFIvFA57nfQYgKiIjJBcBjAA4CWCvGysAsp0qWedRqVS6VynlRovbJT+IiGvfowCOkjzned6JZDK5aYQ3U9lUNDc3t8dae9Ba+z6AIQC3AViXJpLnlVInR0dHr3XiyVpoE1SpVJ5zswzAAICvAJwluVcpdaPRaFwYHx//o1NPNgTNzMwcBfBma7zPLC4u3ozFYjqVSpndqFg3GarV6sPGmLiI3BaRhoi4H4zmUUqJtXbLKb+RYq21m3t3ksnk9WaBcrk8C8BtzoiIeNtZHx208i/f9w+1Qe+JyGAYhlpEmhtxt4ekiIibLn/6vv/Kjlqyk0v8C8mh1SoOyJxvAAAAAElFTkSuQmCC"},"8f72":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAADkElEQVRIS6WWzW9UVRiHn/fcO9OJRBMVK2lMQUI0UaidDqUtXbjgD9AFLIyNG1FCIDTUqpTQcsskiNLWBmLUIurClTEa3RgTdiZFmE6ndKhhwQI3+FEMEont3LnnvmZuOxbp57R3f85zn9/vPfceYa3PHnXqn6LJjfGqKA2q/ILyXaHIN/lTcru8vayJ46lpsLQ6hlPAVlUUwRFhkpDTk4bPbngyXWKsHuSpSVkajeEMsAX4npDLOJHVboQbU/DihCfXVw/y1Gy3tIhhANhEyNnQcv7BOLfvFNjsxPhKhEdVaRs5wQUQrdzIU5O0NLkzkM1iGZgKGCr30XBU60ycrwUSgWVPLi0XKzfy1NRDc0wZRKi1ljPFIh+WIa3HtcYXelV5SeAHhAMZT36rDDRXfB9Qq5aBQsAnZUijpxtCpVNgr8BwIHTm4BqehCsHlSBFdjguHwA1hPSHPuey78qd0iZ1nlZXQQfKa8CoLfLG6EnypW5WPt6l6Sqy07j0q7JRlL57ITs9rS5YDhvD68CYH3LoSpqf74UsbzQ3wmdRalUZCP5maGxQ/iotTnbpY8alYxYy6oe8dSUtuYXO5uJT56lpLNKMO1N8qZPAYWjMm4O4VRwC9gNXC3Bw3GPifpOloyt3Epsd4YD3fZePy5BSXL6lHWGfCLkZE8YWgywc3dxhHFTYEHVS4PNy8U1H9fEwzmEN2SvCREE4sJTJwkazEGPoU6hXOG98jl9+R/4sLShD0Kj4bBDSmUszvpTJfNDMid/mCucQkgpGhB8DS1fO4VIKHgE6RKO48oGlfaWQ/0WX8nS9UU4DLyhkRHkWqEbIWaVHoFWE/UbIW0t7Ns3VlZjMM6o7pk8nHL5UCPyQV1x4zhg8hY3ALWCdCCPW8vZoWrKV/l7+G++WI7qlmOALUar8kDb3H36XB2gTQzfwEDA8HXIwX6HJPKNtR/ThRIJ+lN2q/IQhg/KMKLsQhv2QruVGeCnLyGiTp4n1UCdwEqUFuKuCRVERLvmW7oU+K5XEF4GS3fp8zKFf4QlVvlXlgpTiCpm0PiO59+RmJZsu+glK9uguV3jThAxPOXw0DrdSN3GyQwSVTNay0e04pk/6Qo3A3cChYCxOedE6ixSc1d0tqiyqcaYvenI9im67p58S0owhjuKu6dJyn5bAH5leaYxAqR49YQzNaGQS/RHX/Ej01zOi/JrplZcrv5ys8g3+BQ/CnirT6/FOAAAAAElFTkSuQmCC"},"95d5":function(e,t,n){var a=n("40c3"),r=n("5168")("iterator"),i=n("481b");e.exports=n("584a").isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||i.hasOwnProperty(a(t))}},a745:function(e,t,n){e.exports=n("f410")},a90f:function(e,t,n){"use strict";n.d(t,"f",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"g",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"k",function(){return c}),n.d(t,"i",function(){return d}),n.d(t,"h",function(){return p}),n.d(t,"b",function(){return m}),n.d(t,"l",function(){return f}),n.d(t,"j",function(){return h});var a=n("2ade");function r(e){return Object(a["a"])({url:"/eoms/groups/page",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/eoms/groups/list",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/eoms/groups/add",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/groups/update",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/eoms/groups/fuzzyQuery",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/eoms/groups/bind",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/eoms/groups/unbind",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/eoms/groups/enable",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/eoms/groups/disable",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/eoms/groups/bindRoute",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/eoms/groups/unbindRoute",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/eoms/groups/queryBindedRoutes",method:"post",data:e})}},abce:function(e,t,n){"use strict";var a=n("e052"),r=n.n(a);r.a},ad19:function(e,t,n){"use strict";n.d(t,"g",function(){return r}),n.d(t,"f",function(){return i}),n.d(t,"h",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return u}),n.d(t,"j",function(){return c}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"i",function(){return m});var a=n("2ade");function r(e){return Object(a["a"])({url:"/cars/allList",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/cars/allBindList",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/guns/allList",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/logs/delays",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/map/lastgps",method:"post",data:e,headers:{"content-type":"application/json"}})}function u(e){return Object(a["a"])({url:"/terminal/send",method:"post",data:e,headers:{"content-type":"application/json"}})}function c(e){return Object(a["a"])({url:"/proxy/StandardApiAction_vehicleControlOthers",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/eoms/relations/queryByCars",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/eoms/relations/queryByGuns",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/noapp/thirdparty/gaode/regeo",method:"post",data:e})}},b78f:function(e,t,n){e.exports=n.p+"img/mapicon.7621a9c3.png"},bc33:function(e,t,n){"use strict";n.d(t,"g",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"f",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"e",function(){return c});var a=n("2ade");function r(e){return Object(a["a"])({url:"/map/lstPt",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/map/allDestination",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/map/keypt",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/map/updatePt",method:"post",data:e,headers:{"content-type":"application/json"}})}function l(e){return Object(a["a"])({url:"/map/deletePt",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/map/checkArea",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/map/destinationByRoad",method:"post",data:e})}},bd65:function(e,t,n){},c500:function(e,t,n){"use strict";var a=n("36cd"),r=n.n(a);r.a},c575:function(e,t,n){"use strict";var a=n("bd65"),r=n.n(a);r.a},c8bb:function(e,t,n){e.exports=n("54a1")},d2d5:function(e,t,n){n("1654"),n("549b"),e.exports=n("584a").Array.from},d941:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{ref:"mySelect",attrs:{value:e.setVal,clearable:e.clearable,filterable:"","filter-method":e.selectFilter},on:{clear:e.clearHandle,"visible-change":e.clearForm}},[n("el-option",{staticClass:"options",attrs:{value:e.setVal}},[n("el-tree",{ref:"selectTree",staticClass:"tree-option",attrs:{accordion:e.accordion,data:e.options,props:e.props,"node-key":e.props.id,"default-expanded-keys":e.defaultExpandedKey,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)],1)},r=[],i=(n("d25f"),n("57e7"),n("4f37"),n("ac6a"),n("f3e2"),{name:"el-tree-select",props:{props:{type:Object,default:function(){return{id:"id",label:"label",children:"children"}}},options:{type:Array,default:function(){return[]}},setVal:{type:String,default:null},clearable:{type:Boolean,default:!0},accordion:{type:Boolean,default:!0}},data:function(){return{inputTitle:"",parentKey:"",defaultExpandedKey:[],curScrollTop:0,searchVal:""}},methods:{initHandle:function(){var e=this;this.$nextTick(function(){e.options.length>0&&e.setVal&&(e.defaultExpandedKey=[e.parentKey],e.$refs.selectTree.setCurrentKey(e.setVal)),e.initScroll()})},initScroll:function(){var e=this;this.$nextTick(function(){var t=document.querySelectorAll(".el-scrollbar .el-scrollbar__bar");t.forEach(function(e){return e.style.width=0});var n=0,a=e.$refs.selectTree.$el,r=a.parentNode,i=a.querySelector(".el-tree-node__children .is-current");i&&(n=i.offsetTop+i.offsetHeight-200),e.curScrollTop=n>0?n:0,r.scrollTop=e.curScrollTop})},handleNodeClick:function(e,t,n){e.children||(this.parentKey=t.parent.key,this.$emit("update:setVal",e[this.props.label]),this.inputTitle=e.title?e.title:e.label,this.$refs.mySelect.blur())},clearHandle:function(){this.searchVal="",this.defaultExpandedKey=[],this.curScrollTop=0,this.clearSelected(),this.$emit("update:setVal","")},clearSelected:function(){var e=document.querySelectorAll(".tree-option .el-tree-node");e.forEach(function(e){return e.classList.remove("is-current")})},selectFilter:function(e){this.searchVal=e},filterNode:function(e,t,n){return e=e.trim(),!e||-1!==t[this.props.label].indexOf(e)||this.checkBelongToChooseNode(e,t,n)},checkBelongToChooseNode:function(e,t,n){var a=n.level;if(1===a)return!1;var r=n.parent,i=0;while(i<a-1){if(-1!==r.data[this.props.label].indexOf(e))return!0;r=r.parent,i++}return!1},clearForm:function(){this.searchVal="",this.defaultExpandedKey=[],this.initHandle()}},watch:{options:function(e){e.length>0&&this.initHandle()},searchVal:function(e){this.$refs.selectTree.filter(e)}}}),o=i,s=(n("681a"),n("2877")),l=Object(s["a"])(o,a,r,!1,null,"3b1d64aa",null);t["a"]=l.exports},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,a=e.length-1;a>=0;a--){var r=e[a];"."===r?e.splice(a,1):".."===r?(e.splice(a,1),n++):n&&(e.splice(a,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(e){return a.exec(e).slice(1)};function i(e,t){if(e.filter)return e.filter(t);for(var n=[],a=0;a<e.length;a++)t(e[a],a,e)&&n.push(e[a]);return n}t.resolve=function(){for(var t="",a=!1,r=arguments.length-1;r>=-1&&!a;r--){var o=r>=0?arguments[r]:e.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,a="/"===o.charAt(0))}return t=n(i(t.split("/"),function(e){return!!e}),!a).join("/"),(a?"/":"")+t||"."},t.normalize=function(e){var a=t.isAbsolute(e),r="/"===o(e,-1);return e=n(i(e.split("/"),function(e){return!!e}),!a).join("/"),e||a||(e="."),e&&r&&(e+="/"),(a?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function a(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var r=a(e.split("/")),i=a(n.split("/")),o=Math.min(r.length,i.length),s=o,l=0;l<o;l++)if(r[l]!==i[l]){s=l;break}var u=[];for(l=s;l<r.length;l++)u.push("..");return u=u.concat(i.slice(s)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=r(e),n=t[0],a=t[1];return n||a?(a&&(a=a.substr(0,a.length-1)),n+a):"."},t.basename=function(e,t){var n=r(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return r(e)[3]};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("f28c"))},e052:function(e,t,n){},e4b5:function(e,t,n){},f410:function(e,t,n){n("1af6"),e.exports=n("584a").Array.isArray}}]);
//# sourceMappingURL=routeManagement.23544a46.js.map