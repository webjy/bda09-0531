(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["historicalPlayback"],{"04a0":function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return o}),a.d(t,"d",function(){return r}),a.d(t,"c",function(){return l}),a.d(t,"f",function(){return s}),a.d(t,"g",function(){return d}),a.d(t,"e",function(){return c});var n=a("2ade");a("bc3a");function i(e){return Object(n["a"])({url:"/histroy/gun",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/histroy/carNo",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/bindRelations/queryByGun",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/bindRelations/queryByCar",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/bindRelations/queryHourRangeRelByCar",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/bindRelations/queryHourRangeRelByGun",method:"post",data:e})}function c(e,t){return Object(n["a"])({url:e.url,method:"get",data:e,cancelToken:t})}},1934:function(e,t,a){(function(n){function i(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(e){var a=this.useColors;if(e[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+e[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),a){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,n)}}function r(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function l(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(a){}}function s(){var e;try{e=t.storage.debug}catch(a){}return!e&&"undefined"!==typeof n&&"env"in n&&(e=Object({NODE_ENV:"production",BASE_URL:"/location/"}).DEBUG),e}function d(){try{return window.localStorage}catch(e){}}t=e.exports=a("6d1a"),t.log=r,t.formatArgs=o,t.save=l,t.load=s,t.useColors=i,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:d(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(s())}).call(this,a("f28c"))},2453:function(e,t,a){},"2c10":function(e,t,a){},"2d956":function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){__webpack_require__.d(__webpack_exports__,"a",function(){return videoPlayback});var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_date_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("87b3"),core_js_modules_es6_date_to_string__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_date_to_string__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_string_trim__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("4f37"),core_js_modules_es6_string_trim__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_string_trim__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7514"),core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_5__),E_bda09_0530_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("bd86"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("c5f6"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_8__),_timelineInfo__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("7242");function videoPlayback(){this.videoTimeTable=null,this.videoFileTable=null,this.videoFileDowloadTable=null,this.trackPlayer=null,this.loginServer=null,this.queryVehicle=null,this.queryVehicleChannels=new Array,this.isSearching=!1,this.ajaxVehicleServerObj=null,this.getVideoTimer=null,this.taskInfo=null,this.loadTimeLine=!0,this.addTimeTableData=[],this.is1078=!1}function controllDownLoad(e,t,a,n){var i="StandardTTSAction_controllDownLoad.action",o={};o.devIdno=a,o.sequence=Number(n),0==t||2==t?o.tasktype=1:1==t&&(o.tasktype=0);$.myajax.jsonPost(i,o,!1,function(i,r){if(r){if(0==i.result){var l=$("#controllDownLoad"+e).parent().parent().parent().find(".sequence");modifyRowData(l,".taskStatus",0==t?rootParent.lang.uploading:rootParent.lang.track_pause);var s=0==t?"pause":"downLoad",d=0==t?rootParent.lang.track_pause:rootParent.lang.continues,c='<a id="controllDownLoad'+e+'" class="'+s+'" href="javascript:controllDownLoad('+e+","+o.tasktype+",'"+a+"',"+n+');" title="'+d+'"></a>';c+='<a class="delete" href="javascript:chanelDownLoad('+e+","+o.tasktype+",'"+a+"',"+n+');" title="'+rootParent.lang.cancel+'"></a>',modifyRowHtml(l,".operator",c)}}else $.dialog.tips(rootParent.lang.sendInstructionFail,1)})}function chanelDownLoad(e,t,a,n){var i="StandardTTSAction_controllDownLoad.action",o={};o.devIdno=a,o.sequence=Number(n),o.tasktype=2;$.myajax.jsonPost(i,o,!1,function(t,i){if(i){if(0==t.result){var o=$("#controllDownLoad"+e).parent().parent().parent().find(".sequence");modifyRowData(o,".taskStatus",rootParent.lang.cancel);var r='<a id="controllDownLoad'+e+'" class="downLoad" href="javascript:controllDownLoad('+e+",0,'"+a+"',"+n+');" title="'+rootParent.lang.continues+'"></a>';modifyRowHtml(o,".operator",r)}}else $.dialog.tips(rootParent.lang.sendInstructionFail,1)})}function downloadFTPVideoFile(e,t,a,n,i,o,r,l,s,d){var c={};c.vehiIdno=e,c.chn=t,c.beginDate=a,c.endDate=n,c.res=i,c.stream=o,c.store=r,c.arm1=l,c.arm2=s;var u=rootParent.vehicleManager.getVehicle(e),m=u.getVideoDevice().status.is1078Device();c.is1078=m,c.videoType=d,$.dialog({id:"ftp",title:rootParent.lang.uploadTask,content:"url:VideoManagement/selectVIdeoDownload.html?data="+encodeURIComponent(JSON.stringify(c)),width:"360px",height:"530px",min:!1,max:!1,lock:!0})}function doExit(){$.dialog({id:"ftp"}).close()}function getFtpUrl(e){window.open("ftp://"+window.ftpUrl+e)}function modifyRowData(e,t,a){$(e).parent().find(t).find("span").text(a)}function modifyRowHtml(e,t,a){$(e).parent().find(t).find("div").html(a)}function replaceAry(e){for(var t=1,a=e.length;t<a;t++)e[t+1]=2*e[t],11==t&&(e[t+1]=262144);return e.length>1&&e.splice(e.length-1,1),e}function formatArm1(e){var t="";return e>>0&!0&&(t+=rootParent.lang.alarm_type_emergency_alarm+";"),e>>1&!0&&(t+=rootParent.lang.alarm_type_overspeed+";"),e>>2&!0&&(t+=rootParent.lang.adas_alarm_type_fatigue_one_level+";"),e>>3&!0&&(t+=rootParent.lang.alarm_type_earlyWarning+";"),e>>4&!0&&(t+=rootParent.lang.alarm_type_GNSSModuleFailure+";"),e>>5&!0&&(t+=rootParent.lang.alarm_type_GNSSAntennaMissedOrCut+";"),e>>6&!0&&(t+=rootParent.lang.alarm_type_GNSSAntennaShort+";"),e>>7&!0&&(t+=rootParent.lang.report_mainSupplyUndervoltage+";"),e>>8&!0&&(t+=rootParent.lang.report_mainPowerFailure+";"),e>>9&!0&&(t+=rootParent.lang.report_LCDorDisplayFailure+";"),e>>10&!0&&(t+=rootParent.lang.report_TTSModuleFailure+";"),e>>11&!0&&(t+=rootParent.lang.report_cameraMalfunction+";"),e>>12&!0&&(t+=rootParent.lang.report_cumulativeDayDrivingTimeout+";"),e>>13&!0&&(t+=rootParent.lang.report_overtimeParking+";"),e>>14&!0&&(t+=rootParent.lang.report_outOfRegional+";"),e>>15&!0&&(t+=rootParent.lang.report_outOfLine+";"),e>>16&!0&&(t+=rootParent.lang.report_InadequateOrTooLongRoadTravelTime+";"),e>>17&!0&&(t+=rootParent.lang.report_routeDeviation+";"),e>>18&!0&&(t+=rootParent.lang.report_VSSFailure+";"),e>>19&!0&&(t+=rootParent.lang.report_abnormalFuel+";"),e>>20&!0&&(t+=rootParent.lang.report_antitheftDevice+";"),e>>21&!0&&(t+=rootParent.lang.report_illegalIgnition+";"),e>>22&!0&&(t+=rootParent.lang.report_illegalDisplacement+";"),e>>23&!0&&(t+=rootParent.lang.alarm_type_rollover+";"),t}function formatArm2(e){var t="";return e>>0&!0&&(t=rootParent.lang.alarm_type_video_signal+";"),e>>1&!0&&(t+=rootParent.lang.alarm_type_video_mask+";"),e>>2&!0&&(t+=rootParent.lang.alarm_type_memory_cell_fault+";"),e>>3&!0&&(t+=rootParent.lang.alarm_type_other_video_device_fault+";"),e>>4&!0&&(t+=rootParent.lang.alarm_bus_overcrowding+";"),e>>5&!0&&(t+=rootParent.lang.alarm_type_abnormal_driving_behavior+";"),e>>6&!0&&(t+=rootParent.lang.special_alarm_type_video_to_storage_threshold+";"),t}videoPlayback.prototype.initialize=function(){this.initVideoTimeTable()},videoPlayback.prototype.getLoginServer=function(){var e=this;$.myajax.jsonPost("StandardLoginAction_getLoginServer.action",null,!1,function(t,a){a?e.loginServer=t.loginServer:$.dialog.tips(rootParent.lang.errorGetServerInfo,2)})},videoPlayback.prototype.initVideoTimeTable=function(){this.videoTimeTable=new _timelineInfo__WEBPACK_IMPORTED_MODULE_9__["a"],this.videoTimeTable.setRootId("videoTime"),this.videoTimeTable.initialize()},videoPlayback.prototype.getChnName=function(e){if(this.queryVehicleChannels&&null!=e){for(var t=0;t<this.queryVehicleChannels.length;t++)if(e==this.queryVehicleChannels[t].index&&1==this.queryVehicleChannels[t].devType)return this.queryVehicleChannels[t].name;if(63==e||64==e)return"通道"+(Number(e)+1);if(1==this.queryParam.ftp)return"CH"+(Number(e)+1)}return""},videoPlayback.prototype.getAllChnName=function(){var e=[];if(this.queryVehicleChannels)for(var t=0;t<this.queryVehicleChannels.length;t++)1==this.queryVehicleChannels[t].devType&&e.push(this.queryVehicleChannels[t].name);return e.toString()},videoPlayback.prototype.getMaskChnArray=function(e){var t=[],a=[];if(this.queryVehicleChannels)for(var n=0;n<this.queryVehicleChannels.length;n++)e>>this.queryVehicleChannels[n].index&!0&&1==this.queryVehicleChannels[n].devType&&(t.push(this.queryVehicleChannels[n].index),a.push(this.queryVehicleChannels[n].name));var i={};return i.maskChns=t.toString(),i.maskChnNames=a.toString(),i},videoPlayback.prototype.getFileTime=function(e,t,a){var n="";if(0==Number(e)){var i=dateFormat2TimeString(this.queryParam.stm);n+=i.substring(0,4)}else n+=Number(e)+2e3;return n+="-",n+=t<10?"0"+t:t,n+="-",n+=a<10?"0"+a:a,n},videoPlayback.prototype.getColumnTitle=function(e){return'<span title="'+e+'">'+e+"</span>"},videoPlayback.prototype.initVideoFileTable=function(){var e=this,t=rootParent.lang.plate_number;rootParent.myUserRole&&rootParent.myUserRole.isPolice()&&(t=rootParent.lang.terminalDevice),this.videoFileTable=$("#videoFileTable").flexigrid({url:"",dataType:"json",colModel:[{display:rootParent.lang.operator,name:"operator",width:180,sortable:!1,align:"center"},{display:rootParent.lang.index,name:"fileIndex",width:40,sortable:!1,align:"center"},{display:rootParent.lang.report_date,name:"fileTime",width:200,sortable:!1,align:"center"},{display:rootParent.lang.label_type,name:"videoType",width:80,sortable:!1,align:"center"},{display:t,name:"vehiIdno",width:150,sortable:!1,align:"center"},{display:rootParent.lang.alarm_channel,name:"vehiChn",width:60,sortable:!1,align:"center"},{display:rootParent.lang.fileLocation,name:"location",width:80,sortable:!1,align:"center"},{display:rootParent.lang.alarm_record_size+"(MB)",name:"fileSize",width:100,sortable:!1,align:"center"},{display:rootParent.lang.file,name:"fileSrc",width:350,sortable:!1,align:"center"},{display:rootParent.lang.armType1,name:"arm1",width:220,sortable:!1,align:"center"},{display:rootParent.lang.armType2,name:"arm2",width:220,sortable:!1,align:"center"},{display:rootParent.lang.mediaType,name:"res",width:80,sortable:!1,align:"center"},{display:rootParent.lang.streamType,name:"stream",width:80,sortable:!1,align:"center"},{display:rootParent.lang.storeType,name:"store",width:80,sortable:!1,align:"center"}],usepager:!1,autoload:!1,useRp:!1,singleSelect:!0,clickRowCenter:!1,onDoubleClick:function(t,a){e.doubleClickVideoFileRowProp(t,a)},rp:15,showTableToggleBtn:!0,showToggleBtn:!0,width:"auto",height:"auto",resizable:!1}),this.videoFileTable.flexSetFillCellFun(function(t,a,n,i){return e.fillVideoFileTable(t,a,n,i)})},videoPlayback.prototype.initVideoFileDowloadTable=function(){var e,t=this;this.videoFileDowloadTable=$("#videoFileDowloadTable").flexigrid((e={url:"StandardVideoTrackAction_queryDownLoadReplay.action",dataType:"json",colModel:[{display:rootParent.lang.operator,name:"operator",width:120,sortable:!1,align:"center"},{display:rootParent.lang.index,name:"index",width:40,sortable:!1,align:"center"},{display:rootParent.lang.device_number,name:"devIDNO",width:80,sortable:!1,align:"center"},{display:rootParent.lang.chnMask,name:"chnMask",width:80,sortable:!1,align:"center"},{display:rootParent.lang.fileBeginTime,name:"fileBegTime",width:120,sortable:!1,align:"center"},{display:rootParent.lang.fileEndTime,name:"fileEndTime",width:120,sortable:!1,align:"center"},{display:rootParent.lang.armType1,name:"arm1",width:350,sortable:!1,align:"center"},{display:rootParent.lang.armType2,name:"arm2",width:350,sortable:!1,align:"center"},{display:rootParent.lang.mediaType,name:"resourceType",width:100,sortable:!1,align:"center"},{display:rootParent.lang.streamType,name:"streamType",width:100,sortable:!1,align:"center"},{display:rootParent.lang.storeType,name:"storeType",width:100,sortable:!1,align:"center"},{display:rootParent.lang.uploadStatus,name:"taskStatus",width:100,sortable:!1,align:"center"},{display:rootParent.lang.uploadAddress,name:"upLoadPath",width:150,sortable:!1,align:"center"},{display:rootParent.lang.sequence,name:"sequence",width:150,sortable:!1,align:"center"}],usepager:!1,autoload:!1,useRp:!1,singleSelect:!0,clickRowCenter:!1,rp:15,showTableToggleBtn:!0,showToggleBtn:!0,width:"auto",height:"auto"},Object(E_bda09_0530_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["a"])(e,"showToggleBtn",!1),Object(E_bda09_0530_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["a"])(e,"onSubmit",!1),Object(E_bda09_0530_node_modules_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__["a"])(e,"resizable",!1),e)),this.videoFileDowloadTable.flexSetFillCellFun(function(e,a,n,i){return t.fillVideoFileDownLoadTable(e,a,n,i)})},videoPlayback.prototype.fillVideoFileTable=function(e,t,a,n){var i=e.colModel[a].name,o="";if("fileIndex"==i)o=t.id+1;else if("fileTime"==i)o=t.timeTitle;else if("videoType"==i){if(0==t.type)o=rootParent.lang.file_normal;else if(1==t.type){var r,l=rootParent.vehicleManager.getVehicle(t.vehiIdno),s=l.getVideoDevice();s&&s.getIoInName()&&(r=s.getIoInName().split(","));var d="";1==t.loc?(t.arm>>0&!0&&(d+=rootParent.lang.alarm_type_ungency_button),t.arm>>1&!0&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_overspeed),t.arm>>2&!0&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_low_speed),t.arm>>3&!0&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_shake),t.arm>>4&!0&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_temperator),t.arm>>5&!0&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_motion),t.arm>>6&!0&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_upsCut),t.arm>>7&!0&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_rollover),t.arm>>8&!0&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_fatigue),t.arm>>9&!0&&(""!=d&&(d+=";"),r&&r.length>=1?d+=r[0]:d+=rootParent.lang.alarm_type_io1),t.arm>>10&!0&&(""!=d&&(d+=";"),r&&r.length>=2?d+=r[1]:d+=rootParent.lang.alarm_type_io2),t.arm>>11&!0&&(""!=d&&(d+=";"),r&&r.length>=3?d+=r[2]:d+=rootParent.lang.alarm_type_io3),t.arm>>12&!0&&(""!=d&&(d+=";"),r&&r.length>=4?d+=r[3]:d+=rootParent.lang.alarm_type_io4),t.arm>>13&!0&&(""!=d&&(d+=";"),r&&r.length>=5?d+=r[4]:d+=rootParent.lang.alarm_type_io5),t.arm>>14&!0&&(""!=d&&(d+=";"),r&&r.length>=6?d+=r[5]:d+=rootParent.lang.alarm_type_io6),t.arm>>15&!0&&(""!=d&&(d+=";"),r&&r.length>=7?d+=r[6]:d+=rootParent.lang.alarm_type_io7),t.arm>>16&!0&&(""!=d&&(d+=";"),r&&r.length>=8?d+=r[7]:d+=rootParent.lang.alarm_type_io8)):(2==t.arm&&(d+=rootParent.lang.alarm_type_ungency_button),11==t.arm&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_overspeed),3==t.arm&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_shake),9==t.arm&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_temperator),15==t.arm&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_motion),49==t.arm&&(""!=d&&(d+=";"),d+=rootParent.lang.alarm_type_fatigue),19==t.arm&&(""!=d&&(d+=";"),r&&r.length>=1?d+=r[0]:d+=rootParent.lang.alarm_type_io1),20==t.arm&&(""!=d&&(d+=";"),r&&r.length>=2?d+=r[1]:d+=rootParent.lang.alarm_type_io2),21==t.arm&&(""!=d&&(d+=";"),r&&r.length>=3?d+=r[2]:d+=rootParent.lang.alarm_type_io3),22==t.arm&&(""!=d&&(d+=";"),r&&r.length>=4?d+=r[3]:d+=rootParent.lang.alarm_type_io4),23==t.arm&&(""!=d&&(d+=";"),r&&r.length>=5?d+=r[4]:d+=rootParent.lang.alarm_type_io5),24==t.arm&&(""!=d&&(d+=";"),r&&r.length>=6?d+=r[5]:d+=rootParent.lang.alarm_type_io6),25==t.arm&&(""!=d&&(d+=";"),r&&r.length>=7?d+=r[6]:d+=rootParent.lang.alarm_type_io7),26==t.arm&&(""!=d&&(d+=";"),r&&r.length>=8?d+=r[7]:d+=rootParent.lang.alarm_type_io8)),o=""!=d?d:rootParent.lang.monitor_vehiStatusAlarm}}else if("vehiIdno"==i)o=t.vehiIdno;else if("vehiChn"==i)o=t.chnName;else if("location"==i)1==t.loc?o=rootParent.lang.terminalDevice:2==t.loc?o=rootParent.lang.server_storage:4==t.loc&&(o=rootParent.lang.server_down);else if("fileSize"==i)o=(t.len/1024/1024).toFixed(3)+"MB";else if("fileSrc"==i)o=t.file;else if("res"==i)o=1==this.queryParam.ftp?"":getAvitemType(t.res);else if("stream"==i)o=1==this.queryParam.ftp?"":getStreamType(t.stream);else if("store"==i)o=getMemTypeType(t.store);else if("arm1"==i)o=formatArm1(t.arm1);else if("arm2"==i)o=formatArm2(t.arm2);else if("operator"==i)return 2==this.queryParam.ftp?(this.is1078||(1==t.loc?(t.isDirect&&(o+='<a class="downLoad" href="javascript:downloadVideoFile('+t["id"]+');" title="'+rootParent.lang.download+'"></a>'),o+='<a class="segDownLoad" href="javascript:downloadVideoFileSec(this,'+t["id"]+');" title="'+rootParent.lang.segmentDownload+'"></a>'):o+='<a class="downLoad" href="javascript:downloadVideoFile('+t["id"]+');" title="'+rootParent.lang.download+'"></a>'),o+='<a class="videoback" href="javascript:videoFileReplay(this,'+t["id"]+');" title="'+rootParent.lang.video_playback+'"></a>'):1==this.queryParam.ftp?o+='<a class="downLoad" href="javascript:downloadVideoFile('+t["id"]+');" title="'+rootParent.lang.download+'"></a>':5==this.queryParam.ftp&&(o+='<a class="downLoad" href="javascript:downloadVideoFile('+t["id"]+');" title="'+rootParent.lang.download+'"></a>'),o;return this.getColumnTitle(o)},videoPlayback.prototype.fillVideoFileDownLoadTable=function(e,t,a,n){var i=e.colModel[a].name,o="";if("index"==i)o=t.id+1;else if("devIDNO"==i)o=t.devIDNO;else if("chnMask"==i)o="CH"+(Number(t.chnMask)+1);else if("fileBegTime"==i)o=dateTime2TimeString(t.fileBegTime);else if("fileEndTime"==i)o=dateTime2TimeString(t.fileEndTime);else if("arm1"==i)o=formatArm1(t.arm1);else if("arm2"==i)o=formatArm2(t.arm2);else if("resourceType"==i)o=getAvitemType(t.resourceType);else if("streamType"==i)o=getStreamType(t.streamType);else if("storeType"==i)o=getMemTypeType(t.storeType);else if("taskStatus"==i)o=getStatus(t.taskStatus);else if("upLoadPath"==i)o=null==t.upLoadPath?"":t.upLoadPath;else if("sequence"==i)o=t.sequence;else if("operator"==i){if(null==t.upLoadPath||""==t.upLoadPath||3!=t.taskStatus&&4!=t.taskStatus){var r=0==t.taskStatus?"downLoad":"pause",l=0==t.taskStatus?rootParent.lang.continues:rootParent.lang.track_pause;2==t.taskStatus&&(r="downLoad",l=rootParent.lang.continues),o+='<a id="controllDownLoad'+t.id+'" class="'+r+'" href="javascript:controllDownLoad('+t["id"]+","+t["taskStatus"]+",'"+t["devIDNO"]+"',"+t["sequence"]+');" title="'+l+'"></a>',2!=t.taskStatus&&(o+='<a class="delete" href="javascript:chanelDownLoad('+t["id"]+","+t["taskStatus"]+",'"+t["devIDNO"]+"',"+t["sequence"]+');" title="'+rootParent.lang.cancel+'"></a>')}else 4==t.taskStatus&&(o+='<span class="view" onclick="javascript:getFtpUrl(\''+t["upLoadPath"]+'\')" title="'+rootParent.lang.view+'"></span>');return o}return this.getColumnTitle(o)},videoPlayback.prototype.changeDownload=function(){$("#video-upload").click(),this.getVideoDownLoad()},videoPlayback.prototype.getVideoDownLoad=function(){this.videoFileDowloadTable.flexClear();var e=$.trim($("#hidden-vehiIdnos").val()),t={},a=_getRootFrameElement().vehicleManager.getVehicle(e),n=a.getVideoDevice();t.vid=n.idno,t.loc=1;var i=dateFormat2TimeString(this.queryParam.stm),o=i.substring(0,4),r=i.substring(5,7),l=i.substring(8,10),s=$.trim($("#startTime").val()),d=$.trim($("#endTime").val()),c=o+"-"+r+"-"+l+" "+s,u=o+"-"+r+"-"+l+" "+d;t.stm=NewDate(c),t.etm=NewDate(u);var m=this,p="StandardVideoTrackAction_queryDownLoadReplay.action";setTimeout(function(){$.myajax.jsonPost(p,t,!1,function(e,t){t&&0==e.result&&m.videoFileDowloadTable.flexAppendRowJson(e.infos,!0)})},500)},videoPlayback.prototype.addTableData=function(e){var t=$("#videoFileDowloadTable").find(".sequence");$(t).each(function(t,a){var n=$(a).find("span").text();if(e.p1==n){var i=0==e.p2?4:3;modifyRowData(a,".taskStatus",getStatus(i));var o="",r=$(a).siblings(".upLoadPath").find("span").text();0==e.p2&&(o='<span class="view" onclick="javascript:getFtpUrl(\''+r+'\')" title="'+rootParent.lang.view+'"></span>'),modifyRowHtml(a,".operator",o)}})},videoPlayback.prototype.doubleClickVideoFileRowProp=function(e,t){var a=$.trim($(e).attr("data-id")),n=this.videoFileList.get(Number(a));if(1==this.queryParam.ftp)$("#dm_video #framePreview").css("visibility","hidden"),$("#dm_photo").height($("#dm_video").height()),$("#dm_photo").css("top",-$("#dm_video").height()),$("#dm_photo").show(),$("#dm_photo img").attr("src",n.DownUrl);else if($("#dm_video #framePreview").css("visibility","visible"),$("#dm_photo").hide(),null!=n)if(n.chnMask>0||98==n.chn)this.addVideoFileChn(e,n,"videoFileReplayChn",t);else{var i=n.vehiIdno+" - "+this.getChnName(n.chn)+" - "+n.timeTitle;this.doReplayVehicleServer(n,0,0,i)}},videoPlayback.prototype.checkSearchParam=function(){var e=$.trim($("#hidden-vehiIdnos").val()),t=rootParent.lang.selectPoliceFirst;if(null==e||""==e)return $.dialog.tips(t,2),!1;var a=$("#datepicker").datepicker("getDate"),n=$.trim($("input[name='wjwz']:checked").val());if(null==n||""==n)return $.dialog.tips(rootParent.lang.ErrorFileLocation,2),!1;var i=null,o=rootParent.vehicleManager.getVehicle(e.toString());if(!o.isSupportVideoReplay())return $.dialog.tips(rootParent.lang.videoForbidden,1),!1;var r=o.getVideoDevice();if(null==r)return $.dialog.tips(rootParent.lang.NullVideoDevice,2),!1;if(!r.isAccOpen()&&r.isJT808Protocol()&&$.dialog.tips(rootParent.lang.acc_status_close,1),i=r.getIdno(),!this.is1078){var l=$.trim($("input[name='wjlx']:checked").val());if(null==l||""==l)return $.dialog.tips(rootParent.lang.NullFileType,2),!1;var s=$.trim($("input[name='lxlx']:checked").val());if(null==s)return $.dialog.tips(rootParent.lang.NullVideoType,2),!1}var d={};d.did=i,d.loc=n,this.queryPreData=d;var c={};return c.did=1==n?i:e,c.loc=n,c.stm=a,this.is1078?null!=d.loc&&1!=d.loc?(c.ftp=$.trim($("input[name='wjlx']:checked").val()),c.vtp=$.trim($("input[name='lxlx']:checked").val()),c.res=0,c.stream=-1,c.store=0):(c.ftp=2,c.vtp=-1,c.res=$("#hidden-videoType").val(),c.stream=$(".mllx-video:checked").val(),c.store=$('input[name="slx"]:checked').val()):(c.ftp=l,c.vtp=s),c.chn=$.trim($("#vehiChn").val()),c.label=$.trim($("#taskTag").val()),-1==c.chn||r.isChannelStatus(c.chn)?(this.queryParam=c,this.queryVehicle=rootParent.vehicleManager.getVehicle(e.toString()),this.queryVehicleChannels=this.queryVehicle.getVehicleChannel(),!0):($.dialog.tips(rootParent.lang.channelDisabled,1),!1)},videoPlayback.prototype.disableForm=function(e){this.isSearching=e,diableInput("#combox-vehiIdnos",e,!0),disableButton("#combox-vehiIdnos",e),diableInput("#combox-vehType",e,!0),disableButton("#combox-vehType",e),diableInput("#wjwz-device",e,!0),disableButton("#wjwz-device",e),diableInput("#wjwz-storage",e,!0),disableButton("#wjwz-storage",e),diableInput("#wjwz-download",e,!0),disableButton("#wjwz-download",e),diableInput("#wjlx-video",e,!0),disableButton("#wjlx-video",e),diableInput("#lxlx-normal",e,!0),disableButton("#lxlx-normals",e),diableInput("#lxlx-alarm",e,!0),disableButton("#lxlx-alarm",e),diableInput("#lxlx-all",e,!0),disableButton("#lxlx-all",e),diableInput("#taskTag",e,!0),e?($("#btn_serach").text(rootParent.lang.search_stop),$("#datepicker").datepicker("disable"),$(".car_select .more_car").unbind("click")):($("#btn_serach").text(rootParent.lang.btnSearch),$("#datepicker").datepicker("enable"),"function"==typeof queryMoreVehicle&&$(".car_select .more_car").on("click",queryMoreVehicle))},videoPlayback.prototype.doAjaxSubmit=function(e,t,a,n){var i=this,o=$.post(e,{json:JSON.stringify(t)},function(e,t){if("timeout"==t)"function"==typeof showDialogErrorMessage&&showDialogErrorMessage(3),a&&i.disableForm(!1);else if("error"==t)"function"==typeof showDialogErrorMessage&&showDialogErrorMessage(1),a&&i.disableForm(!1);else if("success"==t)if(0==e.result){var o=e.server,r=[],l={};r.push(o.clientIp),r.push(o.lanip),r.push(o.clientIp2),r.push(o.clientIp3),l.port=o.clientPort,l.ip=getComServerIp(r),"function"==typeof n&&n(l)}else{var s="";"function"==typeof showDialogErrorMessage&&(s=showDialogErrorMessage(e.result,e.cmsserver)),null!=s&&""==s&&$.dialog.tips(rootParent.lang.errorGetServerInfo,2),a&&i.disableForm(!1)}else"function"==typeof showDialogErrorMessage&&showDialogErrorMessage(4),a&&i.disableForm(!1);$.myajax.showLoading(!1)},"json");return o},videoPlayback.prototype.doGetVehicleServer=function(){var e=this;this.ajaxVehicleServerObj=this.doAjaxSubmit("StandardVideoTrackAction_queryDeviceServer.action",this.queryPreData,!0,function(t){e.getVideoFileInfo(t)})},videoPlayback.prototype.processFileDay=function(e){e.yearMonthDay=dateFormat2DateString(this.queryParam.stm);var t=Number(e.yearMonthDay.substring(8,10)),a=Number(e.day),n=this.getFileTime(e.year,e.mon,e.day);dateCompareStrDateRange(e.yearMonthDay,n,1)&&dateCompareStrDateRange(n,e.yearMonthDay,1)?(this.loadTimeLine=!0,a<t||1==t&&a<=31&&a>=28?(e.relBeg=0,e.relEnd=Number(e.end)-86400,e.beginDate=n+" "+this.videoTimeTable.second2ShortHourEx(e.beg),e.endDate=dateFormat2DateString(dateGetNextMulDay(dateStrLongTime2Date(e.beginDate),1))+" "+this.videoTimeTable.second2ShortHourEx(e.relEnd),e.timeTitle=e.beginDate,1!=this.queryParam.ftp&&(e.timeTitle+=" - "+e.endDate)):a==t&&Number(e.end)>86400?(e.relBeg=e.beg,e.relEnd=86399,e.beginDate=n+" "+this.videoTimeTable.second2ShortHourEx(e.beg),e.endDate=dateFormat2DateString(dateGetNextMulDay(dateStrLongTime2Date(e.beginDate),1))+" "+this.videoTimeTable.second2ShortHourEx(Number(e.end)-86400),e.timeTitle=e.beginDate,1!=this.queryParam.ftp&&(e.timeTitle+=" - "+e.endDate)):(e.relBeg=e.beg,e.relEnd=e.end,e.beginDate=n+" "+this.videoTimeTable.second2ShortHourEx(e.beg),e.endDate=n+" "+this.videoTimeTable.second2ShortHourEx(e.end),e.timeTitle=e.beginDate,1!=this.queryParam.ftp&&(e.timeTitle+=" - "+this.videoTimeTable.second2ShortHourEx(e.end)))):(this.loadTimeLine=!1,e.relBeg=e.beg,e.relEnd=e.end,e.beginDate=n+" "+this.videoTimeTable.second2ShortHourEx(e.beg),e.endDate=n+" "+this.videoTimeTable.second2ShortHourEx(e.end),e.timeTitle=e.beginDate,1!=this.queryParam.ftp&&(e.timeTitle+=" - "+this.videoTimeTable.second2ShortHourEx(e.end)))},videoPlayback.prototype.addTimeTableVideoChn=function(){if(this.addTimeTableData.length>0&&this.loadTimeLine){var e=this;this.videoTimeTable.addVideoChn(this.addTimeTableData,this.queryVehicleChannels,this.queryParam.chn,function(t,a,n,i){e.doClickVideoChnTd(t,a,n,i)})}},videoPlayback.prototype.getVideoFileInfo=function(){if(this.isSearching){var strStm=dateFormat2TimeString(this.queryParam.stm),year=strStm.substring(0,4),month=strStm.substring(5,7),day=strStm.substring(8,10),stmDaily=$.trim($("#startTime").val()),etmDaily=$.trim($("#endTime").val()),stm=shortHour2Second(stmDaily),etm=shortHour2Second(etmDaily);if(stm>=etm)return $.dialog.tips(rootParent.lang.vehicle_alarmaction_timeunvalid,1),void this.disableForm(!1);var data={},arm=$("#hidden-armType1").val(),armType1=[],armType2=[];if("undefined"!=arm&&""!=arm&&null!=arm)for(var armType=arm.split(","),j=0,len=armType.length;j<len;j++){var type1=armType[j].split("_");1==type1[0]?armType1.push(parseInt(type1[1])):armType2.push(parseInt(type1[1]))}armType1=replaceAry(armType1),armType2=replaceAry(armType2);var videoPlay_=this,jsession=GetCookie("JSESSIONID"),action="StandardTTSAction_getVideoFileInfo.action";data.did=this.queryParam.did,this.is1078?data.downType=8:data.downType=2,data.loc=this.queryParam.loc,data.chn=this.queryParam.chn,data.year=year,data.mon=month,data.day=day,this.is1078?null!=data.loc&&1==data.loc?(data.fileattr=2,data.rectype=-1):(data.fileattr=this.queryParam.ftp||2,data.rectype=this.queryParam.vtp||-1):(data.fileattr=this.queryParam.ftp,data.rectype=this.queryParam.vtp),data.beg=stm,data.end=etm,data.jsession=jsession,2==data.fileattr?(data.arm1=eval(armType1.join("+"))||0,data.arm2=eval(armType2.join("+"))||0,data.res=this.queryParam.res||0,data.stream=this.queryParam.stream||-1,data.store=this.queryParam.store||0):(data.arm1=0,data.arm2=0,data.res=0,data.stream=-1,data.store=0),1!=this.queryParam.loc&&""!=this.queryParam.label&&(data.label=this.queryParam.label);var videoPlay_=this;this.ajaxVehicleServerObj=$.ajax({type:"post",url:action,timeout:12e4,data:{json:encodeURIComponent(JSON.stringify(data))},dataType:"json",success:function(e){videoPlay_.addVideoFileInfo(e)},error:function(e,t,a){"timeout"==a&&$.dialog.tips(rootParent.lang.errorGetVideoFile,2),videoPlay_.disableForm(!1)}})}},videoPlayback.prototype.doQueryVideo=function(){if(this.isSearching)return null!=this.ajaxVehicleServerObj&&this.ajaxVehicleServerObj.abort(),void this.disableForm(!1);this.disableForm(!0),this.checkSearchParam()?(this.videoTimeTable.clearVideoChn(),this.videoFileTable.flexClear(),this.videoFileList.clear(),this.getVideoDownLoad(),this.updateFtpDownLoadTable(),this.doGetVehicleServer()):this.disableForm(!1)},videoPlayback.prototype.updateFtpDownLoadTable=function(){var e=$("#hidden-vehiIdnos").val(),t=rootParent.vehicleManager.getVehicle(e.toString()),a=t.getVideoDevice().getStatus().is1078Device();this.is1078=!!a},videoPlayback.prototype.doDownloadVehicleServer=function(e){null!=this.ajaxDownloadVehicleServerObj&&this.ajaxDownloadVehicleServerObj.abort();var t={};1==e.loc?t.did=e.devIdno:t.did=e.vehiIdno,t.loc=e.loc,t.ftp=e.svr,this.ajaxDownloadVehicleServerObj=this.doDownloadVideoFileInfo(e)},videoPlayback.prototype.analyFileInfoServerIP=function(e){var t=[];return t.push(e.clientIp),t.push(e.lanip),t.push(e.clientIp2),t.push(e.clientIp3),getComServerIp(t)},videoPlayback.prototype.analyFileInfoAddress=function(e,t){var a=t.replace(e.clientIp,this.analyFileInfoServerIP(e));return a},videoPlayback.prototype.doDownloadVideoFileInfo=function(e){var t=e.file.split("/");1==t.length&&(t=e.file.split("\\"));var a=this.analyFileInfoAddress(e,e.DownUrl);if(t.length>1){var n=t[t.length-1].split(".").pop();if("picfile"==n){var i=t[t.length-1].replace("picfile","jpg");a+=i}else a+=t[t.length-1]}downloadFile(encodeURI(a))},videoPlayback.prototype.downloadVideoFile=function(e){var t=this.videoFileList.get(Number(e));null!=t&&this.doDownloadVehicleServer(t)},videoPlayback.prototype.downloadVideoFileSec=function(e,t){var a=this.videoFileList.get(Number(t));if(null!=a)if(a.chnMask>0||98==a.chn)this.addVideoFileChn(e,a,"downloadVideoFileSecChn");else{if(null==this.taskInfo){var n=this;this.taskInfo=$.dialog({id:"taskInfo",title:rootParent.lang.add+rootParent.lang.videoDownloadTask+" - "+a.vehiIdno+" - "+a.chnName,content:"url:VideoManagement/downloadTaskInfo.html?id="+t+"&chn="+a.chn,width:"450px",height:"250px",min:!0,max:!1,lock:!1,fixed:!1,resize:!1,close:function(){n.taskInfo=null,"undefined"!=typeof popTipsObject&&null!=popTipsObject&&popTipsObject.remove("taskInfo")}})}else{if(t!=this.oldSelSecId){var i=rootParent.lang.add+rootParent.lang.videoDownloadTask+" - "+a.vehiIdno+" - "+a.chnName;this.taskInfo.title(i),this.taskInfo.content&&"function"==typeof this.taskInfo.content.initFileInfo&&this.taskInfo.content.initFileInfo(t,a.chn)}this.taskInfo.show()}this.oldSelSecId=t,null!=popTipsObject&&popTipsObject.put("taskInfo",this.taskInfo),"function"==typeof hidePopTips&&hidePopTips("taskInfo")}},videoPlayback.prototype.downloadVideoFileSecChn=function(e,t){var a=this.videoFileList.get(Number(e));if(null!=a){if(null==this.taskInfo){var n=this;this.taskInfo=$.dialog({id:"taskInfo",title:rootParent.lang.add+"  "+rootParent.lang.videoDownloadTask+" - "+a.vehiIdno+" - "+this.getChnName(t),content:"url:VideoManagement/downloadTaskInfo.html?id="+e+"&chn="+t,width:"450px",height:"250px",min:!0,max:!1,lock:!1,fixed:!1,resize:!1,close:function(){n.taskInfo=null,"undefined"!=typeof popTipsObject&&null!=popTipsObject&&popTipsObject.remove("taskInfo")}})}else{if(e!=this.oldSelSecId||t!=this.oldSelSecChn){var i=rootParent.lang.add+"  "+rootParent.lang.videoDownloadTask+" - "+a.vehiIdno+" - "+this.getChnName(t);this.taskInfo.title(i),this.taskInfo.content&&"function"==typeof this.taskInfo.content.initFileInfo&&this.taskInfo.content.initFileInfo(e,t)}this.taskInfo.show()}this.oldSelSecId=e,this.oldSelSecChn=t}$("#vehicleChnTip").hide(),"undefined"!=typeof popTipsObject&&null!=popTipsObject&&popTipsObject.put("taskInfo",this.taskInfo),"function"==typeof hidePopTips&&hidePopTips("taskInfo")},videoPlayback.prototype.doReplayVehicleServer=function(e,t,a,n,i){this.doReplayVideoFileInfo(e,t,a,n,i)},videoPlayback.prototype.doReplayVideoFileInfoEx=function(e,t,a,n,i,o){var r={};1==e.loc?r.devIdno=e.devIdno:r.devIdno=e.vehiIdno,r.fileLoc=e.loc,r.fileSvr=e.svr,r.fileChn=e.chn,r.fileBeg=e.beg,r.fileEnd=e.end,r.playIfrm=0,r.playChn=t,r.playFile=e.file,r.playBeg=1e3*a,r.playEnd=0,r.downType=5;var l=new httpHandler;l.httpMethod="get",l.cmdCode=1,l.isGetStream=1,l.server=3,r.httpHandler=l,$.myajax.sendHttpRedirect(r,l,function(e){var t=$.base64.atob(e.info.data,!0);"undefined"!=typeof ttxVideo&&null!=ttxVideo&&(ttxVideo.setTvplayTitle(n),ttxVideo.startVideoReplay(n,t))}),"undefined"!=typeof ttxMap&&null!=ttxMap&&this.startPlayTrack(e,a,o)},videoPlayback.prototype.doReplayVideoFileInfo=function(e,t,a,n,i){if("undefined"!=typeof ttxMap&&null!=ttxMap&&this.startPlayTrack(e,a,i),"undefined"!=typeof ttxVideo&&null!=ttxVideo){ttxVideo.setTvplayTitle(n);var o=e.PlaybackUrl;(e.chnMask>0||98==e.chn)&&(o=o.replace("PLAYCHN=0","PLAYCHN="+t)),a&&a>0&&(o=o.replace("PLAYBEG=0","PLAYBEG="+1e3*a));var r=this.analyFileInfoAddress(e,o);ttxVideo.startVideoReplay(n,r)}},videoPlayback.prototype.videoFileReplayChn=function(e,t){var a=this.videoFileList.get(Number(e));if(null!=a){var n=a.vehiIdno+" - "+this.getChnName(t)+" - "+a.timeTitle;this.doReplayVehicleServer(a,t,0,n)}$("#vehicleChnTip").hide()},videoPlayback.prototype.addVideoFileChn=function(e,t,a,n){$("#vehicleChnTip ul").empty();var i="";if(t.chnMask>0)for(var o=t.maskChns.split(","),r=t.chnName.split(","),l=0;l<o.length;l++)i+='<li onclick="'+a+"("+t.id+","+o[l]+');"><span>'+r[l]+"</span></li>";else for(r=t.chnName.split(","),l=0;l<r.length;l++)i+='<li onclick="'+a+"("+t.id+","+l+');"><span>'+r[l]+"</span></li>";$("#vehicleChnTip ul").append(i),$("#vehicleChnTip").on("mouseleave",function(){$(this).hide()});var s=this.videoTimeTable.getLeft(e),d=this.videoTimeTable.getTop(e)-$("#vehicleChnTip").height()+$(e).height();$("#vehicleChnTip").css("width","44px"),$("#vehicleChnTip").css("top",d),null!=n&&(s=n.clientX-5),$("#vehicleChnTip").css("left",s),$("#vehicleChnTip").show()},videoPlayback.prototype.videoFileReplay=function(e,t){$("#dm_video #framePreview").css("visibility","visible"),$("#dm_photo").hide();var a=this.videoFileList.get(Number(t));if(null!=a)if(a.chnMask>0||98==a.chn)this.addVideoFileChn(e,a,"videoFileReplayChn");else{var n=a.vehiIdno+" - "+this.getChnName(a.chn)+" - "+a.timeTitle;this.doReplayVehicleServer(a,0,0,n)}},videoPlayback.prototype.doClickVideoChnTd=function(e,t,a,n){var i=this.videoFileList.get(Number(e));if(null!=i){n<=i.relBeg&&(n=i.relBeg),n>=i.relEnd&&(n=i.relEnd);var o=i.vehiIdno+" - "+this.getChnName(t)+" - "+i.yearMonthDay+" "+this.videoTimeTable.second2ShortHourEx(n)+" - "+this.videoTimeTable.second2ShortHourEx(i.relEnd);this.doReplayVehicleServer(i,a,n-i.relBeg,o,!0)}},videoPlayback.prototype.startPlayTrack=function(e,t,a){null!=this.trackPlayer.mapTrack&&this.trackPlayer.stopPlay(!0);var n=rootParent.vehicleManager.getVehicle(e.vehiIdno.toString()),i={};a?(i.begindate=e.yearMonthDay+" "+this.videoTimeTable.second2ShortHourEx(t+e.relBeg),i.enddate=e.yearMonthDay+" "+this.videoTimeTable.second2ShortHourEx(e.relEnd)):(i.begindate=e.beginDate,i.enddate=e.endDate),this.trackPlayer.startPlay(n,i,e,t,a)},videoPlayback.prototype.runVideoWindowTimer=function(){if(!this.trackPlayer.playFinished){var e=this;this.getVideoTimer=setTimeout(function(){if("undefined"!=typeof ttxVideo&&null!=ttxVideo){var t=ttxVideo.getVideoPlayTime();e.trackPlayer.showTrackInMapByTime(t,e),e.runVideoWindowTimer()}},200)}},videoPlayback.prototype.onReplayMsg=function(e){"start"==e?this.runVideoWindowTimer():"stop"==e&&null!=this.getVideoTimer&&clearTimeout(this.getVideoTimer)},videoPlayback.prototype.setDownloadTaskTag=function(e){var t=this.videoFileList.get(Number(e));if(null!=t){if(null==this.setTaskTagObj){var a=this;this.setTaskTagObj=$.dialog({id:"setTaskTag",title:rootParent.lang.set_up+rootParent.lang.downloadTaskTag+" - "+t.vehiIdno+" - "+t.chnName,content:"url:VideoManagement/setTaskTag.html?id="+e,width:"450px",height:"120px",min:!0,max:!1,lock:!1,fixed:!1,resize:!1,close:function(){a.setTaskTagObj=null,"undefined"!=typeof popTipsObject&&null!=popTipsObject&&popTipsObject.remove("setTaskTag")}})}else{if(this.oldSelTaskTagId!=e||this.oldSelLoc!=t.loc){var n=rootParent.lang.set_up+"  "+rootParent.lang.downloadTaskTag+" - "+t.vehiIdno+" - "+t.chnName;this.setTaskTagObj.title(n),this.setTaskTagObj.content&&"function"==typeof this.setTaskTagObj.content.initFileInfo&&this.setTaskTagObj.content.initFileInfo(e)}this.setTaskTagObj.show()}this.oldSelTaskTagId=e,this.oldSelLoc=t.loc,"undefined"!=typeof popTipsObject&&null!=popTipsObject&&popTipsObject.put("setTaskTag",this.setTaskTagObj),"undefined"!=typeof hidePopTips&&null!=hidePopTips&&hidePopTips("setTaskTag")}},videoPlayback.prototype.show1078Field=function(){this.is1078?$("#videoFile .arm1,#videoFile .arm2,#videoFile .res,#videoFile .stream,#videoFile .store").show():$("#videoFile .arm1,#videoFile .arm2,#videoFile .res,#videoFile .stream,#videoFile .store").hide()}}).call(this,__webpack_require__("1157"))},"336d":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAaCAYAAAD43n+tAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0QkJENUI1QjFBMjA2ODExODIyQURGMURFN0RDNjk1MSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpERkI3OTVGQTAwMjgxMUU0ODcwNjg0ODkyQzg3NTc2QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpERkI3OTVGOTAwMjgxMUU0ODcwNjg0ODkyQzg3NTc2QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUVEQUNGOUYxMDIwNjgxMTgyMkFFRjI1QjkzM0FFMzUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEJCRDVCNUIxQTIwNjgxMTgyMkFERjFERTdEQzY5NTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz65KH61AAAEPklEQVR42sxYTWwbRRT+1rteO/E63tjBbps0JdAfaoGgRK3U5kcCCQHtAVGpKL1wQDlUHPgR4hJVQaQgIS4gpEoc6AUhhQMgegEEB0QSqChNOVRKQglN0rhEdmrHsWPHP2ubNxvbmO1uYtde0id9mvF43s5+O9+8eTNcoVBAI+31i1d12z947vE72hxnPmJFkDBEuJD4+JW6x+e6L1yHGdbnib9DxauMy3jYOWzUb/ryt+yLpg8eedZe75hXXtoHC8yzNwhSkdRWZmvUoMIm/7kJLxJOEA4RPLU8mGalVG0hGOqaZqZUrVb7ccKXvbsdb5/t8c6zhpGJEH4JJAwl5yC8RXiZ1dkaC0eXEY2vIJfP4f8w3sLD5ZTRJnvBcZxun+9PPxB2N/EnqTp2O6ngmc/nVMlpZ6iD8A3hkVLD7ZUQIrGwWhdtdjhkN5pcbvCC9a5f2GrhINus6HLa0UkovfJaKoXpwBImZv5EZDVM7RzaWr1Gj2GK+ZrwGOFmqbFyDTGN/FBJhtnqWlT9So4WF2TfLkgeX11kmGXzBSyvZ3A5FMP4UhRKfkNtkt2Ow3u7cHT/g+WxjWxkIohQUmkNr+feO0eS0yP0PuEhrSOTWbPkhEAkrE1Sw+UVTGbwKxGrtIc7O9RSySmGfhOLCRwnmT09euPUz4FEu5bQHsKgrjxEEYJVRG51GRaeN2XN/J1I4xahZJLdVmtge15LaMAo4rF1o07/6LumBoKFeKoe92Nldv1zoxjrOv2EYcQprpf07O+mEgqnskYbtHFWMDW2Ee/9/X7tDPmP3vxK36kUNk0O2alcvnanZGwDQLt2Y/XgHrWKDfoO6/+3j1NLSLjUeXLbX35/q4jZaAb5QnWSw1y5j6iVXGTL0Sy86YRkuwUH3CJ4rmbXctwXKCCw8hphh15PlvqwdWTbe8hUMs2CBQuxLGUOVhz0iFVJrluU1XIy7FzSSo5lCE/pOeWUrLoPuQaGTCW0o1mEr1nAYlzBTqk6NUy2lxPbaa3kPmUxQ88pk97YH3jZazIhG2YiGUgih1g6D5tQk8THtITYqfGcbt6VyUDJZoqR25zQvcthQzshkytgdiWLQCyFwb5HN/Wh4wO+G+hiUI51OL4wyuUu6qXyybU4FJJedj3RcDI+ktoRb8t/2n6amcf5H69C4I2Pa8O9PrSRRAmfDfd6A3qE2M72AuF8pWOLJKuBIRFbRTR4C2vhIPKKUhcJdny4r0nEYSLSt1NWf6ubazaL32bncOn6X+pvlyRv9agbhDeruVN4kmXohB5GZpnORDFK5e+lAx5Jbn6ox3uC57ipkfEgKONWD3iGlyR/zE/hwP1+FqtPFQn6i2em7TZ2+BktfvCI9pJkszsFRoplpHeVlQ5272a3Pq8RPvxkcvGsUb98aEHNCyzePYbbKX3Y7b/GqtYafY3FNfqisRYz46LxHwEGACtFax5E0QyTAAAAAElFTkSuQmCC"},3977:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"d",function(){return r}),a.d(t,"a",function(){return s}),a.d(t,"e",function(){return d});a("28a5"),a("a481"),a("4917");function n(e){return e<=9?"0"+e:e}function i(e){var t=e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate());return t}function o(e,t){return new Date(Date.parse(e)+864e5*t)}function r(e){var t=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,a=e.match(t);if(null==a)return"";var n=new Date(a[1],a[3]-1,a[4],a[5],a[6],a[7]);return n}function l(e){var t=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,a=e.match(t);if(null==a)return"";var n=new Date(a[1],a[3]-1,a[4]);return n}function s(e,t,a){var n=l(e),i=l(t),o=i.getTime()-n.getTime();return!(o>1e3*a*60*60*24)}function d(e){return parseInt(e,10)}},"3f35":function(e,t,a){"use strict";var n=a("2c10"),i=a.n(n);i.a},4173:function(e,t){var a=1e3,n=60*a,i=60*n,o=24*i,r=365.25*o;function l(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var l=parseFloat(t[1]),s=(t[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return l*r;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*i;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function s(e){return e>=o?Math.round(e/o)+"d":e>=i?Math.round(e/i)+"h":e>=n?Math.round(e/n)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function d(e){return c(e,o,"day")||c(e,i,"hour")||c(e,n,"minute")||c(e,a,"second")||e+" ms"}function c(e,t,a){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+a:Math.ceil(e/t)+" "+a+"s"}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return l(e);if("number"===a&&!1===isNaN(e))return t.long?d(e):s(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},"66e8":function(e,t,a){"use strict";a.d(t,"j",function(){return i}),a.d(t,"g",function(){return o}),a.d(t,"i",function(){return r}),a.d(t,"a",function(){return l}),a.d(t,"f",function(){return s}),a.d(t,"e",function(){return d}),a.d(t,"b",function(){return c}),a.d(t,"k",function(){return u}),a.d(t,"c",function(){return m}),a.d(t,"h",function(){return p}),a.d(t,"d",function(){return h});var n=a("2ade");function i(e){return Object(n["a"])({url:"teams/select",method:"post",data:e})}function o(e){return Object(n["a"])({url:"persons/select",method:"post",data:e})}function r(e){return Object(n["a"])({url:"persons/selectByCondition",method:"post",data:e,headers:{"content-type":"application/json"}})}function l(e){return Object(n["a"])({url:"cars/select",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/map/routeByStatus",method:"post",data:e})}function d(e){return Object(n["a"])({url:"logs/invoke",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/file/exportExcel",method:"post",data:e,responseType:"arraybuffer",headers:{"content-type":"application/json"}})}function u(e){return Object(n["a"])({url:"/noapp/file/xxx/upload",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/file/importExcel",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/eoms/schedulings/queryTaskByIds",method:"post",data:e})}function h(e){return Object(n["a"])({url:"/file/importFile",method:"post",data:e})}},"681a":function(e,t,a){"use strict";var n=a("e4b5"),i=a.n(n);i.a},"6d1a":function(e,t,a){var n;function i(e){var a,n=0;for(a in e)n=(n<<5)-n+e.charCodeAt(a),n|=0;return t.colors[Math.abs(n)%t.colors.length]}function o(e){function a(){if(a.enabled){var e=a,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var r=new Array(arguments.length),l=0;l<r.length;l++)r[l]=arguments[l];r[0]=t.coerce(r[0]),"string"!==typeof r[0]&&r.unshift("%O");var s=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,function(a,n){if("%%"===a)return a;s++;var i=t.formatters[n];if("function"===typeof i){var o=r[s];a=i.call(e,o),r.splice(s,1),s--}return a}),t.formatArgs.call(e,r);var d=a.log||t.log||console.log.bind(console);d.apply(e,r)}}return a.namespace=e,a.enabled=t.enabled(e),a.useColors=t.useColors(),a.color=i(e),"function"===typeof t.init&&t.init(a),a}function r(e){t.save(e),t.names=[],t.skips=[];for(var a=("string"===typeof e?e:"").split(/[\s,]+/),n=a.length,i=0;i<n;i++)a[i]&&(e=a[i].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function l(){t.enable("")}function s(e){var a,n;for(a=0,n=t.skips.length;a<n;a++)if(t.skips[a].test(e))return!1;for(a=0,n=t.names.length;a<n;a++)if(t.names[a].test(e))return!0;return!1}function d(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o.debug=o["default"]=o,t.coerce=d,t.disable=l,t.enable=r,t.enabled=s,t.humanize=a("4173"),t.names=[],t.skips=[],t.formatters={}},7242:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return i});a("28a5"),a("7f7f"),a("7514");var n=a("3977");function i(){this.rootId=null,this.orglength=0,this.maxlength=0}i.prototype.setRootId=function(e){this.rootId=document.getElementById(e),console.log(e)},i.prototype.initialize=function(){this.initTimeline(),this.addMouseEvent()},i.prototype.initTimeline=function(){e(this.rootId).empty(),e(this.rootId).css("position","relative"),e(this.rootId).css("padding","0px 5px");var t=document.createElement("div");t.className="flexigrid";var a=document.createElement("div");a.className="tl-content",e(a).append('<div class="tl-content-table"></div>'),e(t).append(a);var i=document.createElement("div");i.className="tl-timeline";var o=document.createElement("div");o.className="tl-timeline-table";var r=document.createElement("div");r.className="tl-timeline-tr1",e(r).addClass("tl-timeline-tr");var l=document.createElement("div");l.className="tl-timeline-tr2",e(l).addClass("tl-timeline-tr");for(var s=["00:00","02:00","04:00","06:00","08:00","10:00","12:00","14:00","16:00","18:00","20:00","22:00","24:00"],d=0;d<24;d++)e(r).append('<div class="tl-timeline-td"></div>');for(d=0;d<12;d++)0==d?e(l).append('<div class="tl-timeline-td"><span style="margin-left: 0px;">'+s[d]+"</span></div>"):11==d?e(l).append('<div class="tl-timeline-td"><span>'+s[d]+'</span><span style="float: right;">'+s[d+1]+"</span></div>"):e(l).append('<div class="tl-timeline-td"><span>'+s[d]+"</span></div>");e(o).append(r),e(o).append(l),e(i).append(o),e(t).append(i);var c=document.createElement("div");c.className="tl-line",e(t).append(c);var u=document.createElement("div");u.className="tl_tip",e(u).append('<span class="tl-tip-chn" style="margin-right:5px;"></span><span class="tl-tip-time"></span>'),e(t).append(u),e(this.rootId).append(t),this.orglength=e(t).width();var m=Object(n["e"])(this.orglength/24);e(".tl-timeline-td",r).css("width",m-1),e(".tl-timeline-td",l).css("width",2*m),this.maxlength=24*m,e(t).css("width",this.maxlength+2),e(i).css("width",this.maxlength+2),e(t).css("height",e(this.rootId).height()),e(t).css("padding-left",Object(n["e"])((this.orglength-this.maxlength)/2)+"px"),e(t).css("padding-right",Object(n["e"])((this.orglength-this.maxlength)/2)+"px"),e(i).css("padding-left",Object(n["e"])((this.orglength-this.maxlength)/2)+"px"),e(i).css("padding-right",Object(n["e"])((this.orglength-this.maxlength)/2)+"px")},i.prototype.addMouseEvent=function(){var t=this;e(".flexigrid",this.rootId).mousemove(function(a){var i=a.pageX,o=a.pageY,r=Object(n["e"])((t.orglength-t.maxlength)/2),l=i-t.getLeft(this)-r,s=o-t.getTop(this);l<=0&&(l=0),l>=t.maxlength&&(l=t.maxlength),e(this).find(".tl-line").height(e(this).height()),e(this).find(".tl-line").css("left",l+r);var d=l;d>=t.maxlength-e(".tl_tip").width()&&(d=t.maxlength-e(".tl_tip").width()),s-=20,s<=0&&(s=0),s>=e(this).height()-22&&(s=e(this).height()-22),e(this).find(".tl_tip").css("left",d+r),e(this).find(".tl_tip").css("top",s);var c=Object(n["e"])(t.getSecond(l)),u=t.second2ShortHourEx(c);e(this).find(".tl_tip .tl-tip-time").html(u),e(this).find(".tl_tip .tl-tip-time").attr("data-time",c)}),e(".tl-content .tl-content-tr",this.rootId).mousemove(function(t){e(".tl-tip-chn",".tl_tip").text(e(this).attr("data-chn"))}),e(".tl-timeline",this.rootId).mousemove(function(t){e(".tl-tip-chn",".tl_tip").text("")})},i.prototype.getChnName=function(e,t){if(null!=e&&null!=t)for(var a=0;a<e.length;a++)if(t==e[a].index)return e[a].name;return""},i.prototype.addVideoChnTr=function(t){for(var a=0;a<t.length;a++){var n=document.createElement("div");n.className="tl-content-tr",e(n).addClass("tl-content-tr"+a);var i=this.getChnName(t,a);e(n).attr("data-chn",i),e(n).append('<div class="tl-content-tr-chn">'+i+"</div>"),e(".tl-content-table").append(n)}},i.prototype.addVideoChnTdClickEvent=function(t,a,n,i){var o=this;e(t).on("dblclick",function(){var t=e(this).attr("data-id"),r=e(o.rootId).find(".tl_tip .tl-tip-time").attr("data-time");"function"==typeof i&&i(t,a,n,r)})},i.prototype.addVideoChnTd=function(t,a){var i=e(".tl-content-tr"+t.relChn),o=document.createElement("div");o.className="tl-content-td",e(o).attr("data-id",t.id);Object(n["e"])((this.orglength-this.maxlength)/2);var r=86400,l=t.relBeg/r*this.maxlength,s=t.relEnd/r*this.maxlength,d=s-l;d<1&&(d=1),e(o).css("left",l),e(o).css("width",d),0==t.type&&e(o).css("background-color","rgba(51, 153, 255, 0.5)"),t.chnMask>0||98==t.chn?this.addVideoChnTdClickEvent(o,t.relChn,t.relChn,a):this.addVideoChnTdClickEvent(o,t.relChn,0,a),i.length>0?e(i).append(o):(i=document.createElement("div"),i.className="tl-content-tr",e(i).addClass("tl-content-tr"+t.chn),e(i).attr("data-chn",t.chnName),e(i).append('<div class="tl-content-tr-chn">'+t.chnName+"</div>"),e(i).append(o),e(".tl-content-table").append(i))},i.prototype.addVideoChn=function(t,a,n,i){if("undefined"!=typeof t&&t.length>0){null!=a&&a.length>0&&this.addVideoChnTr(a);for(var o=0;o<t.length;o++){var r=t[o];if(r.chnMask>0)for(var l=r.maskChns.split(","),s=0;s<l.length;s++)-1!=n&&n!=l[s]||(r.relChn=l[s],this.addVideoChnTd(r,i));else if(98==r.chn)for(s=0;s<a.length;s++)-1!=n&&n!=s||(r.relChn=s,this.addVideoChnTd(r,i));else-1!=n&&n!=r.chn||(r.relChn=r.chn,this.addVideoChnTd(r,i))}this.dynamicChnTrHeight(),e(".tl-content .tl-content-tr",this.rootId).mousemove(function(t){e(".tl-tip-chn",".tl_tip").text(e(this).attr("data-chn"))})}},i.prototype.clearVideoChn=function(){e(".tl-content-table").empty()},i.prototype.hideVideoTimeline=function(t){t?e(".tl-timeline").hide():e(".tl-timeline").show()},i.prototype.dynamicChnTrHeight=function(){var t=e(".flexigrid",this.rootId).height()-e(".tl-timeline",this.rootId).height(),a=e(".tl-content-table .tl-content-tr").length;e(".tl-content-table .tl-content-tr").css("height",t/a),e(".tl-content-table .tl-content-tr").css("line-height",t/a);var i=Object(n["e"])((t/a-24)/2);i<0&&(i=0),e(".tl-content-table .tl-content-tr-chn").css("padding-top",i),e(".tl-content-table .tl-content-td").css("height",t/a),e(".tl-content-table .tl-content-td").css("line-height",t/a)},i.prototype.getTop=function(e){var t=0,a=e;while(null!=a&&a!=document.body)t+=a.offsetTop,a=a.offsetParent;while(null!=a&&e!=document.body)t-=e.scrollTop,e=e.parentElement;return t},i.prototype.getLeft=function(e){var t=0,a=e;while(null!=a&&a!=document.body)t+=a.offsetLeft,a=a.offsetParent;while(null!=e&&e!=document.body)t-=e.scrollLeft,e=e.parentElement;return t},i.prototype.getSecond=function(e){var t=86400,a=(Object(n["e"])(this.maxlength/24),e/this.maxlength),i=t*a;return i>=t&&(i=t),i},i.prototype.second2ShortHourEx=function(e){var t=Object(n["e"])(e/3600),a=t;t<10&&(a="0"+t);var i=Object(n["e"])(e%3600/60),o=i;i<10&&(o="0"+i);e=Object(n["e"])(e%60);var r=e;return e<10&&(r="0"+e),a+":"+o+":"+r}}).call(this,a("1157"))},7849:function(e,t,a){"use strict";(function(e){var n,i=a("bd86"),o=(a("456d"),a("2caf"),a("75fc")),r=(a("ac4d"),a("8a81"),a("8615"),a("c5f6"),a("55dd"),a("6b54"),a("87b3"),a("4f37"),a("34ef"),a("7514"),a("57e7"),a("5df3"),a("28a5"),a("7f7f"),a("ac6a"),a("f3e2"),a("a481"),a("6d67"),a("d25f"),a("333d")),l=a("bc3a"),s=a.n(l),d=a("39f6"),c=(a("68c0"),a("c745"),a("d561")),u=a.n(c),m=a("336d"),p=a.n(m),h=a("b78f"),f=a.n(h),g=a("04a0"),v=(a("f746"),a("ef66")),b=a.n(v),y=a("ad19"),_=a("69d9"),w=a("d941"),T=a("7242"),k=a("2d956"),C=a("3977"),P=(a("41cb"),a("66e8")),x=a("a2fc"),D=a("bc33"),O=a("d256"),N=(a("f2e8"),function(e){var t=new Date;e&&(t=new Date(e));var a=t.getFullYear(),n=t.getMonth()+1,i=n>9?n:"0"+n,o=t.getDate(),r=o>9?o:"0"+o;return"".concat(a,"-").concat(i,"-").concat(r)}),S=function(e,t,a){!isNaN(t)&&t<0||isNaN(t)?a(new Error("请输入正确的网点半径")):t||0===t?a():a(new Error("请输入网点半径"))};t["a"]={data:function(){var e=this,t=function(t,a,n){var i=e.mdForm.imeiCar,o=e.mdForm.imeiGun;!i&&o.length<1?n(new Error("请选择需要查询的设备")):n()};return{tRCarToGun:[],tRGunToCar:[],sidePop:!1,lTabActive:!0,winChange:"winC-0",winChange1:"winC-0",mdClickPointCollection:{},pointDetails:{},carImg:p.a,gunImg:u.a,mdPointCollection:[],mdBPointCollection:[],imei2name:{},mdContext:[],mdContext_list:[],dataCar:[],propsCar:{emitPath:!1,expandTrigger:"hover"},gunPoper:!1,carPoper:!1,bindGunData:[],bindCarData:[],bindCarNum:"",bindGunNum:[],copyGunNum:[],dataGun:[],propsGun:{expandTrigger:"hover",multiple:!0},mdLoad:!1,shPoint:!1,mdForm:{imeiCar:"",imeiGun:[],date:N(),timeS:"00:00:00",timeE:"23:59:59"},limitmdFormGun:[],mdRule:{imeiCar:[{validator:t,trigger:"change"}],imeiGun:[{validator:t,trigger:"change"}],date:[{required:!0,message:"请选择日期",trigger:"change"}],timeS:[{required:!0,message:"请选择开始时间",trigger:"change"}],timeE:[{required:!0,message:"请选择结束时间",trigger:"change"}]},toshow:!1,filterText:"",bottomTableHeight:0,videoList:[],myDis:void 0,listLoading:!1,activeHeight:!1,tableKey:0,dialogSelectCar:!1,showLeft:!0,windowHeight:0,isTrajectory:!0,trackSettingBoxVisible:!0,data:[],defaultProps:{children:"children",label:"name"},options:[],value:"",hiddenVideo:!0,map:void 0,playingStatusArray:[],selectIndex:0,isInitFinished:!1,divId:"video",initFlashNumber:0,serverIp:"14.21.51.131",serverPort:"6605",activeName:"first",activeName1:"first",upOrDown:"up",selectCarNumber:"",carNumber:"",videoDate:N(),videoStartTime:"00:00:00",videoEndTime:"23:59:59",fileLocation:1,fileType:2,videoType:-1,form:{devIdno:"",date:N(),timeS:"00:00:00",timeE:"23:59:59",toMap:2},findTrajectoryCar:!1,videoTime:0,timeout:"",dialogVisibleDownload:!1,downloadTitle:"",downloadList:{downloadStartTime:"",downloadEndTime:"",downloadTag:""},downloadRow:{},markerStart:new BMap.Icon(f.a,new BMap.Size(26,41),{anchor:new BMap.Size(13,40),imageOffset:new BMap.Size(-199,-139)}),markerEnd:new BMap.Icon(f.a,new BMap.Size(26,41),{anchor:new BMap.Size(13,40),imageOffset:new BMap.Size(-225,-139)}),times:0,len:0,cameraIndex:-1,cameraNum:0,videoPlayer:null,chns:[],sortedTeam:["一大队","二大队","工行大队","英吉沙大队","莎车大队","泽普大队","叶城大队","伽师大队","岳普湖大队","麦盖提大队","巴楚大队","塔县大队","图木舒克市大队","未分组"],orglength:0,width:0,maxlength:0,rootId:null,power:2,company:"",videoLoading:!1,cancelRequest:null,chnArr:[{text:"CH01",value:"CH01"},{text:"CH02",value:"CH02"},{text:"CH03",value:"CH03"},{text:"CH04",value:"CH04"},{text:"CH05",value:"CH05"},{text:"CH06",value:"CH06"},{text:"CH07",value:"CH07"},{text:"CH08",value:"CH08"},{text:"CH09",value:"CH09"}],addNetworkrRules:{roadName:[{required:!0,message:"请输入网点名称",trigger:"blur"}],networkSearchVal:[{required:!0,message:"请输入网点地址",trigger:"blur"}],networkVal:[{required:!0,message:"请选择网点类型",trigger:"change"}],bank:[{required:!0,message:"请选择银行",trigger:"change"}],needToReport:[{required:!0,message:"请选择是否报站",trigger:"change"}],radius:[{required:!0,trigger:"blur",type:"number",validator:S}]},addNetworkVisible:!1,addNetworkTemp:{roadName:"",networkSearchVal:"",networkVal:"",radius:50,bank:"",sendTime:"",receiveTime:"",needToReport:2},reportOptions:[{id:1,name:"不报站"},{id:2,name:"报站"}],networkTypeOptions:[{type:1,option:"营业厅"},{type:2,option:"ATM"},{type:4,option:"收款点"},{type:6,option:"终点收工点"}],bankOptions:[],exportLoading:!1,RNoptions:[],RNprops:{multiple:!0},RNvalue:[],mapvLayer:null,mapvLayer1:null,networkOptions:[],startMarkers:[],endMarkers:[],solidPolylines:[],dotPolylines:[],richMarkers:[],marks:[],trackType:"车辆定位",carTodayNetworks:{},networkObj:{}}},components:{myTree:d["a"],SelectTree:w["a"],Pagination:r["a"],scriptLink:{render:function(e){return e("script",{attrs:{type:"text/javascript",src:"https://api.map.baidu.com/library/DistanceTool/1.2/src/DistanceTool_min.js"}})}}},created:function(){this.windowHeight=e(window).height(),this.power=JSON.parse(sessionStorage.getItem("userInfo")).Power,this.company=JSON.parse(sessionStorage.getItem("userInfo")).company,this.getSelect(),this.getRouteAndNetwork(),this.getNetworkList()},props:["mediaNone"],mounted:function(){if(this.videoPlayer=new k["a"],this.videoPlayer.initialize(),this.rootId=document.getElementById("videoTime"),this.windowHeight=e(window).height(),this.getTeamAndCarList(),this.getTeamAndGunList(),this.initMap(),this.divId=this.$refs.video.id,sessionStorage.historyCode){var t=JSON.parse(sessionStorage.historyCode);2==t.dType?this.mdForm.imeiCar=t.label:this.mdForm.imeiGun.push(t.devno),this.mdSearch("mdForm")}},watch:{filterText:function(e){this.$refs.tree.filter(e)},"$store.state.realTimeMonitor.newSocketData":{handler:function(t,a){"{}"!=JSON.stringify(t)&&(1e4==t.status?e(".p"+t.message.imei).css("color","#3C7EFE"):10001==t.status&&e(".p"+t.message.imei).css("color","#333333"))}}},computed:{myTimeRange:{get:function(){return[1*this.mdForm.timeS.slice(0,2),1*this.mdForm.timeE.slice(0,2)]},set:function(e){var t=e.map(function(e){return e<10?"0"+e:e});this.mdForm.timeS=this.mdForm.timeS.replace(/.{2}/,t[0]),this.mdForm.timeE=this.mdForm.timeE.replace(/.{2}/,t[1])}}},methods:(n={getTaskList:function(){var e=this;this.carTodayNetworks={},Object(O["F"])({date:new Date(this.mdForm.date.replace(/-/g,"/")).getTime(),status:[1,3]}).then(function(t){0==t.status?(t.data&&t.data.forEach(function(t,a){e.carTodayNetworks.hasOwnProperty(t.carLicenseNo)?e.carTodayNetworks[t.carLicenseNo].push(t.destinationId):e.carTodayNetworks[t.carLicenseNo]=[t.destinationId]}),e.addNetworkMarker()):_t.$message.error(t.msg)}).finally(function(){})},getNetworkList:function(){var e=this,t=this;Object(D["g"])({type:-1,page:1,limit:1e3}).then(function(a){0==a.status?(e.networkObj={},a.data.records&&a.data.records.forEach(function(t,a){e.networkObj[t.id]={geom:t.geom,id:t.id,name:t.name}})):t.$message.error(a.msg)}).finally(function(){})},addNetworkMarker:function(){this.mapvLayer&&this.mapvLayer.destroy(),this.mapvLayer1&&this.mapvLayer1.destroy();var e=[],t=[],a=[],n=[];this.carTodayNetworks.hasOwnProperty(this.mdForm.imeiCar)&&(n=this.carTodayNetworks[this.mdForm.imeiCar]);for(var i=0;i<n.length;i++)this.networkObj.hasOwnProperty(n[i])&&(e=this.networkObj[n[i]].geom.slice(6,-1).split(" "),t.push({geometry:{type:"Point",coordinates:[e[0],e[1]]},text:this.networkObj[n[i]].name}),a.push({geometry:{type:"Point",coordinates:[e[0],e[1]]}}));var o=new mapv.DataSet(t),r=new mapv.DataSet(a),l={draw:"text",avoid:!0,size:12,font:"18px Arial",fillStyle:"#31478F",shadowColor:"#31478F",shadowBlur:10};this.mapvLayer=new mapv.baiduMapLayer(this.map,o,l);var s={fillStyle:"rgba(255, 50, 50, 1)",shadowColor:"rgba(255, 50, 50, 1)",shadowBlur:30,globalCompositeOperation:"lighter",size:5,draw:"simple"};this.mapvLayer1=new mapv.baiduMapLayer(this.map,r,s)},selectChange:function(){this.mapvLayer&&this.mapvLayer.destroy(),this.mapvLayer1&&this.mapvLayer1.destroy();for(var e=[],t=[],a=[],n=0;n<this.RNvalue.length;n++)for(var i=0;i<this.networkOptions.length;i++)this.RNvalue[n][1].split("-")[1]==this.networkOptions[i].id&&(e=this.networkOptions[i].geom.slice(6,-1).split(" "),t.push({geometry:{type:"Point",coordinates:[e[0],e[1]]},text:this.networkOptions[i].name}),a.push({geometry:{type:"Point",coordinates:[e[0],e[1]]}}));var o=new mapv.DataSet(t),r=new mapv.DataSet(a),l={draw:"text",avoid:!0,size:12,font:"18px Arial",fillStyle:"#31478F",shadowColor:"#31478F",shadowBlur:10};this.mapvLayer=new mapv.baiduMapLayer(this.map,o,l);var s={fillStyle:"rgba(255, 50, 50, 1)",shadowColor:"rgba(255, 50, 50, 1)",shadowBlur:30,globalCompositeOperation:"lighter",size:5,draw:"simple"};this.mapvLayer1=new mapv.baiduMapLayer(this.map,r,s)},getRouteAndNetwork:function(){var e=this;this.RNoptions=[];var t=[],a=new Promise(function(e,t){Object(P["f"])().then(function(t){null==t.data&&(t.data=[]),e(t.data)}).catch(function(){t()})}),n=new Promise(function(t,a){Object(D["b"])({type:-1}).then(function(a){null===a.data.records&&(a.data=[]),e.networkOptions=a.data,t(a.data)}).catch(function(){a()})});Promise.all([a,n]).then(function(a){a[0].forEach(function(n,i){var o={value:n.id,label:n.name,children:[]};a[1].forEach(function(e,a){-1!==JSON.parse(n.crosslobby).indexOf(e.id)&&(o.children.push({value:n.id+"-"+e.id,label:e.name}),-1==t.indexOf(e.id)&&t.push(e.id))}),e.RNoptions.push(o)});var n=[];a[1].forEach(function(e,a){-1==t.indexOf(e.id)&&n.push({value:"0-"+e.id,label:e.name})}),n.length&&e.RNoptions.push({value:0,label:"未分配路线网点",children:n})})},handleAddNetwork:function(e){var t=this;this.addNetworkVisible=!0,this.addNetworkTemp.lng=e.point.lng,this.addNetworkTemp.lat=e.point.lat,this.handleAddress(e.point).then(function(e){t.addNetworkTemp.networkSearchVal=e})},getSelect:function(){var e=this,t=this;Object(x["d"])().then(function(a){if(0==a.status){if(null==a.data)return;t.bankOptions=a.data}else null==a.data&&(e.bankOptions=[]),e.$message.error(a.msg)})},addNetworkSubmit:function(){var e=this;this.$refs["addNetworkTemp"].validate(function(t,a){if(t){var n=e,i={name:n.addNetworkTemp.roadName,address:n.addNetworkTemp.networkSearchVal,type:n.addNetworkTemp.networkVal,lng:n.addNetworkTemp.lng,lat:n.addNetworkTemp.lat,radius:n.addNetworkTemp.radius,needToReport:n.addNetworkTemp.needToReport};n.addNetworkTemp.sendTime&&(i.sendTime=n.addNetworkTemp.sendTime),n.addNetworkTemp.receiveTime&&(i.receiveTime=n.addNetworkTemp.receiveTime);var o={};o=e.bankOptions.find(function(e){return e.id===n.addNetworkTemp.bank});var r="";r=o.name,i.parentBankId=n.addNetworkTemp.bank,i.parentBankName=r,e.$refs["addNetworkTemp"].resetFields(),Object(D["a"])(i).then(function(e){e.success?(n.addNetworkVisible=!1,n.$message.success("添加成功"),n.addNetworkTemp={roadName:"",networkSearchVal:"",networkVal:"",radius:50,bank:"",sendTime:"",receiveTime:"",needToReport:2}):n.$message.error(e.msg)}).finally(function(){n.myLoading=!1})}})},exportExcel:function(){var e=this,t=this,a=new Date(t.mdForm.date.replace(/-/g,"/")+" "+t.mdForm.timeS).getTime(),n=new Date(t.mdForm.date.replace(/-/g,"/")+" "+t.mdForm.timeE).getTime();t.$refs["mdForm"].validate(function(i){i&&(e.exportLoading=!0,a>n?t.$message.warning("开始时间不得大于结束时间"):(t.$message.warning("正在导出，稍等哦"),Object(P["b"])({excelType:"1003",title:"车辆轨迹记录",carNo:t.mdForm.imeiCar,startTime:a,endTime:n}).then(function(t){try{var a=new TextDecoder("utf-8"),n=JSON.parse(a.decode(new Uint8Array(t)));e.$message({message:n.msg,type:"warning"})}catch(l){t.headers;var i="车辆轨迹记录.xls",o=new Blob([t],{type:"application/excel"}),r=document.createElement("a");r.href=window.URL.createObjectURL(o),r.download=i,r.click(),r.remove()}}).finally(function(){e.exportLoading=!1})))})},cancleSearch:function(){this.cancelRequest(),this.cancelRequest=null},filterTag:function(e,t){return this.countVideoChn(t)===e},filterNode:function(e,t,a){return e=e.trim(),!(e&&-1===t.name.indexOf(e)&&(!t.serialNo||-1===t.serialNo.indexOf(e)))||this.checkBelongToChooseNode(e,t,a)},checkBelongToChooseNode:function(e,t,a){var n=a.level;if(1===n)return!1;var i=a.parent,o=0;while(o<n-1){if(-1!==i.data.name.indexOf(e)||i.data.serialNo&&-1!==i.data.serialNo.indexOf(e))return!0;i=i.parent,o++}return!1},setHeightById:function(t,a){var n=this.windowHeight-a;e("#"+t).height(n+"px")},initMap:function(){var e=this;this.map=new BMap.Map("map",{enableMapClick:!1}),e.map.centerAndZoom("潮州",13),this.map.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]})),this.map.enableScrollWheelZoom(!0)},initPlayerExample:function(){var t=this;this.isInitFinished=!1,this.$nextTick(function(){var a=e("#videoBox").width(),n=e("#videoBox").height(),i={lang:"zh-cn"};ttxVideoAll.init(t.divId,a,n,i,"h5"),t.initFlash()})},initPlayer:function(){var t=this;this.initFlashNumber=0;for(var a=0;a<101;a++)this.playingStatusArray.push(!1);var n={allowFullscreen:"true",allowScriptAccess:"always",bgcolor:"#cccccc",wmode:"transparent"};this.isInitFinished=!1,this.$nextTick(function(){var a=e("#videoBox").width(),i=e("#videoBox").height();swfobject.embedSWF(b.a,t.divId,a,i,"11.0.0",null,null,n,null),t.initFlash()})},initFlash:function(){var e=this;if("undefined"==typeof swfobject||null==swfobject.getObjectById(this.divId)||"undefined"==typeof swfobject.getObjectById(this.divId).setWindowNum)setTimeout(this.initFlash,50);else{swfobject.getObjectById(this.divId).setLanguage("cn.xml"),swfobject.getObjectById(this.divId).setWindowNum(36);var t="1";swfobject.getObjectById(this.divId).setWindowNum(t),swfobject.getObjectById(this.divId).setServerInfo(e.serverIp,e.serverPort),this.isInitFinished=!0}},showVideo:function(){this.initPlayerExample()},showTrack:function(){this.hiddenVideo=!0,this.isTrajectory=!0,this.trackSettingBoxVisible=!0,this.hiddenBootomBox()},selectVideoCar:function(e){"car"==e.type&&(this.selectCarNumber=e.name,this.value=e.id)},selectTrailCar:function(e){"car"==e.type&&(this.selectCarNumber=e.name,this.form.devIdno=e.id)},doubleClickTreeNode:function(e){if("car"==e.type)this.selectCarNumber=e.name,this.carNumber=e.id,this.hiddenVideo=!0,this.cameraNum=e.children.length;else{if("camera"!=e.type)return;this.selectCarNumber=e.licenseNo+"(".concat(e.name,")"),this.carNumber=e.parentId+"(".concat(e.name,")"),this.cameraNum=e.total}var t=e.channelName,a=[];if(0!==this.cameraNum&&-1!==this.cameraNum){t=t.split(",");for(var n=0;n<t.length;n++)a.push({name:t[n],index:n});this.chns=a}this.dialogSelectCar=!1},getCarNumber:function(){this.carNumber=this.value,this.dialogSelectCar=!1;for(var e=0;e<this.options.length;e++)if(this.options[e].value==this.value){this.cameraNum=this.options[e].total;var t=this.options[e].channelName;t=t.split(",");for(var a=[],n=0;n<t.length;n++)a.push({name:t[n],index:n});this.chns=a;break}},getCarNumberTrail:function(){this.findTrajectoryCar=!1},fileBlur:function(e){var t=this;window.clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.$refs.tree.setCurrentKey(t.value),t.selectCarNumber=t.$refs.tree.getCurrentNode().name},500)},fileBlurTrack:function(){var e=this;window.clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.$refs.treeTrack.setCurrentKey(e.form.devIdno)},500)},handleClose:function(e){this.dialogSelectCar=!1},setMapAndVideoHeight:function(e){this.setHeightById("map",e),this.setHeightById("video",e),this.setHeightById("videoBox",e)},shwoBootomBox:function(t){this.setMapAndVideoHeight(360),this.setHeightById("bottomBox",this.windowHeight-360),e(".el-tabs__content").height(222),this.bottomTableHeight=173,null!=t&&(this.activeName=t),this.upOrDown="down",this.activeHeight=!1},hiddenBootomBox:function(){this.setMapAndVideoHeight(110),this.setHeightById("bottomBox",this.windowHeight-110),this.upOrDown="up",this.activeHeight=!1},maxBootomBox:function(){this.setMapAndVideoHeight(this.windowHeight),this.setHeightById("bottomBox",0),e(".el-tabs__content").height(e(window).height()-116),this.bottomTableHeight=e(window).height()-187,this.upOrDown="down",this.activeHeight=!0},search:function(){this.cancelRequest&&(this.cancelRequest(),this.cancelRequest=null),this.videoPlayer.initialize(),this.getCameraIndex(this.carNumber),this.carNumber?0!=this.cameraNum&&-1!=this.cameraNum?this.videoDate?this.getserver():this.$message.error("请先选择日期"):this.$message.error("此车不存在通道"):this.$message.error("请先选择车辆")},textfunctiong:function(e,t){0==this.activeHeight&&this.shwoBootomBox(e.name)},getserver:function(){-1!=this.carNumber.indexOf("(")?this.carNumber.split("(")[0]:this.carNumber;var e=this;e.getCar("14.21.51.131","8088")},getCar:function(e,t){var a=this,n=this,i=[],o=this.videoStartTime,r=this.videoEndTime,l=(this.videoDate.split("-")[0],this.putOffZero(this.videoDate.split("-")[1])),d=this.putOffZero(this.videoDate.split("-")[2]),c=this.shortHour2Second(o.toString()),u=this.shortHour2Second(r.toString()),m=null;m=-1!=this.carNumber.indexOf("(")?this.carNumber.split("(")[0]:this.carNumber,i.push({name:"jsession",value:sessionStorage.jsession}),i.push({name:"DevIDNO",value:m}),i.push({name:"LOC",value:this.fileLocation}),i.push({name:"CHN",value:this.cameraIndex}),i.push({name:"YEAR",value:this.videoDate.split("-")[0]}),i.push({name:"MON",value:l}),i.push({name:"DAY",value:d}),i.push({name:"RECTYPE",value:this.videoType}),i.push({name:"FILEATTR",value:this.fileType}),i.push({name:"BEG",value:c}),i.push({name:"END",value:u}),i.push({name:"ARM1",value:0}),i.push({name:"ARM2",value:0}),i.push({name:"RES",value:0}),i.push({name:"STREAM",value:0}),i.push({name:"STORE",value:0});for(var p="?",h=0;h<i.length;h++)h<i.length-1?p+=i[h].name+"="+i[h].value+"&":p+=i[h].name+"="+i[h].value;Object(g["e"])({url:"/proxy/StandardApiAction_getVideoFileInfo"+p},new s.a.CancelToken(function(e){a.cancelRequest=e})).then(function(e){a.cancelRequest=null;var t=e;if(0==t.result){if(!t.files)return void n.$message.error("无数据");n.videoList=t.files,n.videoList.sort(function(e,t){return e.beg>t.beg?1:-1});for(var i=0;i<n.videoList.length;i++)n.videoList[i].id=i,n.processFileDay(n.videoList[i],i);n.videoList[0];n.addVideoChn(n.videoList,n.chns,n.cameraIndex,function(e,t,a,i){n.doClickVideoChnTd(e,t,a,i)})}}).catch(function(e){a.cancelRequest=null})},processFileDay:function(e,t){e.yearMonthDay=this.videoDate;var a=Number(e.yearMonthDay.substring(8,10)),n=Number(e.day),i=this.getFileTime(e.year,e.mon,e.day);Object(C["a"])(e.yearMonthDay,i,1)&&Object(C["a"])(i,e.yearMonthDay,1)?n<a||1==a&&n<=31&&n>=28?(e.relBeg=0,e.relEnd=Number(e.end)-86400,e.beginDate=i+" "+this.second2ShortHourEx(e.beg),e.endDate=Object(C["b"])(Object(C["c"])(Object(C["d"])(e.beginDate),1))+" "+this.second2ShortHourEx(e.relEnd),e.timeTitle=e.beginDate,e.timeTitle+=" - "+e.endDate):n==a&&Number(e.end)>86400?(e.relBeg=e.beg,e.relEnd=86399,e.beginDate=i+" "+this.second2ShortHourEx(e.beg),e.endDate=Object(C["b"])(Object(C["c"])(Object(C["d"])(e.beginDate),1))+" "+this.second2ShortHourEx(Number(e.end)-86400),e.timeTitle=e.beginDate,e.timeTitle+=" - "+e.endDate):(e.relBeg=e.beg,e.relEnd=e.end,e.beginDate=i+" "+this.second2ShortHourEx(e.beg),e.endDate=i+" "+this.second2ShortHourEx(e.end),e.timeTitle=e.beginDate,e.timeTitle+=" - "+this.second2ShortHourEx(e.end)):(e.relBeg=e.beg,e.relEnd=e.end,e.beginDate=i+" "+this.second2ShortHourEx(e.beg),e.endDate=i+" "+this.second2ShortHourEx(e.end),e.timeTitle=e.beginDate,e.timeTitle+=" - "+this.second2ShortHourEx(e.end)),this.videoList[t]=e},getFileTime:function(e,t,a){var n="";if(0==Number(e)){var i=this.videoDate;n+=i.substring(0,4)}else n+=Number(e)+2e3;return n+="-",n+=t<10?"0"+t:t,n+="-",n+=a<10?"0"+a:a,n},doClickVideoChnTd:function(e,t,a,n){for(var i=null,o=0;o<this.videoList.length;o++)if(this.videoList[o].id==e){i=this.videoList[o];break}if(null!=i){n<=i.relBeg&&(n=i.relBeg),n>=i.relEnd&&(n=i.relEnd);var r=i.devIdno+" - "+this.getChnName(t)+" - "+i.yearMonthDay+" "+this.second2ShortHourEx(n)+" - "+this.second2ShortHourEx(i.relEnd);this.doReplayVehicleServer(i,a,n-i.relBeg,r,!0)}},getChnName:function(e){return"CH"+(Number(e)+1)},getCameraIndex:function(e){-1!==e.indexOf("摄像头")?this.cameraIndex=e.charAt(e.length-2)-1:this.cameraIndex=-1},addVideoChn:function(t,a,n,i){if("undefined"!=typeof t&&t.length>0){null!=a&&a.length>0&&this.addVideoChnTr(a);for(var o=0;o<t.length;o++){var r=t[o];if(98==r.chn)for(var l=0;l<a.length;l++)-1!=n&&n!=l||(r.relChn=l,this.addVideoChnTd(r,i));else-1!=n&&n!=r.chn||(r.relChn=r.chn,this.addVideoChnTd(r,i))}var s=new T["a"];s.dynamicChnTrHeight(),this.rootId=document.getElementById("videoTime"),e(".tl-content .tl-content-tr",this.rootId).mousemove(function(t){e(".tl-tip-chn",".tl_tip").text(e(this).attr("data-chn"))})}},addVideoChnTr:function(t){for(var a=0;a<t.length;a++){var n=document.createElement("div");n.className="tl-content-tr",e(n).addClass("tl-content-tr"+a);var i=t[a].name;e(n).attr("data-chn",i),e(n).append('<div class="tl-content-tr-chn">'+i+"</div>"),e(".tl-content-table").append(n)}},addVideoChnTd:function(t,a){var n=e(".tl-content-tr"+t.relChn),i=document.createElement("div");i.className="tl-content-td",e(i).attr("data-id",t.id);var o=".flexigrid";this.orglength=e(o).width();var r=this.parseIntDecimal(this.orglength/24);this.maxlength=24*r;this.parseIntDecimal((this.orglength-this.maxlength)/2);var l=86400,s=t.relBeg/l*this.maxlength,d=t.relEnd/l*this.maxlength;r=d-s;r<1&&(r=1),e(i).css("left",s),e(i).css("width",r),0==t.type&&e(i).css("background-color","rgba(51, 153, 255, 0.5)"),t.chnMask>0||98==t.chn?this.addVideoChnTdClickEvent(i,t.relChn,t.relChn,a):this.addVideoChnTdClickEvent(i,t.relChn,0,a),n.length>0?e(n).append(i):(n=document.createElement("div"),n.className="tl-content-tr",e(n).addClass("tl-content-tr"+t.chn),e(n).attr("data-chn",t.chnName),e(n).append('<div class="tl-content-tr-chn">'+t.chnName+"</div>"),e(n).append(i),e(".tl-content-table").append(n))},addVideoChnTdClickEvent:function(t,a,n,i){var o=this;e(t).on("dblclick",function(){var t=e(this).attr("data-id"),r=e(o.rootId).find(".tl_tip .tl-tip-time").attr("data-time");"function"==typeof i&&i(t,a,n,r)})},parseIntDecimal:function(e){return parseInt(e,10)},shortHour2Second:function(e){var t=e.split(":");return 2==t.length?3600*this.parseIntDecimal(t[0])+60*this.parseIntDecimal(t[1]):3==t.length?3600*this.parseIntDecimal(t[0])+60*this.parseIntDecimal(t[1])+this.parseIntDecimal(t[2]):0},putOffZero:function(e){return 0==parseInt(e[0])?e.substring(1):e},countVideoTime:function(e){var t=this.getFileTime(e.year,e.mon,e.day),a=(e.beg,e.end,t+" "+this.second2ShortHourEx(e.beg)),n=t+" "+this.second2ShortHourEx(e.end);this.downloadList.downloadStartTime=a,this.downloadList.downloadEndTime=n;var i=a+" - "+this.second2ShortHourEx(e.end);return i},countVideoType:function(e){return"0"==e.type?"常规":"报警"},countVideoLoc:function(e){return 1==e.loc?"终端设备":2==e.loc?"存储服务器":4==e.loc?"下载服务器":void 0},countVideoFileSize:function(e){return(e.len/1024/1024).toFixed(2)+"MB"},countVideoChn:function(e){return"CH0"+(Number(e.chn)+1)}},Object(i["a"])(n,"getFileTime",function(e,t,a){var n="";return n+=Number(e)+2e3,n+="-",n+=t<10?"0"+t:t,n+="-",n+=a<10?"0"+a:a,n}),Object(i["a"])(n,"second2ShortHourEx",function(e){var t=this.parseIntDecimal(e/3600),a=t;t<10&&(a="0"+t);var n=this.parseIntDecimal(e%3600/60),i=n;n<10&&(i="0"+n);e=this.parseIntDecimal(e%60);var o=e;return e<10&&(o="0"+e),a+":"+i+":"+o}),Object(i["a"])(n,"downloadVideoFile",function(e){this.dialogVisibleDownload=!0,this.downloadTitle="添加录像下载任务-"+e.devIdno+"-"+e.file.split("-")[0],this.downloadRow=e}),Object(i["a"])(n,"playBackVideo",function(e){var t=e.devIdno+" - "+this.countVideoTime(e);this.startPlayback(e.PlaybackUrl,t)}),Object(i["a"])(n,"QueryServer",function(t,a){var n,i;"1"==a.loc?i="1":"2"==a.loc?i="2":"4"==a.loc&&(i="4");var o=a.svr,r=[];n=a.devIdno,r.push({name:"DevIDNO",value:n}),r.push({name:"Location",value:i}),r.push({name:"FileSvrID",value:o}),r.push({name:"jsession",value:sessionStorage.jsession});var l=this;e.ajax({type:"get",dataType:"json",url:"/3/1?MediaType=2&DownType=3",data:r,cache:!1,success:function(e){0==e.result?"down"==t?l.doDownloadVideoFileInfo(a,e.server):"replay"==t&&l.doReplayVehicleServer(a,e.server):alert(lang.ServerQueryPrompt)}})}),Object(i["a"])(n,"doDownloadVideoFileInfo",function(e,t){var a=e.devIdno,n=e.len,i=e.file,o="//"+t.clientIp+":"+t.clientPort+"/3/5?DownType=3";o+="&DevIDNO="+a,o+="&FLENGTH="+n,o+="&FOFFSET=0",o+="&MTYPE=1",o+="&FPATH="+i;var r=i.split("/");1==r.length&&(r=i.split("\\")),o+="&SAVENAME="+encodeURI(r[r.length-1]),window.open(o,"_blank")}),Object(i["a"])(n,"doReplayVehicleServer",function(e,t,a,n,i){this.doReplayVideoFileInfo(e,t,a,n,i)}),Object(i["a"])(n,"doReplayVideoFileInfo",function(e,t,a,n,i){if("undefined"!=typeof this.divId&&null!=this.divId){var o=e.PlaybackUrl;(e.chnMask>0||98==e.chn)&&(o=o.replace("PLAYCHN=0","PLAYCHN="+t)),a&&a>0&&(o=o.replace("PLAYBEG=0","PLAYBEG="+1e3*a)),this.startPlayback(o,n)}}),Object(i["a"])(n,"startPlayback",function(e,t){var a=/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/;if(a=a.exec(e),e=e.replace(a[0],document.domain),this.isInitFinished){this.setWindowTitle(t);var n=0;swfobject.getObjectById(this.divId).stopVideo(n),swfobject.getObjectById(this.divId).startVod(n,e)}}),Object(i["a"])(n,"setWindowTitle",function(e){if(this.isInitFinished){var t=0;swfobject.getObjectById(this.divId).setVideoInfo(t,e)}}),Object(i["a"])(n,"handleCloseDownload",function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})}),Object(i["a"])(n,"downloadSave",function(){this.dialogVisibleDownload=!1,this.QueryServer("down",this.downloadRow)}),Object(i["a"])(n,"renderContent",function(e,t){var a=t.node,n=t.data;t.store;return"car"==n.type?e("span",[e("span",{class:"p"+n.id},[a.label])]):e("span",[e("span",[a.label])])}),Object(i["a"])(n,"formatData",function(e,t){var a=this,n=[];for(var i in a.options=[],e.data)if("报废车辆"!=i){var o={};o.id=e.data[i][0].serialNo,""==e.data[i][0].teamName?(o.name="未分组",o.label=e.data[i][0].teamName):(o.name=e.data[i][0].teamName,o.label=e.data[i][0].teamName),n.push(o)}for(var r=0;r<n.length;r++){n[r].children=[];for(var l=0;l<e.data[n[r].label].length;l++)if(""!=e.data[n[r].label][l].serialNo){var s={};if(s.id=e.data[n[r].label][l].serialNo,s.serialNo=e.data[n[r].label][l].serialNo,s.name=e.data[n[r].label][l].licenseNo,s.label=e.data[n[r].label][l].carName,s.type="car",s.children=[],s.total=e.data[n[r].label][l].channelNumber,s.channelName=e.data[n[r].label][l].channelName,n[r].children.push(s),-1!==e.data[n[r].label][l].channelNumber&&0!==e.data[n[r].label][l].channelNumber)for(var d=0;d<e.data[n[r].label][l].channelNumber;d++){var c={id:d,name:"摄像头"+(d+1),type:"camera",index:d,isHiddenSelect:!0,parentId:e.data[n[r].label][l].serialNo,licenseNo:e.data[n[r].label][l].licenseNo,total:e.data[n[r].label][l].channelNumber,channelName:e.data[n[r].label][l].channelName};n[r].children[l].children.push(c)}var u={};u.label=e.data[n[r].label][l].licenseNo,u.value=e.data[n[r].label][l].serialNo,u.channelName=e.data[n[r].label][l].channelName,u.total=e.data[n[r].label][l].channelNumber,a.options.push(u)}}n.sort(function(e,t){return t.children.length-e.children.length}),n=this.teamSort(n,this.sortedTeam),a.data=[{id:"1",name:this.company+"(车)",label:"一级 1",children:n}]}),Object(i["a"])(n,"teamSort",function(e,t){var a=e,n=[],i=[];for(var o in a)this.inArray(a[o].name,t)?(a[o]["sort"]=t.indexOf(a[o].name),n.push(a[o])):i.push(a[o]);return n=n.sort(function(e,t){return e.sort<t.sort?-1:e.sort>t.sort?1:0}),n.concat(i)}),Object(i["a"])(n,"inArray",function(e,t){for(var a in t)if(t[a]==e)return!0;return!1}),Object(i["a"])(n,"getTeamAndCarList",function(){var e=this,t=this;Object(y["g"])({}).then(function(a){0==a.status?(t.formatData(a),t.dataCar=e.formatCas(a.data,"licenseNo","licenseNo"),"car"==e.$route.query.type&&(e.setDefalut(a.data,"licenseNo","car"),e.mdSearch("mdForm"))):e.$message.error(a.msg)})}),Object(i["a"])(n,"getTeamAndGunList",function(){var e=this,t=this;Object(y["h"])({}).then(function(a){0==a.status?(t.dataGun=e.formatCas(a.data,"iMei","code"),"gun"==e.$route.query.type&&(e.setDefalut(a.data,"iMei","gun"),e.mdSearch("mdForm"))):e.$message.error(a.msg)})}),Object(i["a"])(n,"formatCas",function(e,t,a){var n=[],i=0,o=this,r=function(r){var l=[];e[r].forEach(function(e){l.push({value:e[t],label:e[a],disabled:!1}),o.imei2name[e[t]]=e[a]}),n.push({value:"i".concat(i++),label:""==r?"未分组":r,children:l})};for(var l in e)r(l);return n}),Object(i["a"])(n,"setDefalut",function(e,t,a){var n=this;for(var i in e)e[i].forEach(function(e){e[t]==n.$route.query.imei&&(n.mdForm.date=n.$route.query.year,n.mdForm.timeS=n.$route.query.start,n.mdForm.timeE=n.$route.query.end,"car"==a?(n.mdForm.imeiCar=n.$route.query.imei,console.warn(n.mdForm.imeiCar)):n.mdForm.imeiGun.push([n.$route.query.imei]))}),0}),Object(i["a"])(n,"showMenu",function(){this.toshow=!this.toshow}),Object(i["a"])(n,"myDisF",function(){this.myDis=void 0,this.myDis=new BMapLib.DistanceTool(this.map),this.myDis.open()}),Object(i["a"])(n,"tableCellCN",function(e){var t=e.row,a=(e.rowIndex,e.column),n=(e.columnIndex,t.signalPower);if("信号强度"==a.label)return n<15?"red-row":n<20?"gray-row":""}),Object(i["a"])(n,"mdSearch",function(t){var a=this,n=this,i=new Date(n.mdForm.date.replace(/-/g,"/")+" "+n.mdForm.timeS).getTime(),o=new Date(n.mdForm.date.replace(/-/g,"/")+" "+n.mdForm.timeE).getTime();n.$refs[t].validate(function(t){t&&(i>o?n.$message.warning("开始时间不得大于结束时间"):function(){var t=function(){++d==s&&(n.mdLoad=!1,c.length>0?(n.mdContext.forEach(function(e){e.mdStartAnimate()}),n.map.setViewport(c,{margins:[100,100,100,100]}),n.mdClickPointCollection.mdPC=new BMap.PointCollection([],{size:BMAP_POINT_SIZE_SMALL,color:"rgba(0,0,0,0)"}),n.map.addOverlay(n.mdClickPointCollection.mdPC),n.mdClickPointCollection.data=c,n.shPoint&&n.mdClickPointCollection.mdPC.setPoints(c),n.mdClickPointCollection.mdPC.addEventListener("click",function(t){for(var a=n.pointDetails["p".concat(t.point.lng,",").concat(t.point.lat)],i=Object.values(a),o="",r=function(){var e=s[l];o+=n.dealData(e),n.mdContext.map(function(t){t.imei==e.imei&&(t.cont=n.dealData(e))})},l=0,s=i;l<s.length;l++)r();o&&(o=o.slice(0,-5)),o+='<li  class="addItem"><span></span><span title="添加网点"  class="addNetwork el-icon-circle-plus-outline"></span></li></ul>';var d=new BMap.InfoWindow('<div class="myRichMarker trailPopBox">'+o+"</div>",{width:0,height:0,offset:new BMap.Size(-165,48)});n.map.openInfoWindow(d,t.point),d.isOpen()?e(".addNetwork")[0].addEventListener("click",function(e){n.handleAddNetwork(t)}):d.addEventListener("open",function(){e(".addNetwork")[0].addEventListener("click",function(e){n.handleAddNetwork(t)})})})):n.$message.warning("无数据，请重新选择设备"))};n.mdInit();var r=n.mdForm.imeiCar?1:0,l=n.mdForm.imeiGun.length,s=r+l,d=0,c=[];if(a.getTaskList(),r>0){var u=n.mdForm.imeiCar,m=!0;"紧急追踪"==a.trackType&&(m=!1),Object(g["a"])({carNo:u,startTime:i,endTime:o,hasAddress:!1,carLocation:m}).then(function(e){e.success?(null==e.data&&(e.data=[]),c=c.concat(n.formatmdData(u,e.data))):n.$message.error("车辆".concat(n.imei2name[u],"查询错误:").concat(e.msg))}).finally(function(){t()}),Object(g["a"])({carNo:u,startTime:i,endTime:o,hasAddress:!0,carLocation:m}).then(function(e){e.success?(null==e.data&&(e.data=[]),n.formatmdData1(u,e.data)):n.$message.error("车辆".concat(n.imei2name[u],"查询错误:").concat(e.msg))}).finally(function(){})}l>0&&function(){var a=0,r=!0,l=!1,s=void 0;try{for(var d,u=function(){var e=d.value;Object(g["b"])({imei:e,startTime:i,endTime:o}).then(function(t){if(t.success){null==t.data&&(t.data=[]);var i=n.formatmdData(e,t.data,a);i.length>0&&(a++,c=c.concat(i))}else n.$message.error("枪支".concat(n.imei2name[e],"查询错误:").concat(t.msg))}).finally(function(){t()})},m=n.mdForm.imeiGun[Symbol.iterator]();!(r=(d=m.next()).done);r=!0)u()}catch(p){l=!0,s=p}finally{try{r||null==m.return||m.return()}finally{if(l)throw s}}n.$nextTick(function(){var t=e(".addNetwork");console.warn(t)})}()}())})}),Object(i["a"])(n,"handleAddress",function(e){return new Promise(function(t){var a=new BMap.Geocoder({extensions_town:!0});a.getLocation(e,function(e){var a=e.address;t(a)})})}),Object(i["a"])(n,"formatmdData",function(e,t,a){var n=this,i=n.map,r=t.filter(function(e){return null!=e.lat&&null!=e.lng&&1*e.lat>1&&1*e.lng>1}),l={data:[],mapData:[]},s=[],d=[],c=[],m=0,h=0,f=[],g=new Date(n.mdForm.date.replace(/-/g,"/")+" "+n.mdForm.timeS).getTime(),v=new Date(n.mdForm.date.replace(/-/g,"/")+" "+n.mdForm.timeE).getTime(),b=(v-g)/1e3,y={};function w(e){var t=document.createElement("div");return t.innerHTML=e,t}if(r.length>0){r.forEach(function(e,t){var a=Object(_["a"])(new BMap.Point(e.lng,e.lat)),i=["东北","东","东南","南","西南","西","西北","北"];if(a.lng=+(+a.lng).toFixed(6),a.lat=+(+a.lat).toFixed(6),l.mapData.push(a),e.lngandlat=a,e.index=t+1,e.direction?e.directionCont=0==e.direction?"北,0°":"".concat(i[Math.floor((e.direction-1)/90)+Math.floor(e.direction/90)],",").concat(e.direction,"°"):e.directionCont="北,0°'",navigator.appVersion.indexOf("Mac")>-1&&(e.updateTime=Date.parse(e.updateTime.slice(0,-9).replace(/T/," ").replace(/-/g,"/"))+288e5),e.gt="".concat(N(new Date(e.updateTime))," ").concat(new Date(e.updateTime).toTimeString().slice(0,8)),e.timeranges=(Date.parse(e.gt)-g)/1e3,e.serialNo?(e.imei=e.serialNo,e.type="car",l.type="car"):(e.speed=e.speed?Math.floor(1.852*e.speed):"--",e.signalPower=e.signalPower?e.signalPower:"--",e.type="gun",l.type="gun",3==e.reportType&&s.push(a)),void 0==n.pointDetails["p".concat(a.lng,",").concat(a.lat)]&&(n.pointDetails["p".concat(a.lng,",").concat(a.lat)]={}),n.pointDetails["p".concat(a.lng,",").concat(a.lat)]["imei".concat(e.imei)]=e,t<r.length-1)if(new Date(r[t+1].updateTime).getTime()-new Date(e.updateTime).getTime()>18e4){f.push(a),d[m++]=f,f=[];var o=Object(_["a"])(new BMap.Point(r[t+1].lng,r[t+1].lat));o.lng=+(+o.lng).toFixed(6),o.lat=+(+o.lat).toFixed(6),c[h++]=[a,o]}else f.push(a),d[m]=f;else f.push(a),d[m]=f;y["x".concat(e.timeranges)]=e}),r.sort(function(e,t){return e.updateTime-t.updateTime});var T={strokeOpacity:1,strokeWeight:4,strokeColor:"#09C030"},k=["#021BFD","#8933ec"],C={size:BMAP_POINT_SIZE_SMALL,color:"#487FE4"},P=["#FF4E4E","#fb1dfb"];"gun"==l.type&&(l.conData=s,T.strokeColor=k[a%2],C.color=P[a%2]);var x=new BMap.Marker(l.mapData[0],{icon:n.markerStart});i.addOverlay(x),n.startMarkers.push(x);var D=new BMap.Marker(l.mapData[l.mapData.length-1],{icon:n.markerEnd});i.addOverlay(D),n.endMarkers.push(D),d.forEach(function(e){var t=new BMap.Polyline(e,T);i.addOverlay(t),n.solidPolylines.push(t)}),c.forEach(function(e){var t=new BMap.Polyline(e,{strokeStyle:"dashed",strokeOpacity:1,strokeColor:"#a7a7a7",strokeWeight:4});i.addOverlay(t),n.dotPolylines.push(t)});var O=new BMap.PointCollection(l.mapData,C),S=void 0;l.conData&&l.conData.length>0&&1==n.power&&(C.color="#000",S=new BMap.PointCollection(l.conData,C)),i.addOverlay(O),i.addOverlay(S),n.mdPointCollection.push({imei:e,mdPC:O,data:l.mapData}),n.mdBPointCollection.push({imei:e,mdPC:S,data:l.conData}),n.shPoint||(O&&O.clear(),S&&S.clear());var j=w('<div class="myRichMarker">loading</div><i class="myClose">×</i>'),E=new BMap.Icon(p.a,new BMap.Size(52,26),{anchor:new BMap.Size(27,13)}),I=new BMap.Icon(u.a,new BMap.Size(50,50),{imageSize:new BMap.Size(50,50)}),F=new BMapLib.RichMarker(j,l.mapData[0],{anchor:new BMap.Size(-308,-264),enableDragging:!0}),M=new BMap.Marker(l.mapData[0],{icon:"car"==l.type?E:I});i.addOverlay(F),n.richMarkers.push(F),F.getContent().parentNode.style.background="transparent",i.addOverlay(M),n.marks.push(M),M.setZIndex(0);var V={type:l.type,origData:r,data:l.mapData,cont:"",progress:{value:0,max:b,startOrpause:!0,times:[]},isFollow:!0,speed:50,mdFormat:function(e){return e||(e=0),new Date(g+1e3*e).toTimeString().slice(0,8)},mdSetPosition:function(){var e=0;if(V.progress.value>r[r.length-1].timeranges)e=r[r.length-1].index-1;else if(y["x".concat(V.progress.value)])e=y["x".concat(V.progress.value)].index-1;else for(var t=V.progress.value;t>=0;t--)if(y["x".concat(t)]){e=y["x".concat(t)].index-1;break}M.setPosition(V.data[e]),V.imei=V.origData[e].imei,"car"==V.type&&M.setRotation(V.origData[e].direction-90),F.getContent().firstChild.innerHTML=n.dealData(r[e]),V.isFollow&&F.setPosition(l.mapData[e])},mdStartAnimate:function(){if(V.progress.startOrpause){V.progress.startOrpause=!1,V.progress.value>=V.progress.max&&(V.progress.value=0);var e=setInterval(function(){++V.progress.value>V.progress.max&&V.mdStopAnimate()},V.speed);V.progress.times.push(e)}else V.mdStopAnimate()},mdStopAnimate:function(e){var t=!0,a=!1,n=void 0;try{for(var i,o=V.progress.times[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value;clearInterval(r)}}catch(l){a=!0,n=l}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}V.progress.times=[],V.progress.startOrpause=!0,e&&(V.progress.value=V.progress.max)},name:n.imei2name[e],imei:e,pageData:{page:1,limit:20,total:r.length,oriData:Object(o["a"])(r),sortable:function(e,t,a){var n=e.prop,i=e.order;V.pageData.oriData="descending"==i?V.pageData.oriData.sort(function(e,t){return t[n]-e[n]}):"ascending"==i?V.pageData.oriData.sort(function(e,t){return e[n]-t[n]}):Object(o["a"])(r)},data:function(){var e=(V.pageData.page-1)*V.pageData.limit,t=e+V.pageData.limit;return V.pageData.oriData.slice(e,t)},getPages:function(){var t=document.querySelector(".t".concat(e," .el-table__body-wrapper.is-scrolling-none"));t&&(t.scrollTop=0)}},lineColor:T.strokeColor,pointColor:C.color},L=F.getContent().lastChild;L.addEventListener("click",function(){V.isFollow=!0,F.hide()}),F.addEventListener("ondragstart",function(){V.isFollow=!1}),M.addEventListener("mousedown",function(){var e=0,t=r[0].timeranges,a=r[r.length-1].timeranges;if(V.progress.value<t)e=y["x".concat(t)].index-1;else if(V.progress.value>a)e=y["x".concat(a)].index-1;else if(y["x".concat(V.progress.value)])e=y["x".concat(V.progress.value)].index-1;else for(var n=V.progress.value;n>=0;n--)if(y["x".concat(n)]){e=y["x".concat(n)].index-1;break}F.setPosition(l.mapData[e]),V.imei=V.origData[e].imei,V.isFollow=!0,F.show()}),n.mdContext.push(V),"gun"==l.type&&n.mdContext_list.push(V),l.data=r}return l.mapData}),Object(i["a"])(n,"formatmdData1",function(e,t,a){var n=this,i=(n.map,t.filter(function(e){return null!=e.lat&&null!=e.lng&&1*e.lat>1&&1*e.lng>1})),r={data:[],mapData:[]},l=new Date(n.mdForm.date.replace(/-/g,"/")+" "+n.mdForm.timeS).getTime();new Date(n.mdForm.date.replace(/-/g,"/")+" "+n.mdForm.timeE).getTime();if(i.length>0){i.forEach(function(e,t){var a=Object(_["a"])(new BMap.Point(e.lng,e.lat)),n=["东北","东","东南","南","西南","西","西北","北"];a.lng=+(+a.lng).toFixed(6),a.lat=+(+a.lat).toFixed(6),r.mapData.push(a),e.lngandlat=a,e.index=t+1,e.direction?e.directionCont=0==e.direction?"北,0°":"".concat(n[Math.floor((e.direction-1)/90)+Math.floor(e.direction/90)],",").concat(e.direction,"°"):e.directionCont="北,0°'",navigator.appVersion.indexOf("Mac")>-1&&(e.updateTime=Date.parse(e.updateTime.slice(0,-9).replace(/T/," ").replace(/-/g,"/"))+288e5),e.gt="".concat(N(new Date(e.updateTime))," ").concat(new Date(e.updateTime).toTimeString().slice(0,8)),e.timeranges=(Date.parse(e.gt)-l)/1e3,e.serialNo&&(e.imei=e.serialNo,e.type="car",r.type="car")}),i.sort(function(e,t){return e.updateTime-t.updateTime});var s={type:r.type,origData:i,data:r.mapData,cont:"",mdFormat:function(e){return e||(e=0),new Date(l+1e3*e).toTimeString().slice(0,8)},name:n.imei2name[e],imei:e,pageData:{page:1,limit:20,total:i.length,oriData:Object(o["a"])(i),sortable:function(e,t,a){var n=e.prop,r=e.order;s.pageData.oriData="descending"==r?s.pageData.oriData.sort(function(e,t){return t[n]-e[n]}):"ascending"==r?s.pageData.oriData.sort(function(e,t){return e[n]-t[n]}):Object(o["a"])(i)},data:function(){var e=(s.pageData.page-1)*s.pageData.limit,t=e+s.pageData.limit;return s.pageData.oriData.slice(e,t)},getPages:function(){var t=document.querySelector(".t".concat(e," .el-table__body-wrapper.is-scrolling-none"));t&&(t.scrollTop=0)}}};n.mdContext_list.push(s),r.data=i}return r.mapData}),Object(i["a"])(n,"dealData",function(e){return'<h5 class="l-tit">'.concat(e.imei,'</h5>\n        <ul class="myInfo ').concat(e.type,'">\n        <li ').concat("car"==e.type?'class="hide"':"","><span>电量</span><i>").concat(-1!=e.battery&&e.battery?e.battery+" %":"--","</i></li>\n        <li ").concat("car"==e.type||1!=this.power?'class="hide"':"","><span>信号强度</span><i>").concat(e.signalPower,"</i></li>\n        <li><span>方向 </span><i>").concat(e.directionCont,"</i></li>\n        <li><span>经纬度 </span><i>").concat(e.lngandlat.lng," , ").concat(e.lngandlat.lat,"</i></li>\n        <li><span>速度 </span><i>").concat(e.speed," Km/h</i></li>\n        <li><span>上传时间 </span><i>").concat(e.gt,"</i></li>\n      </ul>")}),Object(i["a"])(n,"deleteSomeOverlays",function(){var e=this;this.startMarkers.forEach(function(t,a){e.map.removeOverlay(t)}),this.endMarkers.forEach(function(t,a){e.map.removeOverlay(t)}),this.solidPolylines.forEach(function(t,a){e.map.removeOverlay(t)}),this.dotPolylines.forEach(function(t,a){e.map.removeOverlay(t)}),this.mdPointCollection.forEach(function(t,a){e.map.removeOverlay(t.mdPC)}),this.mdBPointCollection.forEach(function(t,a){e.map.removeOverlay(t.mdPC)}),this.richMarkers.forEach(function(t,a){e.map.removeOverlay(t)}),this.marks.forEach(function(t,a){e.map.removeOverlay(t)}),this.map.removeOverlay(this.mdClickPointCollection.mdPC),this.startMarkers=[],this.endMarkers=[],this.solidPolylines=[],this.dotPolylines=[],this.mdPointCollection=[],this.mdBPointCollection=[],this.richMarkers=[],this.marks=[],this.mdClickPointCollection={}}),Object(i["a"])(n,"mdInit",function(){var e=this;e.map.reset(),e.deleteSomeOverlays(),e.mdLoad=!0,e.mdContext=[],e.mdContext_list=[],e.pointDetails={}}),Object(i["a"])(n,"ShPoint",function(e){var t=this;e?(t.mdPointCollection.forEach(function(e){e.mdPC&&e.mdPC.setPoints(e.data)}),t.mdBPointCollection.forEach(function(e){e.mdPC&&e.mdPC.setPoints(e.data)}),t.mdClickPointCollection.mdPC&&t.mdClickPointCollection.mdPC.setPoints(t.mdClickPointCollection.data)):(t.mdPointCollection.forEach(function(e){e.mdPC&&e.mdPC.clear()}),t.mdBPointCollection.forEach(function(e){e.mdPC&&e.mdPC.clear()}),t.mdClickPointCollection.mdPC&&t.mdClickPointCollection.mdPC.clear())}),Object(i["a"])(n,"removeValid",function(){this.$refs.mdForm.clearValidate(["imeiCar","imeiGun"])}),Object(i["a"])(n,"limitChecks",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=e.length,i=t.length;if(n>i)e.forEach(function(e){t.indexOf(e)<0&&t.push(e)}),i>=a&&t.shift();else for(var o=i-1;o>=0;o--)e.indexOf(t[o])<0&&t.splice(o,1);for(o=n-1;o>=0;o--)t.indexOf(e[o])<0&&delete e[o];return e=e.filter(function(e){return e}),e}),Object(i["a"])(n,"poperHide",function(){this.gunPoper=!1,this.carPoper=!1}),Object(i["a"])(n,"limitOriGunChecks",function(){this.dataGun.push(0),this.dataGun.pop();var e=this,t=e.mdForm.imeiGun.length,a=e.limitmdFormGun.length;if(t>a)e.mdForm.imeiGun.forEach(function(t){e.limitmdFormGun.indexOf(t)<0&&e.limitmdFormGun.push(t)}),a>=2&&e.limitmdFormGun.shift();else for(var n=a-1;n>=0;n--)e.mdForm.imeiGun.indexOf(e.limitmdFormGun[n])<0&&e.limitmdFormGun.splice(n,1);for(n=t-1;n>=0;n--)e.limitmdFormGun.indexOf(e.mdForm.imeiGun[n])<0&&delete e.mdForm.imeiGun[n];sessionStorage.imeiGunArr=JSON.stringify(e.mdForm.imeiGun.filter(function(e){return e})),e.mdForm.imeiGun=JSON.parse(sessionStorage.imeiGunArr)}),Object(i["a"])(n,"changeValue",function(){this.mdForm.imeiCar="",this.mdForm.imeiGun=[]}),Object(i["a"])(n,"findCar2gun",function(){var e=this,t=new Date(e.mdForm.date.replace(/-/g,"/")+" "+e.mdForm.timeS).getTime(),a=new Date(e.mdForm.date.replace(/-/g,"/")+" "+e.mdForm.timeE).getTime();e.gunPoper=!0,e.bindGunData=[],e.bindGunNum=e.mdForm.imeiGun,e.copyGunNum=[],Object(g["c"])({serialNo:e.mdForm.imeiCar,startTime:t,endTime:a,tableDate:e.mdForm.date.replace(/-/g,"_")}).then(function(t){var a={};t.success&&t.data&&(t.data.forEach(function(e){a[e.gunTeamName]=[]}),t.data.forEach(function(e){a[e.gunTeamName].push({iMei:e.imei,code:e.code})}),e.bindGunData=e.formatCas(a,"iMei","code"))})}),Object(i["a"])(n,"findGun2car",function(){var e=this,t=new Date(e.mdForm.date.replace(/-/g,"/")+" "+e.mdForm.timeS).getTime(),a=new Date(e.mdForm.date.replace(/-/g,"/")+" "+e.mdForm.timeE).getTime(),n={},i=[];if(e.bindCarData=[],e.bindCarNum=e.mdForm.imeiCar,e.carPoper=!0,e.mdForm.imeiGun.length>0)for(var o=function(o){Object(g["d"])({iMei:e.mdForm.imeiGun[o],startTime:t,endTime:a,tableDate:e.mdForm.date.replace(/-/g,"_")}).then(function(t){t.success&&t.data&&(t.data.forEach(function(e){Array.isArray(n[e.carTeamName])||(n[e.carTeamName]=[])}),t.data.forEach(function(e){i.indexOf(e.serialNo)<0&&(n[e.carTeamName].push({serialNo:e.serialNo,licenseNo:e.licenseNo}),i.push(e.serialNo))})),o==e.mdForm.imeiGun.length-1&&Object.keys(n).length>0&&(console.log(n),e.bindCarData=e.formatCas(n,"serialNo","licenseNo"))})},r=0;r<e.mdForm.imeiGun.length;r++)o(r)}),Object(i["a"])(n,"tRFindCar2Gun",function(){var e=this,t=new Date(e.mdForm.date.replace(/-/g,"/")+" "+e.mdForm.timeS).getTime(),a=new Date(e.mdForm.date.replace(/-/g,"/")+" "+e.mdForm.timeE).getTime();e.gunPoper=!0,e.tRCarToGun=[],Object(g["f"])({serialNo:e.mdForm.imeiCar,startTime:t,endTime:a,tableDate:e.mdForm.date.replace(/-/g,"_")}).then(function(t){t.success&&t.data&&(e.tRCarToGun=t.data)})}),Object(i["a"])(n,"tRFindGun2Car",function(){var e=this,t=new Date(e.mdForm.date.replace(/-/g,"/")+" "+e.mdForm.timeS).getTime(),a=new Date(e.mdForm.date.replace(/-/g,"/")+" "+e.mdForm.timeE).getTime();if(e.carPoper=!0,e.tRGunToCar=[],e.mdForm.imeiGun.length>0)for(var n=0;n<e.mdForm.imeiGun.length;n++)Object(g["g"])({iMei:e.mdForm.imeiGun[n],startTime:t,endTime:a,tableDate:e.mdForm.date.replace(/-/g,"_")}).then(function(t){t.success&&t.data&&(e.tRGunToCar=e.tRGunToCar.concat(t.data))})}),Object(i["a"])(n,"changeGunSearch",function(e){this.dataGun.push(0),this.dataGun.pop(),this.mdForm.imeiGun=[e.imei],this.limitmdFormGun=[e.imei],this.myTimeRange=[e.startHour,e.endHour]}),Object(i["a"])(n,"changeCarSearch",function(e){this.mdForm.imeiCar=e.serialNo,this.myTimeRange=[e.startHour,e.endHour]}),Object(i["a"])(n,"changeTimeRange",function(){this.myTimeRange=[0,23]}),Object(i["a"])(n,"changeCarChoose",function(e){this.mdForm.imeiCar=e}),Object(i["a"])(n,"changeGunChoose",function(e){var t=this,a=e.length,n=t.copyGunNum.length;if(a>n)e.forEach(function(e){t.copyGunNum.indexOf(e)<0&&t.copyGunNum.push(e)}),n>=2&&t.copyGunNum.shift();else for(var i=n-1;i>=0;i--)e.indexOf(t.copyGunNum[i])<0&&t.copyGunNum.splice(i,1);sessionStorage.kk=JSON.stringify(t.copyGunNum),t.bindGunNum=JSON.parse(sessionStorage.kk),t.limitmdFormGun=JSON.parse(sessionStorage.kk),t.mdForm.imeiGun=JSON.parse(sessionStorage.kk)}),Object(i["a"])(n,"lTabActiveFalse",function(){var e=this;e.lTabActive=!1,e.showVideo()}),Object(i["a"])(n,"winChangeFunc",function(){"winC-0"==this.winChange&&(this.winChange="winC-1")}),Object(i["a"])(n,"winChange1Func",function(){"winC-0"==this.winChange1&&(this.winChange1="winC-1")}),Object(i["a"])(n,"toPauseCar",function(){this.mdContext.forEach(function(e){0==e.progress.startOrpause&&e.mdStartAnimate()})}),Object(i["a"])(n,"toStartCar",function(){this.mdContext.forEach(function(e){1==e.progress.startOrpause&&e.mdStartAnimate()})}),n)}}).call(this,a("1157"))},"82ea":function(e,t,a){"use strict";var n=a("2453"),i=a.n(n);i.a},d256:function(e,t,a){"use strict";a.d(t,"A",function(){return i}),a.d(t,"D",function(){return o}),a.d(t,"c",function(){return r}),a.d(t,"L",function(){return l}),a.d(t,"l",function(){return s}),a.d(t,"t",function(){return d}),a.d(t,"d",function(){return c}),a.d(t,"b",function(){return u}),a.d(t,"K",function(){return m}),a.d(t,"J",function(){return p}),a.d(t,"r",function(){return h}),a.d(t,"a",function(){return f}),a.d(t,"F",function(){return g}),a.d(t,"s",function(){return v}),a.d(t,"u",function(){return b}),a.d(t,"I",function(){return y}),a.d(t,"e",function(){return _}),a.d(t,"w",function(){return w}),a.d(t,"H",function(){return T}),a.d(t,"f",function(){return k}),a.d(t,"x",function(){return C}),a.d(t,"E",function(){return P}),a.d(t,"y",function(){return x}),a.d(t,"z",function(){return D}),a.d(t,"m",function(){return O}),a.d(t,"i",function(){return N}),a.d(t,"G",function(){return S}),a.d(t,"g",function(){return j}),a.d(t,"q",function(){return E}),a.d(t,"h",function(){return I}),a.d(t,"v",function(){return F}),a.d(t,"n",function(){return M}),a.d(t,"j",function(){return V}),a.d(t,"k",function(){return L}),a.d(t,"B",function(){return R}),a.d(t,"o",function(){return A}),a.d(t,"C",function(){return B}),a.d(t,"p",function(){return $});var n=a("2ade");function i(e){return Object(n["a"])({url:"/eoms/schedulings/queryExp",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/eoms/schedulings/queryPlan",method:"post",data:e.times,headers:{"content-type":"application/json"}})}function r(e){return Object(n["a"])({url:"/eoms/schedulings/addplan",method:"post",data:e,headers:{"content-type":"application/json"}})}function l(e){return Object(n["a"])({url:"/eoms/schedulings/updateplan",method:"post",data:e,headers:{"content-type":"application/json"}})}function s(e){return Object(n["a"])({url:"/eoms/schedulings/generate",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/eoms/schedulings/publishplan",method:"post",data:e.dates,headers:{"content-type":"application/json"}})}function c(e){return Object(n["a"])({url:"/eoms/schedulings/addTask",method:"post",data:e,headers:{"content-type":"application/json"}})}function u(e){return Object(n["a"])({url:"/eoms/bankscheduling/orderAndBind",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/eoms/schedulings/updatePlanTask",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/eoms/schedulings/updateActuallyTask",method:"post",data:e})}function h(e){return Object(n["a"])({url:"/eoms/schedulings/queryPlanTask",method:"post",data:e})}function f(e){return Object(n["a"])({url:"/eoms/schedulings/queryActuallyTask",method:"post",data:e})}function g(e){return Object(n["a"])({url:"/eoms/schedulings/qureySomeDayAllTask",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/eoms/schedulings/publishActually",method:"post",data:e.dates,headers:{"content-type":"application/json"}})}function b(e){return Object(n["a"])({url:"/eoms/schedulings/queryActually",method:"post",data:e.times,headers:{"content-type":"application/json"}})}function y(e){return Object(n["a"])({url:"/eoms/schedulings/updateActually",method:"post",data:e,headers:{"content-type":"application/json"}})}function _(e){return Object(n["a"])({url:"/eoms/schedulings/addactually",method:"post",data:e,headers:{"content-type":"application/json"}})}function w(e,t){return Object(n["a"])({url:"/eoms/tpRel/queryByTaskIds",method:"post",data:e,headers:{"content-type":"application/json"},cancelToken:t})}function T(e){return Object(n["a"])({url:"/eoms/tpRel/del",method:"post",data:e})}function k(e){return Object(n["a"])({url:"/eoms/tpRel/bind",method:"post",data:e})}function C(e,t){return Object(n["a"])({url:"/eoms/schedulings/queryByWorker",method:"post",data:e,cancelToken:t})}function P(e,t){return Object(n["a"])({url:"/eoms/schedulings/queryTaskByPersonId",method:"post",data:e,cancelToken:t})}function x(e){return Object(n["a"])({url:"/eoms/transfer/queryEvidenceInfo",method:"post",data:e})}function D(e){return Object(n["a"])({url:"/eoms/transfer/queryEvidenceInfos",method:"post",data:e})}function O(e){return Object(n["a"])({url:"/noapp/file/xxx/download",method:"post",params:e,headers:{"content-type":"image/png"},responseType:"blob"})}function N(e){return Object(n["a"])({url:"/noapp/file/xxx/downloadImageZip",method:"post",data:e,responseType:"blob",headers:{"content-type":"application/json"}})}function S(e){return Object(n["a"])({url:"/eoms/photoInfos/save",method:"post",data:e,headers:{"content-type":"application/json"}})}function j(e){return Object(n["a"])({url:"/persons/bindPhoto",method:"post",data:e})}function E(e){return Object(n["a"])({url:"/eoms/photoInfos/query",method:"post",data:e,headers:{"content-type":"application/json"}})}function I(e){return Object(n["a"])({url:"/eoms/schedulings/directAddActuallyTask",method:"post",data:e.data,params:e.params,headers:{"content-type":"application/json"}})}function F(e){return Object(n["a"])({url:"/eoms/schedulings/queryActuallyByIdIdentify",method:"post",data:e})}function M(e){return Object(n["a"])({url:"/eoms/schedulings/manualPlanScheduling",method:"post",data:e})}function V(e){return Object(n["a"])({url:"/eoms/schedulings/emptyScheduling",method:"post",data:e,headers:{"content-type":"application/json"}})}function L(e){return Object(n["a"])({url:"/eoms/schedulings/extendTask",method:"post",data:e})}function R(e,t){return Object(n["a"])({url:"/eoms/tpRel/queryExtRelByTaskIds",method:"post",data:e,headers:{"content-type":"application/json"},cancelToken:t})}function A(e){return Object(n["a"])({url:"/eoms/tpRel/modifyExRel",method:"post",data:e})}function B(e){return Object(n["a"])({url:"/eoms/schedulings/queryPackageByActually",method:"post",data:e,headers:{"content-type":"application/json"}})}function $(e){return Object(n["a"])({url:"/eoms/schedulings/modifyTask",method:"post",data:e})}},d941:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{ref:"mySelect",attrs:{value:e.setVal,clearable:e.clearable,filterable:"","filter-method":e.selectFilter},on:{clear:e.clearHandle,"visible-change":e.clearForm}},[a("el-option",{staticClass:"options",attrs:{value:e.setVal}},[a("el-tree",{ref:"selectTree",staticClass:"tree-option",attrs:{accordion:e.accordion,data:e.options,props:e.props,"node-key":e.props.id,"default-expanded-keys":e.defaultExpandedKey,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)],1)},i=[],o=(a("d25f"),a("57e7"),a("4f37"),a("ac6a"),a("f3e2"),{name:"el-tree-select",props:{props:{type:Object,default:function(){return{id:"id",label:"label",children:"children"}}},options:{type:Array,default:function(){return[]}},setVal:{type:String,default:null},clearable:{type:Boolean,default:!0},accordion:{type:Boolean,default:!0}},data:function(){return{inputTitle:"",parentKey:"",defaultExpandedKey:[],curScrollTop:0,searchVal:""}},methods:{initHandle:function(){var e=this;this.$nextTick(function(){e.options.length>0&&e.setVal&&(e.defaultExpandedKey=[e.parentKey],e.$refs.selectTree.setCurrentKey(e.setVal)),e.initScroll()})},initScroll:function(){var e=this;this.$nextTick(function(){var t=document.querySelectorAll(".el-scrollbar .el-scrollbar__bar");t.forEach(function(e){return e.style.width=0});var a=0,n=e.$refs.selectTree.$el,i=n.parentNode,o=n.querySelector(".el-tree-node__children .is-current");o&&(a=o.offsetTop+o.offsetHeight-200),e.curScrollTop=a>0?a:0,i.scrollTop=e.curScrollTop})},handleNodeClick:function(e,t,a){e.children||(this.parentKey=t.parent.key,this.$emit("update:setVal",e[this.props.label]),this.inputTitle=e.title?e.title:e.label,this.$refs.mySelect.blur())},clearHandle:function(){this.searchVal="",this.defaultExpandedKey=[],this.curScrollTop=0,this.clearSelected(),this.$emit("update:setVal","")},clearSelected:function(){var e=document.querySelectorAll(".tree-option .el-tree-node");e.forEach(function(e){return e.classList.remove("is-current")})},selectFilter:function(e){this.searchVal=e},filterNode:function(e,t,a){return e=e.trim(),!e||-1!==t[this.props.label].indexOf(e)||this.checkBelongToChooseNode(e,t,a)},checkBelongToChooseNode:function(e,t,a){var n=a.level;if(1===n)return!1;var i=a.parent,o=0;while(o<n-1){if(-1!==i.data[this.props.label].indexOf(e))return!0;i=i.parent,o++}return!1},clearForm:function(){this.searchVal="",this.defaultExpandedKey=[],this.initHandle()}},watch:{options:function(e){e.length>0&&this.initHandle()},searchVal:function(e){this.$refs.selectTree.filter(e)}}}),r=o,l=(a("681a"),a("2877")),s=Object(l["a"])(r,n,i,!1,null,"3b1d64aa",null);t["a"]=s.exports},e4b5:function(e,t,a){},ed28:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"historicalPlayback"}},[a("scriptLink"),a("div",{attrs:{id:"newLayout"}},[e.toshow?a("div",{staticClass:"bak",on:{click:e.showMenu}}):e._e(),e.mediaNone?e._e():a("div",{staticClass:"menuShow",class:{rot:e.toshow},on:{click:e.showMenu}},[e.toshow?e._e():a("span",[e._v("Open")]),e.toshow?a("span",[e._v("Close")]):e._e()]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.sidePop,expression:"!sidePop"}],staticClass:"shrink el-icon-d-arrow-left",class:{menuHide:!e.$parent.menuPop},on:{click:function(t){e.sidePop=!0}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:e.sidePop,expression:"sidePop"}],staticClass:"shrink pop el-icon-d-arrow-right",class:{menuHide:!e.$parent.menuPop},on:{click:function(t){e.sidePop=!1}}}),a("div",{staticClass:"l-left",class:{toshow:e.toshow,sOrh:e.sidePop}},[e.mediaNone?a("div",{staticClass:"l-tab"},[a("div",{staticClass:"l-btn l-video",class:{active:!e.lTabActive},on:{click:function(t){e.lTabActiveFalse(),e.toPauseCar()}}},[a("div",{staticClass:"l-img"}),a("span",[e._v("视频回放")])]),a("div",{staticClass:"l-btn l-track",class:{active:e.lTabActive},on:{click:function(t){e.lTabActive=!0}}},[a("div",{staticClass:"l-img"}),a("span",[e._v("轨迹回放")])])]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.lTabActive,expression:"lTabActive"},{name:"loading",rawName:"v-loading",value:e.mdLoad,expression:"mdLoad"}],staticClass:"l-trackPanel"},[a("div",{staticClass:"l-searchPanel"},[1==e.power||2==e.power?a("div",{staticClass:"trackRadio"},[a("el-radio-group",{model:{value:e.trackType,callback:function(t){e.trackType=t},expression:"trackType"}},[a("el-radio-button",{attrs:{label:"车辆定位"}}),a("el-radio-button",{attrs:{label:"紧急追踪"}})],1)],1):e._e(),a("div",{staticClass:"l-trackPoint"},[a("label",{staticClass:"el-form-item__label"},[e._v("轨迹点")]),a("el-switch",{on:{change:e.ShPoint},model:{value:e.shPoint,callback:function(t){e.shPoint=t},expression:"shPoint"}})],1),a("el-form",{ref:"mdForm",staticClass:"mdElForm",attrs:{rules:e.mdRule,model:e.mdForm,"hide-required-asterisk":!0}},[a("el-form-item",{attrs:{label:"",prop:"imeiCar"}},[a("el-cascader",{attrs:{options:e.dataCar,placeholder:"选择车辆",props:e.propsCar,"show-all-levels":!1,clearable:"",filterable:""},on:{change:function(t){e.removeValid(),e.poperHide()}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,i=t.data;return[a("span",[e._v(e._s(i.label))]),n.isLeaf?e._e():a("span",[e._v(" ("+e._s(i.children.length)+") ")])]}}]),model:{value:e.mdForm.imeiCar,callback:function(t){e.$set(e.mdForm,"imeiCar",t)},expression:"mdForm.imeiCar"}}),e._e()],1),a("el-form-item",{attrs:{label:"",prop:"imeiGun"}},[a("el-cascader",{ref:"myMdGunsCas",staticClass:"flexH",attrs:{"popper-class":"myGunCas",placeholder:"选择枪支",props:{expandTrigger:"hover",emitPath:!1,multiple:!0},options:e.dataGun,"show-all-levels":!1,clearable:"",filterable:""},on:{"visible-change":e.poperHide,change:function(t){e.removeValid(),e.limitOriGunChecks(),e.poperHide(),e.changeTimeRange()}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,i=t.data;return[a("span",[e._v(e._s(i.label))]),n.isLeaf?e._e():a("span",[e._v(" ("+e._s(i.children.length)+") ")])]}}]),model:{value:e.mdForm.imeiGun,callback:function(t){e.$set(e.mdForm,"imeiGun",t)},expression:"mdForm.imeiGun"}}),e._e()],1),a("el-form-item",{attrs:{label:"",prop:"date"}},[a("el-date-picker",{attrs:{clearable:!1,type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd"},model:{value:e.mdForm.date,callback:function(t){e.$set(e.mdForm,"date",t)},expression:"mdForm.date"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-slider",{staticClass:"elSlider",attrs:{range:"",max:23},model:{value:e.myTimeRange,callback:function(t){e.myTimeRange=t},expression:"myTimeRange"}})],1),a("div",{staticClass:"timeHind"},[e._v("\n              时间选择：\n\n            ")]),a("el-form-item",{attrs:{label:"",prop:"timeS"}},[a("el-col",{attrs:{span:11}},[a("el-time-picker",{attrs:{clearable:!1,"value-format":"HH:mm:ss",placeholder:"开始时间"},model:{value:e.mdForm.timeS,callback:function(t){e.$set(e.mdForm,"timeS",t)},expression:"mdForm.timeS"}})],1)],1),a("el-form-item",{attrs:{label:"",prop:"timeE"}},[a("el-col",{attrs:{span:11}},[a("el-time-picker",{attrs:{clearable:!1,"value-format":"HH:mm:ss",placeholder:"结束时间"},model:{value:e.mdForm.timeE,callback:function(t){e.$set(e.mdForm,"timeE",t)},expression:"mdForm.timeE"}})],1)],1),a("el-form-item",{staticClass:"searchBox"},[a("el-button",{staticClass:"historyS",attrs:{type:"primary"},on:{click:function(t){return e.mdSearch("mdForm")}}},[e._v("查找")]),a("el-button",{staticClass:"exportBtn",attrs:{type:"primary",loading:e.exportLoading},on:{click:e.exportExcel}},[e._v("车辆轨迹导出")])],1)],1)],1),e.mediaNone&&1==e.power?a("div",{staticClass:"l-measure",on:{click:e.myDisF}},[a("div",{staticClass:"l-img"}),a("span",[e._v("测距")])]):e._e(),e.mdContext.length>0?a("div",{staticClass:"l-searchRes"},[a("ul",{staticClass:"imeiPanel"},e._l(e.mdContext,function(t,n){return a("li",{key:n,class:"li-"+t.type,attrs:{"data-lineColor":t.lineColor,"data-pointColor":t.pointColor}},[t?[a("div",{staticClass:"icons"},["car"==t.type?[a("img",{attrs:{src:e.carImg,alt:"car"}}),a("i",{staticClass:"imeiName"},[e._v(e._s(t.name))])]:[a("img",{attrs:{src:e.gunImg,alt:"gun"}}),a("i",{staticClass:"imeiName"},[e._v(e._s(t.name))])],a("i",{staticClass:"imeiImei"},[e._v("( "+e._s(t.imei)+" )")])],2),a("div",{staticClass:"progress"},[a("el-slider",{attrs:{max:t.progress.max,"format-tooltip":t.mdFormat},on:{input:t.mdSetPosition},model:{value:t.progress.value,callback:function(a){e.$set(t.progress,"value",a)},expression:"item.progress.value"}}),a("div",{staticClass:"l-control"},[a("i",{staticClass:"iconfont l-start",class:t.progress.startOrpause?"iconai23":"iconzanting",on:{click:t.mdStartAnimate}}),a("i",{staticClass:"iconfont iconstop l-stop",on:{click:function(e){return t.mdStopAnimate(!0)}}})])],1)]:e._e()],2)}),0)]):e._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.lTabActive,expression:"!lTabActive"}],staticClass:"l-trackPanel l-videoPanel"},[a("div",{staticClass:"l-searchPanel"},[a("div",{staticClass:"placeholderBox"}),a("el-form",{staticClass:"mdElForm"},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"请选择"},on:{focus:function(t){e.dialogSelectCar=!0}},model:{value:e.selectCarNumber,callback:function(t){e.selectCarNumber=t},expression:"selectCarNumber"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-date-picker",{attrs:{clearable:!1,type:"date",placeholder:"选择日期",format:"yyyy年MM月dd日","value-format":"yyyy-MM-dd"},model:{value:e.videoDate,callback:function(t){e.videoDate=t},expression:"videoDate"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-time-picker",{attrs:{clearable:!1,"value-format":"HH:mm:ss",placeholder:"开始时间"},model:{value:e.videoStartTime,callback:function(t){e.videoStartTime=t},expression:"videoStartTime"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-time-picker",{attrs:{clearable:!1,"value-format":"HH:mm:ss",placeholder:"结束时间"},model:{value:e.videoEndTime,callback:function(t){e.videoEndTime=t},expression:"videoEndTime"}})],1)],1),a("div",{staticClass:"fileLocation"},[a("p",[e._v("文件位置")]),a("el-radio-group",{model:{value:e.fileLocation,callback:function(t){e.fileLocation=t},expression:"fileLocation"}},[a("el-radio",{attrs:{label:1}},[e._v("设备终端")]),a("el-radio",{attrs:{label:2}},[e._v("存储服务器")]),a("el-radio",{attrs:{label:4}},[e._v("下载服务器")])],1)],1),a("div",{staticClass:"searchBox"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.cancelRequest,expression:"!cancelRequest"}],staticClass:"historyS",attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.cancelRequest,expression:"cancelRequest"}],staticClass:"historyS",attrs:{type:"primary"},on:{click:e.cancleSearch}},[e._v("停止搜索")])],1)],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.lTabActive,expression:"lTabActive"}],staticClass:"l-right"},[a("div",{staticClass:"l-map",class:[e.winChange]},[a("div",{ref:"map",attrs:{id:"map"}})]),e.mediaNone?a("div",{staticClass:"l-table",class:[e.winChange]},[a("div",{staticClass:"l-window"},[a("el-tooltip",{attrs:{effect:"dark",content:"最小化",placement:"top-start"}},[a("i",{staticClass:"el-icon-minus",on:{click:function(t){e.winChange="winC-0"}}})]),a("el-tooltip",{attrs:{effect:"dark",content:"窗口化",placement:"top-start"}},[a("i",{staticClass:"el-icon-copy-document",on:{click:function(t){e.winChange="winC-1"}}})]),a("el-tooltip",{attrs:{effect:"dark",content:"最大化",placement:"top-start"}},[a("i",{staticClass:"iconfont iconmaximize",on:{click:function(t){e.winChange="winC-2",e.toPauseCar()}}})])],1),a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.mdLoad,expression:"mdLoad"},{name:"show",rawName:"v-show",value:e.mdContext.length>0,expression:"mdContext.length>0"}],staticClass:"activeName",on:{"tab-click":e.winChangeFunc},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[0==e.mdContext.length?a("span",{staticClass:"noneData"},[e._v("暂无数据...")]):e._e(),e._l(e.mdContext_list,function(t,n){return a("el-tab-pane",{key:n,attrs:{label:t.name,name:"first"+(0==n?"":n)}},[a("el-table",{class:"t"+t.imei,staticStyle:{width:"99%"},attrs:{"cell-class-name":e.tableCellCN,data:t.pageData.data(),border:"",fit:"","highlight-current-row":""},on:{"sort-change":t.pageData.sortable}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center",prop:"index"}}),"gun"==t.type?a("el-table-column",{attrs:{label:"电量",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(-1!=t.row.battery&&t.row.battery?t.row.battery+" %":"--"))]}}],null,!0)}):e._e(),1==e.power&&"gun"==t.type?a("el-table-column",{attrs:{label:"信号强度",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.signalPower))]}}],null,!0)}):e._e(),a("el-table-column",{attrs:{label:"方向",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.directionCont))]}}],null,!0)}),a("el-table-column",{attrs:{label:"经纬度",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.lngandlat.lng)+" , "+e._s(t.row.lngandlat.lat))]}}],null,!0)}),a("el-table-column",{attrs:{label:"速度",align:"center",sortable:"custom",prop:"speed"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.speed)+" Km/h")]}}],null,!0)}),a("el-table-column",{attrs:{label:"地址",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.address))]}}],null,!0)}),a("el-table-column",{attrs:{label:"上传时间",prop:"gt",align:"center"}})],1),t.pageData.total>0&&"winC-0"!==e.winChange?a("pagination",{staticClass:"fixedBar",attrs:{total:t.pageData.total,page:t.pageData.page,limit:t.pageData.limit},on:{"update:page":function(a){return e.$set(t.pageData,"page",a)},"update:limit":function(a){return e.$set(t.pageData,"limit",a)},pagination:t.pageData.getPages}}):e._e()],1)})],2)],1):e._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.lTabActive,expression:"!lTabActive"}],staticClass:"l-right"},[a("div",{staticClass:"l-map",class:[e.winChange1],attrs:{id:"videoBox"}},[a("div",{ref:"video",attrs:{id:"video"}})]),e.mediaNone?a("div",{staticClass:"l-table l-video-table",class:[e.winChange1]},[a("div",{staticClass:"l-window"},[a("el-tooltip",{attrs:{effect:"dark",content:"最小化",placement:"top-start"}},[a("i",{staticClass:"el-icon-minus",on:{click:function(t){e.winChange1="winC-0"}}})]),a("el-tooltip",{attrs:{effect:"dark",content:"窗口化",placement:"top-start"}},[a("i",{staticClass:"el-icon-copy-document",on:{click:function(t){e.winChange1="winC-1"}}})]),a("el-tooltip",{attrs:{effect:"dark",content:"最大化",placement:"top-start"}},[a("i",{staticClass:"iconfont iconmaximize",on:{click:function(t){e.winChange1="winC-2"}}})])],1),a("el-tabs",{staticClass:"activeName",on:{"tab-click":e.winChange1Func},model:{value:e.activeName1,callback:function(t){e.activeName1=t},expression:"activeName1"}},[a("el-tab-pane",{attrs:{label:"时间",name:"first"}},[a("div",{staticClass:"gps_box"},[a("ul",[a("li",{staticClass:"active",attrs:{id:"videoTime"}})])])]),a("el-tab-pane",{attrs:{label:"文件",name:"second"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.videoList,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"序号",prop:"id",sortable:"custom",align:"center",width:"80",type:"index"}}),a("el-table-column",{attrs:{label:"时间",width:"250px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e.countVideoTime(n)))])]}}],null,!1,833374892)}),a("el-table-column",{attrs:{label:"录像类型",width:"130px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticClass:"link-type"},[e._v(e._s(e.countVideoType(n)))])]}}],null,!1,1048078450)}),a("el-table-column",{attrs:{label:"终端设备",width:"110px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.devIdno))])]}}],null,!1,1515618269)}),a("el-table-column",{attrs:{label:"通道",width:"110px",align:"center",filters:e.chnArr,"filter-method":e.filterTag},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.countVideoChn(t.row)))])]}}],null,!1,4056302814)}),a("el-table-column",{attrs:{label:"文件位置",width:"260px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.countVideoLoc(t.row)))])]}}],null,!1,2044534619)}),a("el-table-column",{attrs:{label:"大小(MB)",width:"130px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.countVideoFileSize(t.row)))])]}}],null,!1,197019576)}),a("el-table-column",{attrs:{label:"文件名称",width:"220px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.file))])]}}],null,!1,226863200)}),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"100","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.playBackVideo(n)}}},[e._v("回放")])]}}],null,!1,3769778011)})],1)],1)],1)],1):e._e()])]),a("el-dialog",{attrs:{title:"选择车辆视频",visible:e.dialogSelectCar,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogSelectCar=t}}},[a("div",{staticClass:"treeBox"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),a("my-tree",{ref:"tree",attrs:{data:e.data,"highlight-current":"","node-key":"id","render-after-expand":!0,"default-expand-all":!1,"expand-on-click-node":!1,props:e.defaultProps,"filter-node-method":e.filterNode,"render-content":e.renderContent},on:{doubleClick:e.doubleClickTreeNode}})],1)]),a("el-dialog",{staticClass:"dialogDownload",attrs:{title:e.downloadTitle,visible:e.dialogVisibleDownload,width:"30%","before-close":e.handleCloseDownload,center:""},on:{"update:visible":function(t){e.dialogVisibleDownload=t}}},[a("span",{staticClass:"red"},[e._v("如果所选时间在默认时间范围内，则是分段下载；否则就是整个文件下载。下载的文件保存在存储服务器中。")]),a("el-form",{ref:"dataForm",attrs:{model:e.downloadList,"label-position":"left"}},[a("el-form-item",{attrs:{label:"开始时间",prop:"teamName"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00"},model:{value:e.downloadList.downloadStartTime,callback:function(t){e.$set(e.downloadList,"downloadStartTime",t)},expression:"downloadList.downloadStartTime"}})],1),a("el-form-item",{attrs:{label:"结束时间",prop:"leaderId"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"12:00:00"},model:{value:e.downloadList.downloadEndTime,callback:function(t){e.$set(e.downloadList,"downloadEndTime",t)},expression:"downloadList.downloadEndTime"}})],1),a("el-form-item",{attrs:{label:"标签",prop:"teamMemberNum"}},[a("el-input",{model:{value:e.downloadList.downloadTag,callback:function(t){e.$set(e.downloadList,"downloadTag",t)},expression:"downloadList.downloadTag"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.downloadSave}},[e._v("保存")])],1)],1),a("el-dialog",{attrs:{title:"添加网点",visible:e.addNetworkVisible,"append-to-body":"","close-on-click-modal":!0,center:""},on:{"update:visible":function(t){e.addNetworkVisible=t}}},[a("el-form",{ref:"addNetworkTemp",staticClass:"formStyle",attrs:{rules:e.addNetworkrRules,model:e.addNetworkTemp,"label-position":"left"}},[a("el-form-item",{attrs:{prop:"networkVal",label:"网点类型"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择网点类型"},model:{value:e.addNetworkTemp.networkVal,callback:function(t){e.$set(e.addNetworkTemp,"networkVal",t)},expression:"addNetworkTemp.networkVal"}},e._l(e.networkTypeOptions,function(e){return a("el-option",{key:e.type,attrs:{label:e.option,value:e.type}})}),1)],1),a("el-form-item",{attrs:{prop:"bank",label:"绑定银行"}},[a("el-select",{staticClass:"filter-item",attrs:{filterable:"",placeholder:"请选择银行"},model:{value:e.addNetworkTemp.bank,callback:function(t){e.$set(e.addNetworkTemp,"bank",t)},expression:"addNetworkTemp.bank"}},e._l(e.bankOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id,disabled:2==e.status}})}),1)],1),a("el-form-item",{attrs:{prop:"roadName",label:"请输入网点名称"}},[a("el-input",{attrs:{placeholder:"请输入网点名称"},model:{value:e.addNetworkTemp.roadName,callback:function(t){e.$set(e.addNetworkTemp,"roadName",t)},expression:"addNetworkTemp.roadName"}})],1),a("el-form-item",{attrs:{prop:"needToReport",label:"报站"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择是否报站"},model:{value:e.addNetworkTemp.needToReport,callback:function(t){e.$set(e.addNetworkTemp,"needToReport",t)},expression:"addNetworkTemp.needToReport"}},e._l(e.reportOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{prop:"sendTime",label:"早送预达时间"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"早送预达时间"},model:{value:e.addNetworkTemp.sendTime,callback:function(t){e.$set(e.addNetworkTemp,"sendTime",t)},expression:"addNetworkTemp.sendTime"}})],1),a("el-form-item",{attrs:{prop:"receiveTime",label:"晚收预达时间"}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss","picker-options":{selectableRange:"00:00:00 - 23:59:59"},placeholder:"晚收预达时间"},model:{value:e.addNetworkTemp.receiveTime,callback:function(t){e.$set(e.addNetworkTemp,"receiveTime",t)},expression:"addNetworkTemp.receiveTime"}})],1),a("el-form-item",{attrs:{prop:"networkSearchVal",label:"网点地址"}},[a("el-input",{attrs:{id:"suggestId",placeholder:"请输入网点地址"},model:{value:e.addNetworkTemp.networkSearchVal,callback:function(t){e.$set(e.addNetworkTemp,"networkSearchVal",t)},expression:"addNetworkTemp.networkSearchVal"}})],1),a("el-form-item",{attrs:{prop:"radius",label:"网点半径"}},[a("el-input",{attrs:{placeholder:"请输入网点半径"},model:{value:e.addNetworkTemp.radius,callback:function(t){e.$set(e.addNetworkTemp,"radius",e._n(t))},expression:"addNetworkTemp.radius"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addNetworkSubmit()}}},[e._v("确定")])],1)],1)],1)},i=[],o=a("7849"),r=o["a"],l=(a("82ea"),a("3f35"),a("2877")),s=Object(l["a"])(r,n,i,!1,null,"6830779b",null);t["default"]=s.exports},ef66:function(e,t,a){e.exports=a.p+"0f8e1c38b0801599bfec762aec0dfb95.swf"},f2e8:function(e,t,a){var n=a("1934")("jsonp");e.exports=r;var i=0;function o(){}function r(e,t,a){"function"==typeof t&&(a=t,t={}),t||(t={});var r,l,s=t.prefix||"__jp",d=t.name||s+i++,c=t.param||"callback",u=null!=t.timeout?t.timeout:6e4,m=encodeURIComponent,p=document.getElementsByTagName("script")[0]||document.head;function h(){r.parentNode&&r.parentNode.removeChild(r),window[d]=o,l&&clearTimeout(l)}function f(){window[d]&&h()}return u&&(l=setTimeout(function(){h(),a&&a(new Error("Timeout"))},u)),window[d]=function(e){n("jsonp got",e),h(),a&&a(null,e)},e+=(~e.indexOf("?")?"&":"?")+c+"="+m(d),e=e.replace("?&","?"),n('jsonp req "%s"',e),r=document.createElement("script"),r.src=e,p.parentNode.insertBefore(r,p),f}}}]);
//# sourceMappingURL=historicalPlayback.59a93100.js.map