(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["alarmCenter"],{"1af6":function(e,t,a){var i=a("63b6");i(i.S,"Array",{isArray:a("9003")})},"20fd":function(e,t,a){"use strict";var i=a("d9f6"),n=a("aebd");e.exports=function(e,t,a){t in e?i.f(e,t,n(0,a)):e[t]=a}},"223f":function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"a",function(){return r}),a.d(t,"b",function(){return l}),a.d(t,"d",function(){return s}),a.d(t,"e",function(){return o}),a.d(t,"g",function(){return u}),a.d(t,"h",function(){return c}),a.d(t,"f",function(){return d});var i=a("2ade");function n(e){return Object(i["a"])({url:"/logs/page",method:"post",data:e,headers:{"content-type":"application/x-www-form-urlencoded"}})}function r(e){return Object(i["a"])({url:"/logs/delays",method:"post",data:e,headers:{"content-type":"application/x-www-form-urlencoded"}})}function l(e){return Object(i["a"])({url:"/logs/handles",method:"post",data:e,headers:{"content-type":"application/json"}})}function s(e){return Object(i["a"])({url:"/logs/checkDevice",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/file/exportBigExcel",method:"post",data:e,responseType:"arraybuffer",headers:{"content-type":"application/json"}})}function u(e){return Object(i["a"])({url:"/proxy/StandardApiAction_performanceReportPhotoListSafe",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/vip/check",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/eoms/packageAlarmRecordInfo/getPageList",method:"post",data:e})}},"2b5c":function(e,t,a){"use strict";var i=a("ca85"),n=a.n(i);n.a},3085:function(e,t,a){},"333d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];a("c5f6");Math.easeInOutQuad=function(e,t,a,i){return e/=i/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function l(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,a){var i=s(),n=e-i,o=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=o;var s=Math.easeInOutQuad(u,i,n,t);l(s),u<t?r(e):a&&"function"===typeof a&&a()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.currentPage=1,this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&o(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&o(0,800)}}},c=u,d=(a("abce"),a("2877")),p=Object(d["a"])(c,i,n,!1,null,"2d3d4633",null);t["a"]=p.exports},"40ee":function(e,t,a){},4468:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",attrs:{id:"alarmRecord"}},[a("div",{staticClass:"topBox filter-container"},[a("el-select",{staticClass:"filter-item",attrs:{multiple:"","collapse-tags":""},on:{change:e.changeType},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},[a("el-checkbox",{staticClass:"selectAll",on:{change:e.selectAll},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("全选")]),e._l(e.alarmTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})})],2),a("el-select",{staticClass:"filter-item",model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},e._l(e.alarmStatusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}),1),a("el-date-picker",{staticClass:"filter-item",attrs:{type:"date","value-format":"yyyy_MM_d",placeholder:"选择日期",clearable:!1},model:{value:e.seachTime,callback:function(t){e.seachTime=t},expression:"seachTime"}}),a("el-cascader",{ref:"myMdGunsCas",attrs:{"popper-class":"myGunCas",placeholder:"按枪支搜索",props:{expandTrigger:"hover",multiple:!0},options:e.dataGun,"show-all-levels":!1,clearable:"",filterable:"","collapse-tags":""},on:{change:function(t){return e.removeValid()}},model:{value:e.listQuery.imeiGun,callback:function(t){e.$set(e.listQuery,"imeiGun",t)},expression:"listQuery.imeiGun"}}),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")]),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"iconfont icondaochu",loading:e.exportLoading},on:{click:e.exportDo}},[e._v("导出")])],1),a("div",{staticClass:"tableBox"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",prop:"id",sortable:"custom",align:"center",width:"80",type:"index",index:e.indexMethod}}),1==e.power?a("el-table-column",{attrs:{label:"设备编号","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.objectId))])]}}],null,!1,1828197692)}):e._e(),a("el-table-column",{attrs:{label:"枪号","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.licenseNo))])]}}])}),a("el-table-column",{attrs:{label:"报警类型","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.alarmObj[i.expType]))])]}}])}),a("el-table-column",{attrs:{label:"创建时间","nin-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.formatTime(i.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"推迟时间","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.formatTime(i.delayTime)))])]}}])}),a("el-table-column",{attrs:{label:"处理人","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.handlerName))])]}}])}),a("el-table-column",{attrs:{label:"处理时间","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.formatTime(i.handlerTime)))])]}}])}),a("el-table-column",{attrs:{label:"备注","nin-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.handlerInfo))])]}}])}),a("el-table-column",{attrs:{label:"报警状态",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{class:{red:0==i.handler}},[e._v(e._s(e.alarmStatus(i.handler)))])]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center","min-width":"250","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0===i.handler||2===i.handler?a("el-button",{attrs:{type:"primary",size:"mini",icon:"iconfont iconchuli"},on:{click:function(t){return e.handleUpdate(i,"deal")}}},[e._v("处理")]):e._e(),a("el-button",{staticClass:"checkbtn",attrs:{type:"primary",size:"mini",disabled:!(0===i.handler&&i.uuid),icon:"iconfont iconyanchi"},on:{click:function(t){return e.handleUpdate(i,"check")}}},[e._v("延迟")])]}}])})],1)],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"page-sizes":[10,10,30],total:e.total,page:e.listQuery.page,limit:e.listQuery.limit,layout:"prev, pager, next, sizes, total, jumper"},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),a("el-dialog",{class:{delayStyle:"deal"!==e.dialogStatus},attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.temp,"label-position":"left"}},["deal"!==e.dialogStatus?a("el-form-item",{attrs:{label:"延迟时间(分钟)",prop:"time"}},[a("el-input",{model:{value:e.temp.time,callback:function(t){e.$set(e.temp,"time",e._n(t))},expression:"temp.time"}})],1):e._e(),"deal"===e.dialogStatus?a("el-form-item",{staticClass:"info",attrs:{label:"处理记录",prop:"info"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6}},model:{value:e.temp.info,callback:function(t){e.$set(e.temp,"info",t)},expression:"temp.info"}})],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){"deal"===e.dialogStatus?e.dealData():e.delayData()}}},[e._v("确定")])],1)],1)],1)},n=[],r=(a("a481"),a("bd86")),l=(a("34ef"),a("cebc")),s=a("75fc"),o=(a("28a5"),a("7f7f"),a("ac6a"),a("f3e2"),a("6d67"),a("333d")),u=a("223f"),c=a("ad19"),d=a("69d9");function p(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(i){var n=this;clearTimeout(t),t=setTimeout(function(){e.call(n,i)},a)}}var m={name:"alarmRcord",components:{Pagination:o["a"]},data:function(){return{power:JSON.parse(sessionStorage.getItem("userInfo")).Power,tableKey:0,list:[],total:0,listLoading:!1,listQuery:{page:1,limit:10,type:[],status:-1,keyword:"",imeiCar:[],imeiGun:[]},exportData:{expStatus:null,tableName:"",days:""},indexMethod:1,temp:{},dialogFormVisible:!1,dialogStatus:"",textMap:{deal:"处理",check:"延迟"},rules:{time:[{required:!0,message:"请填写延迟时间",trigger:"blur"}],info:[{required:!0,message:"请填写处理意见",trigger:"blur"}]},alarmTypeOptions:[{key:"拆卸报警",value:3},{key:"枪支网络异常",value:4},{key:"枪支超时未归还报警",value:701}],alarmObj:{1:"枪支偏离车辆",2:"车辆偏移路线",3:"拆卸报警",4:"枪支网络异常",5:"车辆信号丢失",6:"同一辆车周围少于2支枪",7:"未到规定时间内打卡",9:"车辆道路变换",10:"电量不足",11:"自定义的超速",12:"一键报警",13:"车载定位系统推送的超速",14:"未保留笼统的异常",15:"摄像头损坏",16:"摄像头无信号",400:"前车碰撞预警",401:"道路偏离预警",402:"行人检测预警",403:"驾驶员遮挡或镜头偏离位置",404:"不系安全带",618:"疲劳驾驶报警1级",619:"疲劳驾驶报警2级",620:"接打电话报警1级",621:"接打电话报警2级",622:"抽烟报警1级",623:"抽烟报警2级",624:"分神驾驶报警1级",625:"分神驾驶报警2级",626:"驾驶员异常报警1级",627:"驾驶员异常报警2级",630:"驾驶员变更事件1级",631:"驾驶员变更事件2级",701:"枪支超时未归还报警",711:"款箱数量异常报警"},alarmStatusOptions:[{key:"所有异常",value:-1},{key:"未处理异常",value:0},{key:"忽略异常",value:1},{key:"延迟处理异常",value:2},{key:"已处理异常",value:3}],seachTime:this.formatDateTime(new Date),seachTime1:this.formatDateTime(new Date),propsGun:{expandTrigger:"hover",multiple:!0},dataGun:[],imei2name:{},checked:!0,exportLoading:!1}},created:function(){var e=this;this.selectAll();var t=this.getTeamAndGunList();t.then(function(){e.getList()})},methods:{selectAll:function(){var e=this;this.listQuery.type=[],this.checked?this.alarmTypeOptions.map(function(t){e.listQuery.type.push(t.value)}):this.listQuery.type=[]},changeType:function(e){e.length===this.alarmTypeOptions.length?this.checked=!0:this.checked=!1},removeValid:function(){},getTeamAndGunList:function(){var e=this,t=this;return new Promise(function(a,i){Object(c["h"])({}).then(function(i){if(0==i.status){if(t.dataGun=e.formatCas(i.data,"iMei","code"),e.$route.params&&e.$route.params.imeiCar)t.listQuery.imeiGun=[],t.listQuery.type=[17];else for(var n=0;n<e.dataGun.length;n++)for(var r=0;r<e.dataGun[n].children.length;r++)t.listQuery.imeiGun.push([t.dataGun[n].value,e.dataGun[n].children[r].value]);a()}else e.$message.error(i.msg)})})},formatCas:function(e,t,a){var i=[],n=0,r=this,l=function(l){var s=[];return"报废车辆"==l?"continue":"报废枪支"==l?"continue":(e[l].forEach(function(e){""!==e[t]&&(s.push({value:e[t],label:e[a]}),r.imei2name[e[t]]=e[a])}),void i.push({value:"i".concat(n++),label:""==l?"未分组":l,children:s}))};for(var s in e)l(s);return i},exportDo:p(function(e){this.exportExcel()}),exportExcel:function(){var e=this;this.exportLoading=!0,this.exportData.tableName=this.seachTime.split("_")[0]+"_"+this.seachTime.split("_")[1];var t=this.seachTime,a=[],i={};this.exportData.expKeywords=[],this.exportData.days=this.seachTime.split("_")[2],this.exportData.expTypes=Object(s["a"])(this.listQuery.type),a=this.listQuery.imeiGun.concat(this.listQuery.imeiCar);for(var n=0;n<a.length;n++)this.exportData.expKeywords.push(a[n][1]);this.exportData.expStatus=this.listQuery.status;this.exportData.expType;var r=this.exportData.expStatus;i=Object(l["a"])({},this.exportData),i.excelType="1001",i.positive=!1,i.title="异常表导出",i.expKeywords=this.exportData.expKeywords.length?this.exportData.expKeywords:null,Object(u["e"])(i).then(function(a,i,n){try{var l=new TextDecoder("utf-8"),s=JSON.parse(l.decode(new Uint8Array(a)));e.$message({message:s.msg,type:"warning"})}catch(f){for(var o,u,c=new Blob([a],{type:"application/excel"}),d=document.createElement("a"),p=0;p<e.alarmTypeOptions.length;p++)if(e.listQuery.type==e.alarmTypeOptions[p].value){e.alarmTypeOptions[p].key;break}for(var m=0;m<e.alarmStatusOptions.length;m++)if(r==e.alarmStatusOptions[m].value){o=e.alarmStatusOptions[m].key;break}u=t+"--------"+o+"----报警记录.xlsx",d.href=window.URL.createObjectURL(c),d.download=u,d.click(),d.remove()}}).finally(function(){e.exportLoading=!1})},formatDateTime:function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var i=e.getDate(),n=(e.getHours(),e.getMinutes());return n=n<10?"0"+n:n,t+"_"+a+"_"+i},getList:function(){var e=this;this.seachTime1=this.seachTime,this.listLoading=!0,this.listQuery.tableName=this.seachTime.split("_")[0]+"_"+this.seachTime.split("_")[1],this.listQuery.days=this.seachTime.split("_")[2];var t=[],a=[],i={},n=null;t=this.listQuery.imeiCar.concat(this.listQuery.imeiGun);for(var r=0;r<t.length;r++)a.push(t[r][1]);i.page=this.listQuery.page,i.limit=this.listQuery.limit,i.types=Object(s["a"])(this.listQuery.type),i.status=this.listQuery.status,i.tableName=this.listQuery.tableName,i.days=this.listQuery.days,i.positive=!1,t.length&&(i.keywords=a),n=u["c"],n(i).then(function(t){e.list=t.data?t.data.records:[],e.total=t.data.total,e.indexMethod=(e.listQuery.page-1)*e.listQuery.limit+1,e.listLoading=!1}).finally(function(){e.listLoading=!1})},resetTemp:function(){this.temp={uuid:null,info:null}},dealData:function(){var e=this,t=this;this.$refs["dataForm"].validate(function(a){if(a){var i={};e.temp.uuid?i.uuidMap=Object(r["a"])({},e.temp.rowTime,[e.temp.uuid]):i.idMap=Object(r["a"])({},e.temp.rowTime,[e.temp.id]),i.handlerInfo=e.temp.info,Object(u["b"])(i).then(function(){t.getList(),t.dialogFormVisible=!1,t.$notify({title:"Success",message:"处理成功",type:"success",duration:2e3})}),e.dialogFormVisible=!1}})},handleUpdate:function(e,t){var a=this;this.resetTemp(),this.$nextTick(function(){a.$refs["dataForm"].clearValidate()}),this.temp.uuid=e.uuid,this.temp.id=e.id,this.temp.rowTime=this.formatTime(e.createTime).split(" ")[0].replace(/-/g,"_"),"deal"==t?this.dialogStatus="deal":(this.temp.uuid=e.uuid,this.dialogStatus="check"),this.dialogFormVisible=!0},delayData:function(){var e=this;this.$refs["dataForm"].validate(function(t){t&&(Object(u["a"])({uuids:[e.temp.uuid],time:e.temp.time}).then(function(){e.getList(),e.dialogFormVisible=!1,e.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3})}),e.dialogFormVisible=!1)})},formatTime1:function(e){return Object(d["d"])(e,1)},formatTime:function(e){return Object(d["e"])(e)},alarmStatus:function(e){return 0==e?"未处理":1==e?"忽略":2==e?"延迟处理":3==e?"处理完成":void 0},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2==0?"color-row":t%2==1?"noColor-row":""}}},f=m,h=(a("739e"),a("2877")),y=Object(h["a"])(f,i,n,!1,null,null,null);t["default"]=y.exports},"4b70":function(e,t,a){"use strict";var i=a("f44a"),n=a.n(i);n.a},"549b":function(e,t,a){"use strict";var i=a("d864"),n=a("63b6"),r=a("241e"),l=a("b0dc"),s=a("3702"),o=a("b447"),u=a("20fd"),c=a("7cd6");n(n.S+n.F*!a("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,n,d,p=r(e),m="function"==typeof this?this:Array,f=arguments.length,h=f>1?arguments[1]:void 0,y=void 0!==h,g=0,v=c(p);if(y&&(h=i(h,f>2?arguments[2]:void 0,2)),void 0==v||m==Array&&s(v))for(t=o(p.length),a=new m(t);t>g;g++)u(a,g,y?h(p[g],g):p[g]);else for(d=v.call(p),a=new m;!(n=d.next()).done;g++)u(a,g,y?l(d,h,[n.value,g],!0):n.value);return a.length=g,a}})},"54a1":function(e,t,a){a("6c1c"),a("1654"),e.exports=a("95d5")},6110:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",attrs:{id:"alarmRecord"}},[a("div",{staticClass:"topBox filter-container"},[a("el-select",{staticClass:"filter-item",attrs:{multiple:"","collapse-tags":""},on:{change:e.changeType},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},[a("el-checkbox",{staticClass:"selectAll",on:{change:e.selectAll},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("全选")]),e._l(e.alarmTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})})],2),a("el-select",{staticClass:"filter-item",model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},e._l(e.alarmStatusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}),1),a("el-date-picker",{staticClass:"filter-item",attrs:{type:"date","value-format":"yyyy_MM_d",placeholder:"选择日期",clearable:!1},model:{value:e.seachTime,callback:function(t){e.seachTime=t},expression:"seachTime"}}),a("el-cascader",{attrs:{placeholder:"按车辆搜索",props:e.propsCar,options:e.dataCar,"show-all-levels":!1,clearable:"",filterable:"","collapse-tags":""},on:{change:function(t){return e.removeValid()}},model:{value:e.listQuery.imeiCar,callback:function(t){e.$set(e.listQuery,"imeiCar",t)},expression:"listQuery.imeiCar"}}),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")]),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"iconfont icondaochu",loading:e.exportLoading},on:{click:e.exportDo}},[e._v("导出")])],1),a("div",{staticClass:"tableBox"},[e.mediaNone?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",prop:"id",sortable:"custom",align:"center",width:"80",type:"index",index:e.indexMethod}}),1==e.power?a("el-table-column",{attrs:{label:"设备编号","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.objectId))])]}}],null,!1,1828197692)}):e._e(),a("el-table-column",{attrs:{label:"车牌号","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.licenseNo))])]}}],null,!1,925694910)}),a("el-table-column",{attrs:{label:"报警类型","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.alarmObj[i.expType]))])]}}],null,!1,2520870819)}),a("el-table-column",{attrs:{label:"创建时间","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.formatTime(i.createTime)))])]}}],null,!1,571645698)}),a("el-table-column",{attrs:{label:"推迟时间","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.formatTime(i.delayTime)))])]}}],null,!1,1125694451)}),a("el-table-column",{attrs:{label:"处理人","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.handlerName))])]}}],null,!1,2680966363)}),a("el-table-column",{attrs:{label:"处理时间","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.formatTime(i.handlerTime)))])]}}],null,!1,2293151230)}),a("el-table-column",{attrs:{label:"备注","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.handlerInfo))])]}}],null,!1,2372153938)}),a("el-table-column",{attrs:{label:"报警状态",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{class:{red:0==i.handler}},[e._v(e._s(e.alarmStatus(i.handler)))])]}}],null,!1,3933120103)}),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center","min-width":"250","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{disabled:!(0===i.handler||2===i.handler),type:"primary",size:"mini",icon:"iconfont iconchuli"},on:{click:function(t){return e.handleUpdate(i,"deal")}}},[e._v("处理")]),a("el-button",{staticClass:"checkbtn",attrs:{type:"primary",size:"mini",disabled:!(0===i.handler&&i.uuid),icon:"iconfont iconyanchi"},on:{click:function(t){return e.handleUpdate(i,"check")}}},[e._v("延迟")])]}}],null,!1,1482595513)})],1):e._e()],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"page-sizes":[10,10,30],total:e.total,page:e.listQuery.page,limit:e.listQuery.limit,layout:"prev, pager, next, sizes, total, jumper"},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),a("el-dialog",{class:{delayStyle:"deal"!==e.dialogStatus},attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.temp,"label-position":"left"}},["deal"!==e.dialogStatus?a("el-form-item",{attrs:{label:"延迟时间(分钟)",prop:"time"}},[a("el-input",{model:{value:e.temp.time,callback:function(t){e.$set(e.temp,"time",e._n(t))},expression:"temp.time"}})],1):e._e(),"deal"===e.dialogStatus?a("el-form-item",{staticClass:"info",attrs:{label:"处理记录",prop:"info"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6}},model:{value:e.temp.info,callback:function(t){e.$set(e.temp,"info",t)},expression:"temp.info"}})],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){"deal"===e.dialogStatus?e.dealData():e.delayData()}}},[e._v("确定")])],1)],1)],1)},n=[],r=(a("a481"),a("bd86")),l=(a("34ef"),a("cebc")),s=(a("57e7"),a("75fc")),o=(a("28a5"),a("7f7f"),a("ac6a"),a("f3e2"),a("6d67"),a("333d")),u=a("223f"),c=a("ad19"),d=a("69d9");function p(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(i){var n=this;clearTimeout(t),t=setTimeout(function(){e.call(n,i)},a)}}var m={name:"alarmRcord",components:{Pagination:o["a"]},data:function(){return{power:JSON.parse(sessionStorage.getItem("userInfo")).Power,tableKey:0,list:[],total:0,listLoading:!1,listQuery:{page:1,limit:10,type:[],status:-1,type1:[400,401,402,403,404,618,619,620,621,622,623,624,625,626,627,630,631],keyword:"",imeiCar:[],imeiGun:[]},exportData:{expStatus:null,tableName:"",days:""},indexMethod:1,temp:{},dialogFormVisible:!1,dialogStatus:"",textMap:{deal:"处理",check:"延迟"},rules:{time:[{required:!0,message:"请填写延迟时间",trigger:"blur"}],info:[{required:!0,message:"请填写处理意见",trigger:"blur"}]},alarmTypeOptions:[{key:"车辆信号丢失",value:5},{key:"自定义的超速",value:11},{key:"一键报警",value:12},{key:"车载定位系统推送的超速",value:13},{key:"摄像头损坏",value:15},{key:"摄像头无信号",value:16}],adasDmsaAlarmTypeOptions:[{key:"前车碰撞预警",value:400},{key:"道路偏离预警",value:401},{key:"行人检测预警",value:402},{key:"驾驶员遮挡或镜头偏离位置",value:403},{key:"疲劳驾驶报警1级",value:618},{key:"疲劳驾驶报警2级",value:619},{key:"接打电话报警1级",value:620},{key:"接打电话报警2级",value:621},{key:"抽烟报警1级",value:622},{key:"抽烟报警2级",value:623},{key:"分神驾驶报警1级",value:624},{key:"分神驾驶报警2级",value:625},{key:"驾驶员异常报警1级",value:626},{key:"驾驶员异常报警2级",value:627}],alarmObj:{1:"枪支偏离车辆",2:"车辆偏移路线",3:"拆卸报警",4:"枪支网络异常",5:"车辆信号丢失",6:"同一辆车周围少于2支枪",7:"未到规定时间内打卡",9:"车辆道路变换",10:"电量不足",11:"自定义的超速",12:"一键报警",13:"车载定位系统推送的超速",14:"未保留笼统的异常",15:"摄像头损坏",16:"摄像头无信号",400:"前车碰撞预警",401:"道路偏离预警",402:"行人检测预警",403:"驾驶员遮挡或镜头偏离位置",404:"不系安全带",618:"疲劳驾驶报警1级",619:"疲劳驾驶报警2级",620:"接打电话报警1级",621:"接打电话报警2级",622:"抽烟报警1级",623:"抽烟报警2级",624:"分神驾驶报警1级",625:"分神驾驶报警2级",626:"驾驶员异常报警1级",627:"驾驶员异常报警2级",630:"驾驶员变更事件1级",631:"驾驶员变更事件2级",701:"枪支超时未归还报警",711:"款箱数量异常报警"},alarmStatusOptions:[{key:"所有异常",value:-1},{key:"未处理异常",value:0},{key:"忽略异常",value:1},{key:"延迟处理异常",value:2},{key:"已处理异常",value:3}],seachTime:this.formatDateTime(new Date),seachTime1:this.formatDateTime(new Date),carOrGun:null,onlineTime:null,propsCar:{expandTrigger:"hover",multiple:!0},propsGun:{expandTrigger:"hover",multiple:!0},dataCar:[],dataGun:[],imei2name:{},gunAlarmType:[1,3,4,10,12],carAlarmType:[2,5,6,7,9,11,13,14,15,16,17],tableBoxType:"NOADAS",checked:!0,selectedArray:[],exportLoading:!1}},props:["mediaNone"],created:function(){var e=this;this.selectAll();var t=this.getTeamAndCarList();t.then(function(){e.getList()})},methods:{selectAll:function(){var e=this;this.listQuery.type=[],this.checked?this.alarmTypeOptions.map(function(t){e.listQuery.type.push(t.value)}):this.listQuery.type=[]},changeType:function(e){e.length===this.alarmTypeOptions.length?this.checked=!0:this.checked=!1},removeValid:function(){},getTeamAndCarList:function(){var e=this,t=this;return new Promise(function(a,i){Object(c["f"])({}).then(function(i){if(0==i.status){if(t.dataCar=e.formatCas(i.data,"serialNo","licenseNo"),e.$route.params&&e.$route.params.imeiCar)t.listQuery.imeiCar=e.$route.params.imeiCar,t.listQuery.type=[17];else for(var n=0;n<e.dataCar.length;n++)for(var r=0;r<e.dataCar[n].children.length;r++)t.listQuery.imeiCar.push([t.dataCar[n].value,e.dataCar[n].children[r].value]);a()}else e.$message.error(i.msg)})})},formatCas:function(e,t,a){var i=[],n=0,r=this,l=function(l){var s=[];return"报废车辆"==l?"continue":"报废枪支"==l?"continue":(e[l].forEach(function(e){""!==e[t]&&(s.push({value:e[t],label:e[a]}),r.imei2name[e[t]]=e[a])}),void i.push({value:"i".concat(n++),label:""==l?"未分组":l,children:s}))};for(var s in e)l(s);return i},exportDo:p(function(e){this.exportExcel()}),exportExcel:function(){var e=this;this.exportLoading=!0,this.exportData.tableName=this.seachTime.split("_")[0]+"_"+this.seachTime.split("_")[1];var t=this.seachTime,a=[],i={};this.exportData.expKeywords=[],this.exportData.days=this.seachTime.split("_")[2],this.exportData.expTypes=Object(s["a"])(this.listQuery.type);var n=this.exportData.expTypes.indexOf(17);-1!==n&&(this.exportData.expTypes.splice(n,1),this.exportData.expTypes=this.exportData.expTypes.concat(this.listQuery.type1)),a=this.listQuery.imeiGun.concat(this.listQuery.imeiCar);for(var r=0;r<a.length;r++)this.exportData.expKeywords.push(a[r][1]);this.exportData.expStatus=this.listQuery.status;this.exportData.expType;var o=this.exportData.expStatus;i=Object(l["a"])({},this.exportData),i.excelType="1001",i.positive=!1,i.title="异常表导出",i.expKeywords=this.exportData.expKeywords.length?this.exportData.expKeywords:null,Object(u["e"])(i).then(function(a,i,n){try{var r=new TextDecoder("utf-8"),l=JSON.parse(r.decode(new Uint8Array(a)));e.$message({message:l.msg,type:"warning"})}catch(f){for(var s,u,c=new Blob([a],{type:"application/excel"}),d=document.createElement("a"),p=0;p<e.alarmTypeOptions.length;p++)if(e.listQuery.type==e.alarmTypeOptions[p].value){e.alarmTypeOptions[p].key;break}for(var m=0;m<e.alarmStatusOptions.length;m++)if(o==e.alarmStatusOptions[m].value){s=e.alarmStatusOptions[m].key;break}u=t+"--------"+s+"----报警记录.xlsx",d.href=window.URL.createObjectURL(c),d.download=u,d.click(),d.remove()}}).finally(function(){e.exportLoading=!1})},formatDateTime:function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var i=e.getDate(),n=(e.getHours(),e.getMinutes());return n=n<10?"0"+n:n,t+"_"+a+"_"+i},getList:function(){var e=this;this.seachTime1=this.seachTime,this.listLoading=!0,this.listQuery.tableName=this.seachTime.split("_")[0]+"_"+this.seachTime.split("_")[1],this.listQuery.days=this.seachTime.split("_")[2];var t=[],a=[],i={},n=null;t=this.listQuery.imeiCar.concat(this.listQuery.imeiGun);for(var r=0;r<t.length;r++)a.push(t[r][1]);i.page=this.listQuery.page,i.limit=this.listQuery.limit,i.types=Object(s["a"])(this.listQuery.type);var l=i.types.indexOf(17);-1!==l&&(i.types.splice(l,1),i.types=i.types.concat(this.listQuery.type1)),i.status=this.listQuery.status,i.tableName=this.listQuery.tableName,i.days=this.listQuery.days,i.positive=!1,t.length&&(i.keywords=a),n=u["c"],n(i).then(function(t){e.list=t.data?t.data.records:[],e.total=t.data.total,e.indexMethod=(e.listQuery.page-1)*e.listQuery.limit+1,e.listLoading=!1}).finally(function(){e.listLoading=!1})},resetTemp:function(){this.temp={uuid:null,info:null}},dealData:function(){var e=this,t=this;this.$refs["dataForm"].validate(function(a){if(a){var i={};e.temp.uuid?i.uuidMap=Object(r["a"])({},e.temp.rowTime,[e.temp.uuid]):i.idMap=Object(r["a"])({},e.temp.rowTime,[e.temp.id]),i.handlerInfo=e.temp.info,Object(u["b"])(i).then(function(){t.getList(),t.dialogFormVisible=!1,t.$notify({title:"Success",message:"处理成功",type:"success",duration:2e3})}),e.dialogFormVisible=!1}})},handleUpdate:function(e,t){var a=this;this.resetTemp(),this.$nextTick(function(){a.$refs["dataForm"].clearValidate()}),this.temp.uuid=e.uuid,this.temp.id=e.id,this.temp.rowTime=this.formatTime(e.createTime).split(" ")[0].replace(/-/g,"_"),"deal"==t?this.dialogStatus="deal":(this.temp.uuid=e.uuid,this.dialogStatus="check"),this.dialogFormVisible=!0},delayData:function(){var e=this;this.$refs["dataForm"].validate(function(t){t&&(Object(u["a"])({uuids:[e.temp.uuid],time:e.temp.time}).then(function(){e.getList(),e.dialogFormVisible=!1,e.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3})}),e.dialogFormVisible=!1)})},formatTime1:function(e){return Object(d["d"])(e,1)},formatTime:function(e){return Object(d["e"])(e)},alarmStatus:function(e){return 0==e?"未处理":1==e?"忽略":2==e?"延迟处理":3==e?"处理完成":void 0},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2==0?"color-row":t%2==1?"noColor-row":""}}},f=m,h=(a("f0af"),a("2877")),y=Object(h["a"])(f,i,n,!1,null,null,null);t["default"]=y.exports},"66e8":function(e,t,a){"use strict";a.d(t,"j",function(){return n}),a.d(t,"g",function(){return r}),a.d(t,"i",function(){return l}),a.d(t,"a",function(){return s}),a.d(t,"f",function(){return o}),a.d(t,"e",function(){return u}),a.d(t,"b",function(){return c}),a.d(t,"k",function(){return d}),a.d(t,"c",function(){return p}),a.d(t,"h",function(){return m}),a.d(t,"d",function(){return f});var i=a("2ade");function n(e){return Object(i["a"])({url:"teams/select",method:"post",data:e})}function r(e){return Object(i["a"])({url:"persons/select",method:"post",data:e})}function l(e){return Object(i["a"])({url:"persons/selectByCondition",method:"post",data:e,headers:{"content-type":"application/json"}})}function s(e){return Object(i["a"])({url:"cars/select",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/map/routeByStatus",method:"post",data:e})}function u(e){return Object(i["a"])({url:"logs/invoke",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/file/exportExcel",method:"post",data:e,responseType:"arraybuffer",headers:{"content-type":"application/json"}})}function d(e){return Object(i["a"])({url:"/noapp/file/xxx/upload",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/file/importExcel",method:"post",data:e})}function m(e){return Object(i["a"])({url:"/eoms/schedulings/queryTaskByIds",method:"post",data:e})}function f(e){return Object(i["a"])({url:"/file/importFile",method:"post",data:e})}},"69d9":function(e,t,a){"use strict";a.d(t,"d",function(){return i}),a.d(t,"c",function(){return n}),a.d(t,"e",function(){return r}),a.d(t,"a",function(){return l}),a.d(t,"b",function(){return s});a("ac6a"),a("f3e2"),a("8ea5"),a("a481"),a("0298"),a("df7c");function i(e,t){var a=new Date(e),i=a.getFullYear(),r=n(a.getMonth()+1),l=n(a.getDate()),s=n(a.getHours()),o=n(a.getMinutes()),u=n(a.getSeconds());return 1==t?i+"-"+r+"-"+l+" "+s+":"+o+":"+u:i+"-"+r+"-"+l}function n(e){return e<10?"0"+e:e}function r(e){var t=new Date(e).toJSON();return new Date(+new Date(t)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"")}function l(e){var t=p(e.lat,e.lng),a=new BMap.Point(t[1],t[0]);return a}function s(e){var t=[];return e.forEach(function(e){var a=p(e.lat,e.lng),i=new BMap.Point(a[1],a[0]);t.push(i)}),t}var o=3.141592653589793,u=6378245,c=.006693421622965943,d=52.35987755982988;function p(e,t){var a=f(e,t),i=m(a[0],a[1]);return i}function m(e,t){var a=t,i=e,n=Math.sqrt(a*a+i*i)+2e-5*Math.sin(i*d),r=Math.atan2(i,a)+3e-6*Math.cos(a*d),l=n*Math.cos(r)+.0065,s=n*Math.sin(r)+.006,o=[];return o.push(s),o.push(l),o}function f(e,t){var a=h(t-105,e-35),i=y(t-105,e-35),n=e/180*o,r=Math.sin(n);r=1-c*r*r;var l=Math.sqrt(r);a=180*a/(u*(1-c)/(r*l)*o),i=180*i/(u/l*Math.cos(n)*o);var s=e+a,d=t+i,p=[];return p.push(s),p.push(d),p}function h(e,t){var a=2*e-100+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return a+=2*(20*Math.sin(6*e*o)+20*Math.sin(2*e*o))/3,a+=2*(20*Math.sin(t*o)+40*Math.sin(t/3*o))/3,a+=2*(160*Math.sin(t/12*o)+320*Math.sin(t*o/30))/3,a}function y(e,t){var a=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return a+=2*(20*Math.sin(6*e*o)+20*Math.sin(2*e*o))/3,a+=2*(20*Math.sin(e*o)+40*Math.sin(e/3*o))/3,a+=2*(150*Math.sin(e/12*o)+300*Math.sin(e/30*o))/3,a}},"739e":function(e,t,a){"use strict";var i=a("40ee"),n=a.n(i);n.a},"75fc":function(e,t,a){"use strict";var i=a("a745"),n=a.n(i);function r(e){if(n()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var l=a("774e"),s=a.n(l),o=a("c8bb"),u=a.n(o);function c(e){if(u()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return s()(e)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(e){return r(e)||c(e)||d()}a.d(t,"a",function(){return p})},"774e":function(e,t,a){e.exports=a("d2d5")},"797a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",attrs:{id:"packageAlarm"}},[a("div",{staticClass:"multidevice filter-container"},[a("div",{staticClass:"selectBox"},[a("el-form",{ref:"mdForm",staticClass:"mdElForm",attrs:{inline:!0,rules:e.mdRule,model:e.mdForm,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"type"}},[a("el-select",{staticClass:"filter-item",attrs:{multiple:"","collapse-tags":""},model:{value:e.mdForm.type,callback:function(t){e.$set(e.mdForm,"type",t)},expression:"mdForm.type"}},e._l(e.alarmTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}),1)],1),a("el-form-item",{attrs:{prop:"seachTime"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,"picker-options":e.pickerOptions},model:{value:e.mdForm.seachTime,callback:function(t){e.$set(e.mdForm,"seachTime",t)},expression:"mdForm.seachTime"}})],1),a("el-form-item",[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"按路线筛选","collapse-tags":""},model:{value:e.mdForm.routeId,callback:function(t){e.$set(e.mdForm,"routeId",t)},expression:"mdForm.routeId"}},e._l(e.geometryOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",[a("el-select",{attrs:{filterable:"",placeholder:"按车辆筛选"},model:{value:e.mdForm.carId,callback:function(t){e.$set(e.mdForm,"carId",e._n(t))},expression:"mdForm.carId"}},e._l(e.carOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.licenseNo,value:e.id}})}),1)],1),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")])],1)],1)]),a("div",{staticClass:"tableBox"},[e.mediaNone?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",prop:"id",sortable:"custom",align:"center",width:"80",type:"index",index:e.indexMethod}}),a("el-table-column",{attrs:{label:"库包名称","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.packageName))])]}}],null,!1,1397719545)}),a("el-table-column",{attrs:{label:"网点名称","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.destinationName))])]}}],null,!1,2217729695)}),a("el-table-column",{attrs:{label:"路线名称","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.routeName))])]}}],null,!1,203381146)}),a("el-table-column",{attrs:{label:"车牌号","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.carLicenseNo))])]}}],null,!1,769286414)}),a("el-table-column",{attrs:{label:"业务员","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.businessName))])]}}],null,!1,2558839429)}),a("el-table-column",{attrs:{label:"额外的业务员","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.addBusinessName))])]}}],null,!1,119521732)}),a("el-table-column",{attrs:{label:"出入库类型","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(1==i.inOutType?"入库":2==i.inOutType?"出库":3==i.inOutType?"入网点":"出网点"))])]}}],null,!1,3455063744)}),a("el-table-column",{attrs:{label:"报警类型","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.alarmObj[i.expType]))])]}}],null,!1,2520870819)}),a("el-table-column",{attrs:{label:"创建时间","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.formatTime(i.createTime)))])]}}],null,!1,571645698)}),a("el-table-column",{attrs:{label:"处理人","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.handlerName))])]}}],null,!1,2680966363)}),a("el-table-column",{attrs:{label:"处理时间","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.formatTime(i.handlerTime)))])]}}],null,!1,2293151230)}),a("el-table-column",{attrs:{label:"备注","min-width":"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.handlerInfo))])]}}],null,!1,2372153938)}),a("el-table-column",{attrs:{label:"报警状态","min-width":"80px",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{class:{red:0==i.handler}},[e._v(e._s(0==i.handler?"未处理":"已处理"))])]}}],null,!1,2617421356)}),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center","min-width":"100","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{disabled:!(0===i.handler||2===i.handler),type:"primary",size:"mini",icon:"iconfont iconchuli"},on:{click:function(t){return e.handleUpdate(i,"deal")}}},[e._v("处理")])]}}],null,!1,1590973819)})],1):e._e()],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"page-sizes":[10,10,30],total:e.total,page:e.listQuery.page,limit:e.listQuery.limit,layout:"prev, pager, next, sizes, total, jumper"},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),a("el-dialog",{class:{delayStyle:"deal"!==e.dialogStatus},attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.temp,"label-position":"left"}},["deal"===e.dialogStatus?a("el-form-item",{staticClass:"info",attrs:{label:"处理记录",prop:"info"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6}},model:{value:e.temp.info,callback:function(t){e.$set(e.temp,"info",t)},expression:"temp.info"}})],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.dealData}},[e._v("确定")])],1)],1)],1)},n=[],r=(a("28a5"),a("a481"),a("bd86")),l=a("333d"),s=a("223f"),o=a("69d9"),u=a("66e8"),c={name:"alarmRcord",components:{Pagination:l["a"]},data:function(){var e=this;return{power:JSON.parse(sessionStorage.getItem("userInfo")).Power,tableKey:0,list:[],total:0,listLoading:!1,listQuery:{page:1,limit:10,type:[]},indexMethod:1,temp:{},dialogFormVisible:!1,dialogStatus:"",textMap:{deal:"处理",check:"延迟"},rules:{info:[{required:!0,message:"请填写处理意见",trigger:"blur"}]},alarmTypeOptions:[{key:"新增的库包报警",value:721},{key:"丢失的库包报警",value:722}],geometryOptions:[{id:null,name:"请选择路线"}],carOptions:[],alarmObj:{721:"新增的库包报警",722:"丢失的库包报警"},seachTime:[this.formatDate(new Date),this.formatDate(new Date)],exportLoading:!1,mdRule:{type:[{trigger:"change",message:"请选择报警类型",required:!0}],seachTime:[{trigger:"change",message:"请选择时间",required:!0}]},mdForm:{type:[721,722],seachTime:[new Date,new Date]},pickerOptions:{disabledDate:function(t){return null!=e.selectDate&&e.selectDate.getMonth()!=t.getMonth()},onPick:function(t){t.minDate&&!t.maxDate?e.selectDate=t.minDate:e.selectDate=null}}}},props:["mediaNone"],created:function(){var e=this;this.getList(),Object(u["a"])({status:1}).then(function(t){if(0==t.status){if(null==t.data)return;e.carOptions=t.data,e.carOptions.unshift({id:null,licenseNo:"请选择"})}else null==t.data&&(e.carOptions=[]),e.$message.error(t.msg)}),Object(u["f"])().then(function(t){if(0==t.status){if(null==t.data)return;e.geometryOptions=t.data,e.geometryOptions.unshift({id:null,name:"请选择"})}else null==t.data&&(e.geometryOptions=[],e.geometryOptions.unshift({id:null,name:"请选择"})),e.$message.error(t.msg)})},methods:{formatDate:o["d"],handleFilter:function(){this.listQuery.page=1,this.getList()},getList:function(){var e,t=this,a={};e=s["f"],a={current:this.listQuery.page,limit:this.listQuery.limit,expTypeList:this.mdForm.type,startTime:this.formatDate(this.mdForm.seachTime[0])+" 00:00:00",endTime:this.formatDate(this.mdForm.seachTime[1])+" 00:00:00"},this.mdForm.routeId&&(a.routeId=this.mdForm.routeId),this.mdForm.carId&&(a.carId=this.mdForm.carId),e(a).then(function(e){t.list=e.data.data?e.data.data:[],t.total=e.data.count,t.indexMethod=(t.listQuery.page-1)*t.listQuery.limit+1,t.listLoading=!1}).finally(function(){t.listLoading=!1})},resetTemp:function(){this.temp={expLogId:null,info:null}},dealData:function(){var e=this,t=this;this.$refs["dataForm"].validate(function(a){if(a){var i={};i.idMap=Object(r["a"])({},e.temp.rowTime,[e.temp.expLogId]),i.handlerInfo=e.temp.info,Object(s["b"])(i).then(function(){t.getList(),t.dialogFormVisible=!1,t.$notify({title:"Success",message:"处理成功",type:"success",duration:2e3})}),e.dialogFormVisible=!1}})},handleUpdate:function(e,t){var a=this;this.resetTemp(),this.$nextTick(function(){a.$refs["dataForm"].clearValidate()}),this.temp.expLogId=e.expLogId,this.temp.rowTime=this.formatTime(e.createTime).split(" ")[0].replace(/-/g,"_"),"deal"==t&&(this.dialogStatus="deal"),this.dialogFormVisible=!0},formatTime:function(e){return Object(o["e"])(e)},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2==0?"color-row":t%2==1?"noColor-row":""}}},d=c,p=(a("2b5c"),a("2877")),m=Object(p["a"])(d,i,n,!1,null,null,null);t["default"]=m.exports},"95d5":function(e,t,a){var i=a("40c3"),n=a("5168")("iterator"),r=a("481b");e.exports=a("584a").isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||r.hasOwnProperty(i(t))}},a745:function(e,t,a){e.exports=a("f410")},abce:function(e,t,a){"use strict";var i=a("e052"),n=a.n(i);n.a},ad19:function(e,t,a){"use strict";a.d(t,"g",function(){return n}),a.d(t,"f",function(){return r}),a.d(t,"h",function(){return l}),a.d(t,"d",function(){return s}),a.d(t,"c",function(){return o}),a.d(t,"e",function(){return u}),a.d(t,"j",function(){return c}),a.d(t,"a",function(){return d}),a.d(t,"b",function(){return p}),a.d(t,"i",function(){return m});var i=a("2ade");function n(e){return Object(i["a"])({url:"/cars/allList",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/cars/allBindList",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/guns/allList",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/logs/delays",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/map/lastgps",method:"post",data:e,headers:{"content-type":"application/json"}})}function u(e){return Object(i["a"])({url:"/terminal/send",method:"post",data:e,headers:{"content-type":"application/json"}})}function c(e){return Object(i["a"])({url:"/proxy/StandardApiAction_vehicleControlOthers",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/eoms/relations/queryByCars",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/eoms/relations/queryByGuns",method:"post",data:e})}function m(e){return Object(i["a"])({url:"/noapp/thirdparty/gaode/regeo",method:"post",data:e})}},c8bb:function(e,t,a){e.exports=a("54a1")},c978:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",attrs:{id:"alarmRecord"}},[a("div",{staticClass:"topBox filter-container"},[a("el-select",{staticClass:"filter-item",attrs:{multiple:"","collapse-tags":""},on:{change:e.changeType},model:{value:e.listQuery.type1,callback:function(t){e.$set(e.listQuery,"type1",t)},expression:"listQuery.type1"}},[a("el-checkbox",{staticClass:"selectAll",on:{change:e.selectAll},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("全选")]),e._l(e.adasDmsaAlarmTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})})],2),a("el-select",{staticClass:"filter-item",model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},e._l(e.alarmStatusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.key,value:e.value}})}),1),a("el-date-picker",{staticClass:"filter-item",attrs:{type:"date","value-format":"yyyy_MM_d",placeholder:"选择日期",clearable:!1},model:{value:e.seachTime,callback:function(t){e.seachTime=t},expression:"seachTime"}}),a("el-cascader",{attrs:{placeholder:"按车辆搜索",props:e.propsCar,options:e.dataCar,"show-all-levels":!1,clearable:"",filterable:"","collapse-tags":""},on:{change:function(t){return e.removeValid()}},model:{value:e.listQuery.imeiCar,callback:function(t){e.$set(e.listQuery,"imeiCar",t)},expression:"listQuery.imeiCar"}}),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("搜索")]),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"iconfont icondaochu",loading:e.exportLoading},on:{click:e.exportDo}},[e._v("导出")])],1),a("div",{staticClass:"tableBox"},[e.mediaNone?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",prop:"id",sortable:"custom",align:"center",width:"80",type:"index",index:e.indexMethod}}),1==e.power?a("el-table-column",{attrs:{label:"设备编号","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.objectId))])]}}],null,!1,1828197692)}):e._e(),a("el-table-column",{attrs:{label:"车牌号","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.licenseNo))])]}}],null,!1,925694910)}),a("el-table-column",{attrs:{label:"报警类型","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.alarmObj[i.expType]))])]}}],null,!1,2520870819)}),a("el-table-column",{attrs:{label:"创建时间","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.formatTime(i.createTime)))])]}}],null,!1,571645698)}),a("el-table-column",{attrs:{label:"处理人","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.handlerName))])]}}],null,!1,2680966363)}),a("el-table-column",{attrs:{label:"处理时间","min-width":"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(e.formatTime(i.handlerTime)))])]}}],null,!1,2293151230)}),a("el-table-column",{attrs:{label:"备注","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.handlerInfo))])]}}],null,!1,2372153938)}),a("el-table-column",{attrs:{label:"报警状态",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{class:{red:0==i.handler}},[e._v(e._s(e.alarmStatus(i.handler)))])]}}],null,!1,3933120103)}),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center","min-width":"250","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{disabled:!(0===i.handler||2===i.handler),type:"primary",size:"mini",icon:"iconfont iconchuli"},on:{click:function(t){return e.handleUpdate(i,"deal")}}},[e._v("处理")]),a("el-button",{staticClass:"checkbtn",attrs:{type:"primary",size:"mini",icon:"iconfont iconchakan",disabled:i.expType<17||i.expType>=700},on:{click:function(t){return e.checkEvidence(i)}}},[e._v("查看证据")])]}}],null,!1,2685709593)})],1):e._e()],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"page-sizes":[10,10,30],total:e.total,page:e.listQuery.page,limit:e.listQuery.limit,layout:"prev, pager, next, sizes, total, jumper"},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),a("el-dialog",{class:{delayStyle:"deal"!==e.dialogStatus},attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.temp,"label-position":"left"}},["deal"!==e.dialogStatus?a("el-form-item",{attrs:{label:"延迟时间(分钟)",prop:"time"}},[a("el-input",{model:{value:e.temp.time,callback:function(t){e.$set(e.temp,"time",e._n(t))},expression:"temp.time"}})],1):e._e(),"deal"===e.dialogStatus?a("el-form-item",{staticClass:"info",attrs:{label:"处理记录",prop:"info"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6}},model:{value:e.temp.info,callback:function(t){e.$set(e.temp,"info",t)},expression:"temp.info"}})],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){"deal"===e.dialogStatus?e.dealData():e.delayData()}}},[e._v("确定")])],1)],1)],1)},n=[],r=(a("a481"),a("bd86")),l=(a("34ef"),a("cebc")),s=(a("57e7"),a("75fc")),o=(a("28a5"),a("7f7f"),a("ac6a"),a("f3e2"),a("6d67"),a("333d")),u=a("223f"),c=a("ad19"),d=a("69d9");function p(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(i){var n=this;clearTimeout(t),t=setTimeout(function(){e.call(n,i)},a)}}var m={name:"alarmRcord",components:{Pagination:o["a"]},data:function(){return{power:JSON.parse(sessionStorage.getItem("userInfo")).Power,tableKey:0,checked:!0,list:[],list1:[],total:0,listLoading:!1,listQuery:{page:1,limit:10,type:[17],status:-1,type1:[400,401,402,403,404,618,619,620,621,622,623,624,625,626,627,630,631],keyword:"",imeiCar:[],imeiGun:[]},exportData:{expStatus:null,tableName:"",days:""},indexMethod:1,temp:{},dialogFormVisible:!1,dialogStatus:"",textMap:{deal:"处理",check:"延迟"},rules:{time:[{required:!0,message:"请填写延迟时间",trigger:"blur"}],info:[{required:!0,message:"请填写处理意见",trigger:"blur"}]},alarmTypeOptions:[{key:"拆卸报警",value:3},{key:"枪支网络异常",value:4},{key:"车辆信号丢失",value:5},{key:"自定义的超速",value:11},{key:"一键报警",value:12},{key:"车载定位系统推送的超速",value:13},{key:"摄像头损坏",value:15},{key:"摄像头无信号",value:16},{key:"ADAS和DSM报警",value:17},{key:"枪支超时未归还报警",value:701},{key:"款箱数量异常报警",value:711}],adasDmsaAlarmTypeOptions:[{key:"前车碰撞预警",value:400},{key:"道路偏离预警",value:401},{key:"行人检测预警",value:402},{key:"驾驶员遮挡或镜头偏离位置",value:403},{key:"疲劳驾驶报警1级",value:618},{key:"疲劳驾驶报警2级",value:619},{key:"接打电话报警1级",value:620},{key:"接打电话报警2级",value:621},{key:"抽烟报警1级",value:622},{key:"抽烟报警2级",value:623},{key:"分神驾驶报警1级",value:624},{key:"分神驾驶报警2级",value:625},{key:"驾驶员异常报警1级",value:626},{key:"驾驶员异常报警2级",value:627}],alarmObj:{1:"枪支偏离车辆",2:"车辆偏移路线",3:"拆卸报警",4:"枪支网络异常",5:"车辆信号丢失",6:"同一辆车周围少于2支枪",7:"未到规定时间内打卡",9:"车辆道路变换",10:"电量不足",11:"自定义的超速",12:"一键报警",13:"车载定位系统推送的超速",14:"未保留笼统的异常",15:"摄像头损坏",16:"摄像头无信号",400:"前车碰撞预警",401:"道路偏离预警",402:"行人检测预警",403:"驾驶员遮挡或镜头偏离位置",404:"不系安全带",618:"疲劳驾驶报警1级",619:"疲劳驾驶报警2级",620:"接打电话报警1级",621:"接打电话报警2级",622:"抽烟报警1级",623:"抽烟报警2级",624:"分神驾驶报警1级",625:"分神驾驶报警2级",626:"驾驶员异常报警1级",627:"驾驶员异常报警2级",630:"驾驶员变更事件1级",631:"驾驶员变更事件2级",701:"枪支超时未归还报警",711:"款箱数量异常报警"},alarmStatusOptions:[{key:"所有异常",value:-1},{key:"未处理异常",value:0},{key:"忽略异常",value:1},{key:"延迟处理异常",value:2},{key:"已处理异常",value:3}],seachTime:this.formatDateTime(new Date),seachTime1:this.formatDateTime(new Date),propsCar:{expandTrigger:"hover",multiple:!0},dataCar:[],imei2name:{},carAlarmType:[2,5,6,7,9,11,13,14,15,16,17],exportLoading:!1}},props:["mediaNone"],created:function(){var e=this,t=this.getTeamAndCarList();t.then(function(t){e.getList()})},methods:{selectAll:function(){var e=this;this.listQuery.type1=[],this.checked?this.adasDmsaAlarmTypeOptions.map(function(t){e.listQuery.type1.push(t.value)}):this.listQuery.type1=[]},changeType:function(e){e.length===this.adasDmsaAlarmTypeOptions.length?this.checked=!0:this.checked=!1},checkEvidence:function(e){var t=this.formatTime(e.createTime),a=this.formatTime(e.createTime);this.$router.push({path:"/alarmEvidence",query:{devId:e.objectId,alarmType:e.expType,alarmTime:this.formatTime(new Date(t).getTime()-3e4),endTime:this.formatTime(new Date(a).getTime()+3e4)}})},removeValid:function(){},getTeamAndCarList:function(){var e=this,t=this;return new Promise(function(a,i){Object(c["f"])({}).then(function(i){if(0==i.status){if(t.dataCar=e.formatCas(i.data,"serialNo","licenseNo"),e.$route.params&&e.$route.params.imeiCar)t.listQuery.imeiCar=e.$route.params.imeiCar,t.listQuery.type=[17];else for(var n=0;n<e.dataCar.length;n++)for(var r=0;r<e.dataCar[n].children.length;r++)t.listQuery.imeiCar.push([t.dataCar[n].value,e.dataCar[n].children[r].value]);a()}else e.$message.error(i.msg)})})},formatCas:function(e,t,a){var i=[],n=0,r=this,l=function(l){var s=[];return"报废车辆"==l?"continue":"报废枪支"==l?"continue":(e[l].forEach(function(e){""!==e[t]&&(s.push({value:e[t],label:e[a]}),r.imei2name[e[t]]=e[a])}),void i.push({value:"i".concat(n++),label:""==l?"未分组":l,children:s}))};for(var s in e)l(s);return i},exportDo:p(function(e){this.exportExcel()}),exportExcel:function(){var e=this;this.exportLoading=!0,this.exportData.tableName=this.seachTime.split("_")[0]+"_"+this.seachTime.split("_")[1];var t=this.seachTime,a=[],i={};this.exportData.expKeywords=[],this.exportData.days=this.seachTime.split("_")[2],this.exportData.expTypes=Object(s["a"])(this.listQuery.type);var n=this.exportData.expTypes.indexOf(17);-1!==n&&(this.exportData.expTypes.splice(n,1),this.exportData.expTypes=this.exportData.expTypes.concat(this.listQuery.type1)),a=this.listQuery.imeiGun.concat(this.listQuery.imeiCar);for(var r=0;r<a.length;r++)this.exportData.expKeywords.push(a[r][1]);this.exportData.expStatus=this.listQuery.status;this.exportData.expType;var o=this.exportData.expStatus;i=Object(l["a"])({},this.exportData),i.excelType="1001",i.positive=!1,i.title="异常表导出",i.expKeywords=this.exportData.expKeywords.length?this.exportData.expKeywords:null,Object(u["e"])(i).then(function(a,i,n){try{var r=new TextDecoder("utf-8"),l=JSON.parse(r.decode(new Uint8Array(a)));e.$message({message:l.msg,type:"warning"})}catch(m){for(var s,u,c=new Blob([a],{type:"application/excel"}),d=document.createElement("a"),p=0;p<e.alarmStatusOptions.length;p++)if(o==e.alarmStatusOptions[p].value){s=e.alarmStatusOptions[p].key;break}u=t+"--------"+s+"----报警记录.xlsx",d.href=window.URL.createObjectURL(c),d.download=u,d.click(),d.remove()}}).finally(function(){e.exportLoading=!1})},formatDateTime:function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var i=e.getDate(),n=(e.getHours(),e.getMinutes());return n=n<10?"0"+n:n,t+"_"+a+"_"+i},getList:function(){var e=this;this.seachTime1=this.seachTime,this.listLoading=!0,this.listQuery.tableName=this.seachTime.split("_")[0]+"_"+this.seachTime.split("_")[1],this.listQuery.days=this.seachTime.split("_")[2];var t=[],a=[],i={},n=null;t=this.listQuery.imeiCar.concat(this.listQuery.imeiGun);for(var r=0;r<t.length;r++)a.push(t[r][1]);i.page=this.listQuery.page,i.limit=this.listQuery.limit,i.types=Object(s["a"])(this.listQuery.type);var l=i.types.indexOf(17);-1!==l&&(i.types.splice(l,1),i.types=i.types.concat(this.listQuery.type1)),i.status=this.listQuery.status,i.tableName=this.listQuery.tableName,i.days=this.listQuery.days,i.positive=!1,t.length&&(i.keywords=a),n=u["c"],n(i).then(function(t){e.list=t.data?t.data.records:[],e.total=t.data.total,e.indexMethod=(e.listQuery.page-1)*e.listQuery.limit+1,e.listLoading=!1}).finally(function(){e.listLoading=!1})},resetTemp:function(){this.temp={uuid:null,info:null}},dealData:function(){var e=this,t=this;this.$refs["dataForm"].validate(function(a){if(a){var i={};e.temp.uuid?i.uuidMap=Object(r["a"])({},e.temp.rowTime,[e.temp.uuid]):i.idMap=Object(r["a"])({},e.temp.rowTime,[e.temp.id]),i.handlerInfo=e.temp.info,Object(u["b"])(i).then(function(){t.getList(),t.dialogFormVisible=!1,t.$notify({title:"Success",message:"处理成功",type:"success",duration:2e3})}),e.dialogFormVisible=!1}})},handleUpdate:function(e,t){var a=this;this.resetTemp(),this.$nextTick(function(){a.$refs["dataForm"].clearValidate()}),this.temp.uuid=e.uuid,this.temp.id=e.id,this.temp.rowTime=this.formatTime(e.createTime).split(" ")[0].replace(/-/g,"_"),"deal"==t?this.dialogStatus="deal":(this.temp.uuid=e.uuid,this.dialogStatus="check"),this.dialogFormVisible=!0},delayData:function(){var e=this;this.$refs["dataForm"].validate(function(t){t&&(Object(u["a"])({uuids:[e.temp.uuid],time:e.temp.time}).then(function(){e.getList(),e.dialogFormVisible=!1,e.$notify({title:"Success",message:"Update Successfully",type:"success",duration:2e3})}),e.dialogFormVisible=!1)})},formatTime1:function(e){return Object(d["d"])(e,1)},formatTime:function(e){return Object(d["e"])(e)},alarmStatus:function(e){return 0==e?"未处理":1==e?"忽略":2==e?"延迟处理":3==e?"处理完成":void 0},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2==0?"color-row":t%2==1?"noColor-row":""}}},f=m,h=(a("4b70"),a("2877")),y=Object(h["a"])(f,i,n,!1,null,null,null);t["default"]=y.exports},ca85:function(e,t,a){},d2d5:function(e,t,a){a("1654"),a("549b"),e.exports=a("584a").Array.from},df7c:function(e,t,a){(function(e){function a(e,t){for(var a=0,i=e.length-1;i>=0;i--){var n=e[i];"."===n?e.splice(i,1):".."===n?(e.splice(i,1),a++):a&&(e.splice(i,1),a--)}if(t)for(;a--;a)e.unshift("..");return e}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(e){return i.exec(e).slice(1)};function r(e,t){if(e.filter)return e.filter(t);for(var a=[],i=0;i<e.length;i++)t(e[i],i,e)&&a.push(e[i]);return a}t.resolve=function(){for(var t="",i=!1,n=arguments.length-1;n>=-1&&!i;n--){var l=n>=0?arguments[n]:e.cwd();if("string"!==typeof l)throw new TypeError("Arguments to path.resolve must be strings");l&&(t=l+"/"+t,i="/"===l.charAt(0))}return t=a(r(t.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),n="/"===l(e,-1);return e=a(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&n&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,a){function i(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var a=e.length-1;a>=0;a--)if(""!==e[a])break;return t>a?[]:e.slice(t,a-t+1)}e=t.resolve(e).substr(1),a=t.resolve(a).substr(1);for(var n=i(e.split("/")),r=i(a.split("/")),l=Math.min(n.length,r.length),s=l,o=0;o<l;o++)if(n[o]!==r[o]){s=o;break}var u=[];for(o=s;o<n.length;o++)u.push("..");return u=u.concat(r.slice(s)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=n(e),a=t[0],i=t[1];return a||i?(i&&(i=i.substr(0,i.length-1)),a+i):"."},t.basename=function(e,t){var a=n(e)[2];return t&&a.substr(-1*t.length)===t&&(a=a.substr(0,a.length-t.length)),a},t.extname=function(e){return n(e)[3]};var l="b"==="ab".substr(-1)?function(e,t,a){return e.substr(t,a)}:function(e,t,a){return t<0&&(t=e.length+t),e.substr(t,a)}}).call(this,a("f28c"))},e052:function(e,t,a){},f0af:function(e,t,a){"use strict";var i=a("3085"),n=a.n(i);n.a},f410:function(e,t,a){a("1af6"),e.exports=a("584a").Array.isArray},f44a:function(e,t,a){}}]);
//# sourceMappingURL=alarmCenter.44bf7684.js.map